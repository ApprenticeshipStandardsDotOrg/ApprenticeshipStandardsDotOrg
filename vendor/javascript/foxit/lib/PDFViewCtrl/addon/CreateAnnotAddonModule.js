!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PDFViewCtrl"),require("jquery")):"function"==typeof define&&define.amd?define(["PDFViewCtrl","jquery"],e):"object"==typeof exports?exports.PDFViewCtrl_CreateAnnotAddonModule=e(require("PDFViewCtrl"),require("jquery")):t.PDFViewCtrl_CreateAnnotAddonModule=e(t.PDFViewCtrl,t.jQuery)}(self,(function(t,e){return function(){var n={9662:function(t,e,n){var r=n(614),o=n(6330),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a function")}},9483:function(t,e,n){var r=n(4411),o=n(6330),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a constructor")}},6077:function(t,e,n){var r=n(614),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},1223:function(t,e,n){var r=n(5112),o=n(30),i=n(3070).f,a=r("unscopables"),s=Array.prototype;null==s[a]&&i(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},1530:function(t,e,n){"use strict";var r=n(8710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},5787:function(t,e,n){var r=n(7976),o=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw o("Incorrect invocation")}},9670:function(t,e,n){var r=n(111),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not an object")}},3013:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,o,i,a=n(3013),s=n(9781),c=n(7854),u=n(614),f=n(111),l=n(2597),h=n(648),d=n(6330),p=n(8880),v=n(8052),g=n(7045),m=n(7976),y=n(9518),w=n(7674),A=n(5112),b=n(9711),S=n(9909),E=S.enforce,x=S.get,R=c.Int8Array,T=R&&R.prototype,P=c.Uint8ClampedArray,C=P&&P.prototype,I=R&&y(R),_=T&&y(T),D=Object.prototype,L=c.TypeError,k=A("toStringTag"),M=b("TYPED_ARRAY_TAG"),O="TypedArrayConstructor",N=a&&!!w&&"Opera"!==h(c.opera),H=!1,V={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},j={BigInt64Array:8,BigUint64Array:8},U=function(t){var e=y(t);if(f(e)){var n=x(e);return n&&l(n,O)?n[O]:U(e)}},F=function(t){if(!f(t))return!1;var e=h(t);return l(V,e)||l(j,e)};for(r in V)(i=(o=c[r])&&o.prototype)?E(i)[O]=o:N=!1;for(r in j)(i=(o=c[r])&&o.prototype)&&(E(i)[O]=o);if((!N||!u(I)||I===Function.prototype)&&(I=function(){throw L("Incorrect invocation")},N))for(r in V)c[r]&&w(c[r],I);if((!N||!_||_===D)&&(_=I.prototype,N))for(r in V)c[r]&&w(c[r].prototype,_);if(N&&y(C)!==_&&w(C,_),s&&!l(_,k))for(r in H=!0,g(_,k,{configurable:!0,get:function(){return f(this)?this[M]:void 0}}),V)c[r]&&p(c[r],M,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:H&&M,aTypedArray:function(t){if(F(t))return t;throw L("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!w||m(I,t)))return t;throw L(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(s){if(n)for(var o in V){var i=c[o];if(i&&l(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=e}catch(t){}}}_[t]&&!n||v(_,t,n?e:N&&T[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(s){if(w){if(n)for(r in V)if((o=c[r])&&l(o,t))try{delete o[t]}catch(t){}if(I[t]&&!n)return;try{return v(I,t,n?e:N&&I[t]||e)}catch(t){}}for(r in V)!(o=c[r])||o[t]&&!n||v(o,t,e)}},getTypedArrayConstructor:U,isView:function(t){if(!f(t))return!1;var e=h(t);return"DataView"===e||l(V,e)||l(j,e)},isTypedArray:F,TypedArray:I,TypedArrayPrototype:_}},3331:function(t,e,n){"use strict";var r=n(7854),o=n(1702),i=n(9781),a=n(3013),s=n(6530),c=n(8880),u=n(7045),f=n(9190),l=n(7293),h=n(5787),d=n(9303),p=n(7466),v=n(7067),g=n(1179),m=n(9518),y=n(7674),w=n(8006).f,A=n(1285),b=n(1589),S=n(8003),E=n(9909),x=s.PROPER,R=s.CONFIGURABLE,T="ArrayBuffer",P="DataView",C="prototype",I="Wrong index",_=E.getterFor(T),D=E.getterFor(P),L=E.set,k=r[T],M=k,O=M&&M[C],N=r[P],H=N&&N[C],V=Object.prototype,j=r.Array,U=r.RangeError,F=o(A),B=o([].reverse),Y=g.pack,X=g.unpack,G=function(t){return[255&t]},$=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},W=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},q=function(t){return Y(t,23,4)},J=function(t){return Y(t,52,8)},K=function(t,e,n){u(t[C],e,{configurable:!0,get:function(){return n(this)[e]}})},Q=function(t,e,n,r){var o=v(n),i=D(t);if(o+e>i.byteLength)throw U(I);var a=i.bytes,s=o+i.byteOffset,c=b(a,s,s+e);return r?c:B(c)},Z=function(t,e,n,r,o,i){var a=v(n),s=D(t);if(a+e>s.byteLength)throw U(I);for(var c=s.bytes,u=a+s.byteOffset,f=r(+o),l=0;l<e;l++)c[u+l]=f[i?l:e-l-1]};if(a){var tt=x&&k.name!==T;if(l((function(){k(1)}))&&l((function(){new k(-1)}))&&!l((function(){return new k,new k(1.5),new k(NaN),1!=k.length||tt&&!R})))tt&&R&&c(k,"name",T);else{(M=function(t){return h(this,O),new k(v(t))})[C]=O;for(var et,nt=w(k),rt=0;nt.length>rt;)(et=nt[rt++])in M||c(M,et,k[et]);O.constructor=M}y&&m(H)!==V&&y(H,V);var ot=new N(new M(2)),it=o(H.setInt8);ot.setInt8(0,2147483648),ot.setInt8(1,2147483649),!ot.getInt8(0)&&ot.getInt8(1)||f(H,{setInt8:function(t,e){it(this,t,e<<24>>24)},setUint8:function(t,e){it(this,t,e<<24>>24)}},{unsafe:!0})}else O=(M=function(t){h(this,O);var e=v(t);L(this,{type:T,bytes:F(j(e),0),byteLength:e}),i||(this.byteLength=e,this.detached=!1)})[C],H=(N=function(t,e,n){h(this,H),h(t,O);var r=_(t),o=r.byteLength,a=d(e);if(a<0||a>o)throw U("Wrong offset");if(a+(n=void 0===n?o-a:p(n))>o)throw U("Wrong length");L(this,{type:P,buffer:t,byteLength:n,byteOffset:a,bytes:r.bytes}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=a)})[C],i&&(K(M,"byteLength",_),K(N,"buffer",D),K(N,"byteLength",D),K(N,"byteOffset",D)),f(H,{getInt8:function(t){return Q(this,1,t)[0]<<24>>24},getUint8:function(t){return Q(this,1,t)[0]},getInt16:function(t){var e=Q(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Q(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return W(Q(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return W(Q(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return X(Q(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return X(Q(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Z(this,1,t,G,e)},setUint8:function(t,e){Z(this,1,t,G,e)},setInt16:function(t,e){Z(this,2,t,$,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Z(this,2,t,$,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Z(this,4,t,z,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Z(this,4,t,z,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Z(this,4,t,q,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Z(this,8,t,J,e,arguments.length>2?arguments[2]:void 0)}});S(M,T),S(N,P),t.exports={ArrayBuffer:M,DataView:N}},1048:function(t,e,n){"use strict";var r=n(7908),o=n(1400),i=n(6244),a=n(5117),s=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),c=i(n),u=o(t,c),f=o(e,c),l=arguments.length>2?arguments[2]:void 0,h=s((void 0===l?c:o(l,c))-f,c-u),d=1;for(f<u&&u<f+h&&(d=-1,f+=h-1,u+=h-1);h-- >0;)f in n?n[u]=n[f]:a(n,u),u+=d,f+=d;return n}},1285:function(t,e,n){"use strict";var r=n(7908),o=n(1400),i=n(6244);t.exports=function(t){for(var e=r(this),n=i(e),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)e[s++]=t;return e}},8533:function(t,e,n){"use strict";var r=n(2092).forEach,o=n(9341)("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},7745:function(t,e,n){var r=n(6244);t.exports=function(t,e){for(var n=0,o=r(e),i=new t(o);o>n;)i[n]=e[n++];return i}},8457:function(t,e,n){"use strict";var r=n(9974),o=n(6916),i=n(7908),a=n(3411),s=n(7659),c=n(4411),u=n(6244),f=n(6135),l=n(4121),h=n(1246),d=Array;t.exports=function(t){var e=i(t),n=c(this),p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v;g&&(v=r(v,p>2?arguments[2]:void 0));var m,y,w,A,b,S,E=h(e),x=0;if(!E||this===d&&s(E))for(m=u(e),y=n?new this(m):d(m);m>x;x++)S=g?v(e[x],x):e[x],f(y,x,S);else for(b=(A=l(e,E)).next,y=n?new this:[];!(w=o(b,A)).done;x++)S=g?a(A,v,[w.value,x],!0):w.value,f(y,x,S);return y.length=x,y}},1318:function(t,e,n){var r=n(5656),o=n(1400),i=n(6244),a=function(t){return function(e,n,a){var s,c=r(e),u=i(c),f=o(a,u);if(t&&n!=n){for(;u>f;)if((s=c[f++])!=s)return!0}else for(;u>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2092:function(t,e,n){var r=n(9974),o=n(1702),i=n(8361),a=n(7908),s=n(6244),c=n(5417),u=o([].push),f=function(t){var e=1==t,n=2==t,o=3==t,f=4==t,l=6==t,h=7==t,d=5==t||l;return function(p,v,g,m){for(var y,w,A=a(p),b=i(A),S=r(v,g),E=s(b),x=0,R=m||c,T=e?R(p,E):n||h?R(p,0):void 0;E>x;x++)if((d||x in b)&&(w=S(y=b[x],x,A),t))if(e)T[x]=w;else if(w)switch(t){case 3:return!0;case 5:return y;case 6:return x;case 2:u(T,y)}else switch(t){case 4:return!1;case 7:u(T,y)}return l?-1:o||f?f:T}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},6583:function(t,e,n){"use strict";var r=n(2104),o=n(5656),i=n(9303),a=n(6244),s=n(9341),c=Math.min,u=[].lastIndexOf,f=!!u&&1/[1].lastIndexOf(1,-0)<0,l=s("lastIndexOf"),h=f||!l;t.exports=h?function(t){if(f)return r(u,this,arguments)||0;var e=o(this),n=a(e),s=n-1;for(arguments.length>1&&(s=c(s,i(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:u},1194:function(t,e,n){var r=n(7293),o=n(5112),i=n(7392),a=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:function(t,e,n){"use strict";var r=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},3671:function(t,e,n){var r=n(9662),o=n(7908),i=n(8361),a=n(6244),s=TypeError,c=function(t){return function(e,n,c,u){r(n);var f=o(e),l=i(f),h=a(f),d=t?h-1:0,p=t?-1:1;if(c<2)for(;;){if(d in l){u=l[d],d+=p;break}if(d+=p,t?d<0:h<=d)throw s("Reduce of empty array with no initial value")}for(;t?d>=0:h>d;d+=p)d in l&&(u=n(u,l[d],d,f));return u}};t.exports={left:c(!1),right:c(!0)}},3658:function(t,e,n){"use strict";var r=n(9781),o=n(3157),i=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=s?function(t,e){if(o(t)&&!a(t,"length").writable)throw i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1589:function(t,e,n){var r=n(1400),o=n(6244),i=n(6135),a=Array,s=Math.max;t.exports=function(t,e,n){for(var c=o(t),u=r(e,c),f=r(void 0===n?c:n,c),l=a(s(f-u,0)),h=0;u<f;u++,h++)i(l,h,t[u]);return l.length=h,l}},206:function(t,e,n){var r=n(1702);t.exports=r([].slice)},4362:function(t,e,n){var r=n(1589),o=Math.floor,i=function(t,e){var n=t.length,c=o(n/2);return n<8?a(t,e):s(t,i(r(t,0,c),e),i(r(t,c),e),e)},a=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},s=function(t,e,n,r){for(var o=e.length,i=n.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?r(e[a],n[s])<=0?e[a++]:n[s++]:a<o?e[a++]:n[s++];return t};t.exports=i},7475:function(t,e,n){var r=n(3157),o=n(4411),i=n(111),a=n(5112)("species"),s=Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(o(e)&&(e===s||r(e.prototype))||i(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?s:e}},5417:function(t,e,n){var r=n(7475);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},3411:function(t,e,n){var r=n(9670),o=n(9212);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){o(t,"throw",e)}}},7072:function(t,e,n){var r=n(5112)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},4326:function(t,e,n){var r=n(1702),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},648:function(t,e,n){var r=n(1694),o=n(614),i=n(4326),a=n(5112)("toStringTag"),s=Object,c="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=s(t),a))?n:c?i(e):"Object"==(r=i(e))&&o(e.callee)?"Arguments":r}},9920:function(t,e,n){var r=n(2597),o=n(3887),i=n(1236),a=n(3070);t.exports=function(t,e,n){for(var s=o(e),c=a.f,u=i.f,f=0;f<s.length;f++){var l=s[f];r(t,l)||n&&r(n,l)||c(t,l,u(e,l))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6178:function(t){t.exports=function(t,e){return{value:t,done:e}}},8880:function(t,e,n){var r=n(9781),o=n(3070),i=n(9114);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(4948),o=n(3070),i=n(9114);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},7045:function(t,e,n){var r=n(6339),o=n(3070);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),o.f(t,e,n)}},8052:function(t,e,n){var r=n(614),o=n(3070),i=n(6339),a=n(3072);t.exports=function(t,e,n,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:e;if(r(n)&&i(n,u,s),s.global)c?t[e]=n:a(e,n);else{try{s.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},9190:function(t,e,n){var r=n(8052);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},3072:function(t,e,n){var r=n(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},5117:function(t,e,n){"use strict";var r=n(6330),o=TypeError;t.exports=function(t,e){if(!delete t[e])throw o("Cannot delete property "+r(e)+" of "+r(t))}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,n=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var r=n(7854),o=n(111),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},7207:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,e,n){var r=n(317)("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},8886:function(t,e,n){var r=n(8113).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},7871:function(t,e,n){var r=n(3823),o=n(5268);t.exports=!r&&!o&&"object"==typeof window&&"object"==typeof document},3823:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},256:function(t,e,n){var r=n(8113);t.exports=/MSIE|Trident/.test(r)},1528:function(t,e,n){var r=n(8113);t.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},6833:function(t,e,n){var r=n(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(t,e,n){var r=n(4326);t.exports="undefined"!=typeof process&&"process"==r(process)},1036:function(t,e,n){var r=n(8113);t.exports=/web0s(?!.*chrome)/i.test(r)},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){var r,o,i=n(7854),a=n(8113),s=i.process,c=i.Deno,u=s&&s.versions||c&&c.version,f=u&&u.v8;f&&(o=(r=f.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},8008:function(t,e,n){var r=n(8113).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),o=n(1236).f,i=n(8880),a=n(8052),s=n(3072),c=n(9920),u=n(4705);t.exports=function(t,e){var n,f,l,h,d,p=t.target,v=t.global,g=t.stat;if(n=v?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(f in e){if(h=e[f],l=t.dontCallGetSet?(d=o(n,f))&&d.value:n[f],!u(v?f:p+(g?".":"#")+f,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;c(h,l)}(t.sham||l&&l.sham)&&i(h,"sham",!0),a(n,f,h,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:function(t,e,n){"use strict";n(4916);var r=n(1470),o=n(8052),i=n(2261),a=n(7293),s=n(5112),c=n(8880),u=s("species"),f=RegExp.prototype;t.exports=function(t,e,n,l){var h=s(t),d=!a((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),p=d&&!a((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!d||!p||n){var v=r(/./[h]),g=e(h,""[t],(function(t,e,n,o,a){var s=r(t),c=e.exec;return c===i||c===f.exec?d&&!a?{done:!0,value:v(e,n,o)}:{done:!0,value:s(n,e,o)}:{done:!1}}));o(String.prototype,t,g[0]),o(f,h,g[1])}l&&c(f[h],"sham",!0)}},2104:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},9974:function(t,e,n){var r=n(1470),o=n(9662),i=n(4374),a=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var r=n(4374),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(t,e,n){var r=n(9781),o=n(2597),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},5668:function(t,e,n){var r=n(1702),o=n(9662);t.exports=function(t,e,n){try{return r(o(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},1470:function(t,e,n){var r=n(4326),o=n(1702);t.exports=function(t){if("Function"===r(t))return o(t)}},1702:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.call,a=r&&o.bind.bind(i,i);t.exports=r?a:function(t){return function(){return i.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),o=n(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},1246:function(t,e,n){var r=n(648),o=n(8173),i=n(8554),a=n(7497),s=n(5112)("iterator");t.exports=function(t){if(!i(t))return o(t,s)||o(t,"@@iterator")||a[r(t)]}},4121:function(t,e,n){var r=n(6916),o=n(9662),i=n(9670),a=n(6330),s=n(1246),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?s(t):e;if(o(n))return i(r(n,t));throw c(a(t)+" is not iterable")}},8044:function(t,e,n){var r=n(1702),o=n(3157),i=n(614),a=n(4326),s=n(1340),c=r([].push);t.exports=function(t){if(i(t))return t;if(o(t)){for(var e=t.length,n=[],r=0;r<e;r++){var u=t[r];"string"==typeof u?c(n,u):"number"!=typeof u&&"Number"!=a(u)&&"String"!=a(u)||c(n,s(u))}var f=n.length,l=!0;return function(t,e){if(l)return l=!1,e;if(o(this))return e;for(var r=0;r<f;r++)if(n[r]===t)return e}}}},8173:function(t,e,n){var r=n(9662),o=n(8554);t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},647:function(t,e,n){var r=n(1702),o=n(7908),i=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,l,h){var d=n+t.length,p=r.length,v=f;return void 0!==l&&(l=o(l),v=u),s(h,v,(function(o,s){var u;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,d);case"<":u=l[c(s,1,-1)];break;default:var f=+s;if(0===f)return o;if(f>p){var h=i(f/10);return 0===h?o:h<=p?void 0===r[h-1]?a(s,1):r[h-1]+a(s,1):o}u=r[f-1]}return void 0===u?"":u}))}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:function(t){t.exports={}},842:function(t){t.exports=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),o=n(7293),i=n(317);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},1179:function(t){var e=Array,n=Math.abs,r=Math.pow,o=Math.floor,i=Math.log,a=Math.LN2;t.exports={pack:function(t,s,c){var u,f,l,h=e(c),d=8*c-s-1,p=(1<<d)-1,v=p>>1,g=23===s?r(2,-24)-r(2,-77):0,m=t<0||0===t&&1/t<0?1:0,y=0;for((t=n(t))!=t||t===1/0?(f=t!=t?1:0,u=p):(u=o(i(t)/a),t*(l=r(2,-u))<1&&(u--,l*=2),(t+=u+v>=1?g/l:g*r(2,1-v))*l>=2&&(u++,l/=2),u+v>=p?(f=0,u=p):u+v>=1?(f=(t*l-1)*r(2,s),u+=v):(f=t*r(2,v-1)*r(2,s),u=0));s>=8;)h[y++]=255&f,f/=256,s-=8;for(u=u<<s|f,d+=s;d>0;)h[y++]=255&u,u/=256,d-=8;return h[--y]|=128*m,h},unpack:function(t,e){var n,o=t.length,i=8*o-e-1,a=(1<<i)-1,s=a>>1,c=i-7,u=o-1,f=t[u--],l=127&f;for(f>>=7;c>0;)l=256*l+t[u--],c-=8;for(n=l&(1<<-c)-1,l>>=-c,c+=e;c>0;)n=256*n+t[u--],c-=8;if(0===l)l=1-s;else{if(l===a)return n?NaN:f?-1/0:1/0;n+=r(2,e),l-=s}return(f?-1:1)*n*r(2,l-e)}}},8361:function(t,e,n){var r=n(1702),o=n(7293),i=n(4326),a=Object,s=r("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?s(t,""):a(t)}:a},9587:function(t,e,n){var r=n(614),o=n(111),i=n(7674);t.exports=function(t,e,n){var a,s;return i&&r(a=e.constructor)&&a!==n&&o(s=a.prototype)&&s!==n.prototype&&i(t,s),t}},2788:function(t,e,n){var r=n(1702),o=n(614),i=n(5465),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},9909:function(t,e,n){var r,o,i,a=n(4811),s=n(7854),c=n(111),u=n(8880),f=n(2597),l=n(5465),h=n(6200),d=n(3501),p="Object already initialized",v=s.TypeError,g=s.WeakMap;if(a||l.state){var m=l.state||(l.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,r=function(t,e){if(m.has(t))throw v(p);return e.facade=t,m.set(t,e),e},o=function(t){return m.get(t)||{}},i=function(t){return m.has(t)}}else{var y=h("state");d[y]=!0,r=function(t,e){if(f(t,y))throw v(p);return e.facade=t,u(t,y,e),e},o=function(t){return f(t,y)?t[y]:{}},i=function(t){return f(t,y)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw v("Incompatible receiver, "+t+" required");return n}}}},7659:function(t,e,n){var r=n(5112),o=n(7497),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4067:function(t,e,n){var r=n(648);t.exports=function(t){var e=r(t);return"BigInt64Array"==e||"BigUint64Array"==e}},614:function(t,e,n){var r=n(4154),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},4411:function(t,e,n){var r=n(1702),o=n(7293),i=n(614),a=n(648),s=n(5005),c=n(2788),u=function(){},f=[],l=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=r(h.exec),p=!h.exec(u),v=function(t){if(!i(t))return!1;try{return l(u,f,t),!0}catch(t){return!1}},g=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(h,c(t))}catch(t){return!0}};g.sham=!0,t.exports=!l||o((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?g:v},4705:function(t,e,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,a=function(t,e){var n=c[s(t)];return n==f||n!=u&&(o(e)?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",f=a.POLYFILL="P";t.exports=a},5988:function(t,e,n){var r=n(111),o=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&o(t)===t}},8554:function(t){t.exports=function(t){return null==t}},111:function(t,e,n){var r=n(614),o=n(4154),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===i}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},7850:function(t,e,n){var r=n(111),o=n(4326),i=n(5112)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},2190:function(t,e,n){var r=n(5005),o=n(614),i=n(7976),a=n(3307),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&i(e.prototype,s(t))}},408:function(t,e,n){var r=n(9974),o=n(6916),i=n(9670),a=n(6330),s=n(7659),c=n(6244),u=n(7976),f=n(4121),l=n(1246),h=n(9212),d=TypeError,p=function(t,e){this.stopped=t,this.result=e},v=p.prototype;t.exports=function(t,e,n){var g,m,y,w,A,b,S,E=n&&n.that,x=!(!n||!n.AS_ENTRIES),R=!(!n||!n.IS_RECORD),T=!(!n||!n.IS_ITERATOR),P=!(!n||!n.INTERRUPTED),C=r(e,E),I=function(t){return g&&h(g,"normal",t),new p(!0,t)},_=function(t){return x?(i(t),P?C(t[0],t[1],I):C(t[0],t[1])):P?C(t,I):C(t)};if(R)g=t.iterator;else if(T)g=t;else{if(!(m=l(t)))throw d(a(t)+" is not iterable");if(s(m)){for(y=0,w=c(t);w>y;y++)if((A=_(t[y]))&&u(v,A))return A;return new p(!1)}g=f(t,m)}for(b=R?t.next:g.next;!(S=o(b,g)).done;){try{A=_(S.value)}catch(t){h(g,"throw",t)}if("object"==typeof A&&A&&u(v,A))return A}return new p(!1)}},9212:function(t,e,n){var r=n(6916),o=n(9670),i=n(8173);t.exports=function(t,e,n){var a,s;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw n;return n}a=r(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw n;if(s)throw a;return o(a),n}},3061:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,o=n(30),i=n(9114),a=n(8003),s=n(7497),c=function(){return this};t.exports=function(t,e,n,u){var f=e+" Iterator";return t.prototype=o(r,{next:i(+!u,n)}),a(t,f,!1,!0),s[f]=c,t}},1656:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(1913),a=n(6530),s=n(614),c=n(3061),u=n(9518),f=n(7674),l=n(8003),h=n(8880),d=n(8052),p=n(5112),v=n(7497),g=n(3383),m=a.PROPER,y=a.CONFIGURABLE,w=g.IteratorPrototype,A=g.BUGGY_SAFARI_ITERATORS,b=p("iterator"),S="keys",E="values",x="entries",R=function(){return this};t.exports=function(t,e,n,a,p,g,T){c(n,e,a);var P,C,I,_=function(t){if(t===p&&O)return O;if(!A&&t in k)return k[t];switch(t){case S:case E:case x:return function(){return new n(this,t)}}return function(){return new n(this)}},D=e+" Iterator",L=!1,k=t.prototype,M=k[b]||k["@@iterator"]||p&&k[p],O=!A&&M||_(p),N="Array"==e&&k.entries||M;if(N&&(P=u(N.call(new t)))!==Object.prototype&&P.next&&(i||u(P)===w||(f?f(P,w):s(P[b])||d(P,b,R)),l(P,D,!0,!0),i&&(v[D]=R)),m&&p==E&&M&&M.name!==E&&(!i&&y?h(k,"name",E):(L=!0,O=function(){return o(M,this)})),p)if(C={values:_(E),keys:g?O:_(S),entries:_(x)},T)for(I in C)(A||L||!(I in k))&&d(k,I,C[I]);else r({target:e,proto:!0,forced:A||L},C);return i&&!T||k[b]===O||d(k,b,O,{name:p}),v[e]=O,C}},3383:function(t,e,n){"use strict";var r,o,i,a=n(7293),s=n(614),c=n(111),u=n(30),f=n(9518),l=n(8052),h=n(5112),d=n(1913),p=h("iterator"),v=!1;[].keys&&("next"in(i=[].keys())?(o=f(f(i)))!==Object.prototype&&(r=o):v=!0),!c(r)||a((function(){var t={};return r[p].call(t)!==t}))?r={}:d&&(r=u(r)),s(r[p])||l(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:v}},7497:function(t){t.exports={}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(1702),o=n(7293),i=n(614),a=n(2597),s=n(9781),c=n(6530).CONFIGURABLE,u=n(2788),f=n(9909),l=f.enforce,h=f.get,d=String,p=Object.defineProperty,v=r("".slice),g=r("".replace),m=r([].join),y=s&&!o((function(){return 8!==p((function(){}),"length",{value:8}).length})),w=String(String).split("String"),A=t.exports=function(t,e,n){"Symbol("===v(d(e),0,7)&&(e="["+g(d(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!a(t,"name")||c&&t.name!==e)&&(s?p(t,"name",{value:e,configurable:!0}):t.name=e),y&&n&&a(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=l(t);return a(r,"source")||(r.source=m(w,"string"==typeof e?e:"")),t};Function.prototype.toString=A((function(){return i(this)&&h(this).source||u(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},5948:function(t,e,n){var r,o,i,a,s,c=n(7854),u=n(9974),f=n(1236).f,l=n(261).set,h=n(8572),d=n(6833),p=n(1528),v=n(1036),g=n(5268),m=c.MutationObserver||c.WebKitMutationObserver,y=c.document,w=c.process,A=c.Promise,b=f(c,"queueMicrotask"),S=b&&b.value;if(!S){var E=new h,x=function(){var t,e;for(g&&(t=w.domain)&&t.exit();e=E.get();)try{e()}catch(t){throw E.head&&r(),t}t&&t.enter()};d||g||v||!m||!y?!p&&A&&A.resolve?((a=A.resolve(void 0)).constructor=A,s=u(a.then,a),r=function(){s(x)}):g?r=function(){w.nextTick(x)}:(l=u(l,c),r=function(){l(x)}):(o=!0,i=y.createTextNode(""),new m(x).observe(i,{characterData:!0}),r=function(){i.data=o=!o}),S=function(t){E.head||r(),E.add(t)}}t.exports=S},8523:function(t,e,n){"use strict";var r=n(9662),o=TypeError,i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw o("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},7023:function(t,e,n){var r=n(7854).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},1574:function(t,e,n){"use strict";var r=n(9781),o=n(1702),i=n(6916),a=n(7293),s=n(1956),c=n(5181),u=n(5296),f=n(7908),l=n(8361),h=Object.assign,d=Object.defineProperty,p=o([].concat);t.exports=!h||a((function(){if(r&&1!==h({b:1},h(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||s(h({},e)).join("")!=o}))?function(t,e){for(var n=f(t),o=arguments.length,a=1,h=c.f,d=u.f;o>a;)for(var v,g=l(arguments[a++]),m=h?p(s(g),h(g)):s(g),y=m.length,w=0;y>w;)v=m[w++],r&&!i(d,g,v)||(n[v]=g[v]);return n}:h},30:function(t,e,n){var r,o=n(9670),i=n(6048),a=n(748),s=n(3501),c=n(490),u=n(317),f=n(6200),l="prototype",h="script",d=f("IE_PROTO"),p=function(){},v=function(t){return"<"+h+">"+t+"</"+h+">"},g=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;m="undefined"!=typeof document?document.domain&&r?g(r):(e=u("iframe"),n="java"+h+":",e.style.display="none",c.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):g(r);for(var o=a.length;o--;)delete m[l][a[o]];return m()};s[d]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p[l]=o(t),n=new p,p[l]=null,n[d]=t):n=m(),void 0===e?n:i.f(n,e)}},6048:function(t,e,n){var r=n(9781),o=n(3353),i=n(3070),a=n(9670),s=n(5656),c=n(1956);e.f=r&&!o?Object.defineProperties:function(t,e){a(t);for(var n,r=s(e),o=c(e),u=o.length,f=0;u>f;)i.f(t,n=o[f++],r[n]);return t}},3070:function(t,e,n){var r=n(9781),o=n(4664),i=n(3353),a=n(9670),s=n(4948),c=TypeError,u=Object.defineProperty,f=Object.getOwnPropertyDescriptor,l="enumerable",h="configurable",d="writable";e.f=r?i?function(t,e,n){if(a(t),e=s(e),a(n),"function"==typeof t&&"prototype"===e&&"value"in n&&d in n&&!n[d]){var r=f(t,e);r&&r[d]&&(t[e]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:l in n?n[l]:r[l],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(a(t),e=s(e),a(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),o=n(6916),i=n(5296),a=n(9114),s=n(5656),c=n(4948),u=n(2597),f=n(4664),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=c(e),f)try{return l(t,e)}catch(t){}if(u(t,e))return a(!o(i.f,t,e),t[e])}},1156:function(t,e,n){var r=n(4326),o=n(5656),i=n(8006).f,a=n(1589),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"Window"==r(t)?function(t){try{return i(t)}catch(t){return a(s)}}(t):i(o(t))}},8006:function(t,e,n){var r=n(6324),o=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(2597),o=n(614),i=n(7908),a=n(6200),s=n(8544),c=a("IE_PROTO"),u=Object,f=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=i(t);if(r(e,c))return e[c];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof u?f:null}},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),o=n(2597),i=n(5656),a=n(1318).indexOf,s=n(3501),c=r([].push);t.exports=function(t,e){var n,r=i(t),u=0,f=[];for(n in r)!o(s,n)&&o(r,n)&&c(f,n);for(;e.length>u;)o(r,n=e[u++])&&(~a(f,n)||c(f,n));return f}},1956:function(t,e,n){var r=n(6324),o=n(748);t.exports=Object.keys||function(t){return r(t,o)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(5668),o=n(9670),i=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},4699:function(t,e,n){var r=n(9781),o=n(1702),i=n(1956),a=n(5656),s=o(n(5296).f),c=o([].push),u=function(t){return function(e){for(var n,o=a(e),u=i(o),f=u.length,l=0,h=[];f>l;)n=u[l++],r&&!s(o,n)||c(h,t?[n,o[n]]:o[n]);return h}};t.exports={entries:u(!0),values:u(!1)}},288:function(t,e,n){"use strict";var r=n(1694),o=n(648);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},2140:function(t,e,n){var r=n(6916),o=n(614),i=n(111),a=TypeError;t.exports=function(t,e){var n,s;if("string"===e&&o(n=t.toString)&&!i(s=r(n,t)))return s;if(o(n=t.valueOf)&&!i(s=r(n,t)))return s;if("string"!==e&&o(n=t.toString)&&!i(s=r(n,t)))return s;throw a("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),o=n(1702),i=n(8006),a=n(5181),s=n(9670),c=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=a.f;return n?c(e,n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},2534:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},3702:function(t,e,n){var r=n(7854),o=n(2492),i=n(614),a=n(4705),s=n(2788),c=n(5112),u=n(7871),f=n(3823),l=n(1913),h=n(7392),d=o&&o.prototype,p=c("species"),v=!1,g=i(r.PromiseRejectionEvent),m=a("Promise",(function(){var t=s(o),e=t!==String(o);if(!e&&66===h)return!0;if(l&&(!d.catch||!d.finally))return!0;if(!h||h<51||!/native code/.test(t)){var n=new o((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[p]=r,!(v=n.then((function(){}))instanceof r))return!0}return!e&&(u||f)&&!g}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:g,SUBCLASSING:v}},2492:function(t,e,n){var r=n(7854);t.exports=r.Promise},9478:function(t,e,n){var r=n(9670),o=n(111),i=n(8523);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},612:function(t,e,n){var r=n(2492),o=n(7072),i=n(3702).CONSTRUCTOR;t.exports=i||!o((function(t){r.all(t).then(void 0,(function(){}))}))},8572:function(t){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},7651:function(t,e,n){var r=n(6916),o=n(9670),i=n(614),a=n(4326),s=n(2261),c=TypeError;t.exports=function(t,e){var n=t.exec;if(i(n)){var u=r(n,t,e);return null!==u&&o(u),u}if("RegExp"===a(t))return r(s,t,e);throw c("RegExp#exec called on incompatible receiver")}},2261:function(t,e,n){"use strict";var r,o,i=n(6916),a=n(1702),s=n(1340),c=n(7066),u=n(2999),f=n(2309),l=n(30),h=n(9909).get,d=n(9441),p=n(7168),v=f("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,m=g,y=a("".charAt),w=a("".indexOf),A=a("".replace),b=a("".slice),S=(o=/b*/g,i(g,r=/a/,"a"),i(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),E=u.BROKEN_CARET,x=void 0!==/()??/.exec("")[1];(S||x||E||d||p)&&(m=function(t){var e,n,r,o,a,u,f,d=this,p=h(d),R=s(t),T=p.raw;if(T)return T.lastIndex=d.lastIndex,e=i(m,T,R),d.lastIndex=T.lastIndex,e;var P=p.groups,C=E&&d.sticky,I=i(c,d),_=d.source,D=0,L=R;if(C&&(I=A(I,"y",""),-1===w(I,"g")&&(I+="g"),L=b(R,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==y(R,d.lastIndex-1))&&(_="(?: "+_+")",L=" "+L,D++),n=new RegExp("^(?:"+_+")",I)),x&&(n=new RegExp("^"+_+"$(?!\\s)",I)),S&&(r=d.lastIndex),o=i(g,C?n:d,L),C?o?(o.input=b(o.input,D),o[0]=b(o[0],D),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:S&&o&&(d.lastIndex=d.global?o.index+o[0].length:r),x&&o&&o.length>1&&i(v,o[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&P)for(o.groups=u=l(null),a=0;a<P.length;a++)u[(f=P[a])[0]]=o[f[1]];return o}),t.exports=m},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:function(t,e,n){var r=n(6916),o=n(2597),i=n(7976),a=n(7066),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||o(t,"flags")||!i(s,t)?e:r(a,t)}},2999:function(t,e,n){var r=n(7293),o=n(7854).RegExp,i=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),s=i||r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},9441:function(t,e,n){var r=n(7293),o=n(7854).RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:function(t,e,n){var r=n(7293),o=n(7854).RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:function(t,e,n){var r=n(8554),o=TypeError;t.exports=function(t){if(r(t))throw o("Can't call method on "+t);return t}},6340:function(t,e,n){"use strict";var r=n(5005),o=n(7045),i=n(5112),a=n(9781),s=i("species");t.exports=function(t){var e=r(t);a&&e&&!e[s]&&o(e,s,{configurable:!0,get:function(){return this}})}},8003:function(t,e,n){var r=n(3070).f,o=n(2597),i=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!o(t,i)&&r(t,i,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),o=n(9711),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:function(t,e,n){var r=n(7854),o=n(3072),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},2309:function(t,e,n){var r=n(1913),o=n(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.29.0",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(t,e,n){var r=n(9670),o=n(9483),i=n(8554),a=n(5112)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||i(n=r(s)[a])?e:o(n)}},8710:function(t,e,n){var r=n(1702),o=n(9303),i=n(1340),a=n(4488),s=r("".charAt),c=r("".charCodeAt),u=r("".slice),f=function(t){return function(e,n){var r,f,l=i(a(e)),h=o(n),d=l.length;return h<0||h>=d?t?"":void 0:(r=c(l,h))<55296||r>56319||h+1===d||(f=c(l,h+1))<56320||f>57343?t?s(l,h):r:t?u(l,h,h+2):f-56320+(r-55296<<10)+65536}};t.exports={codeAt:f(!1),charAt:f(!0)}},3197:function(t,e,n){var r=n(1702),o=2147483647,i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",c=RangeError,u=r(a.exec),f=Math.floor,l=String.fromCharCode,h=r("".charCodeAt),d=r([].join),p=r([].push),v=r("".replace),g=r("".split),m=r("".toLowerCase),y=function(t){return t+22+75*(t<26)},w=function(t,e,n){var r=0;for(t=n?f(t/700):t>>1,t+=f(t/e);t>455;)t=f(t/35),r+=36;return f(r+36*t/(t+38))},A=function(t){var e=[];t=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=h(t,n++);if(o>=55296&&o<=56319&&n<r){var i=h(t,n++);56320==(64512&i)?p(e,((1023&o)<<10)+(1023&i)+65536):(p(e,o),n--)}else p(e,o)}return e}(t);var n,r,i=t.length,a=128,u=0,v=72;for(n=0;n<t.length;n++)(r=t[n])<128&&p(e,l(r));var g=e.length,m=g;for(g&&p(e,"-");m<i;){var A=o;for(n=0;n<t.length;n++)(r=t[n])>=a&&r<A&&(A=r);var b=m+1;if(A-a>f((o-u)/b))throw c(s);for(u+=(A-a)*b,a=A,n=0;n<t.length;n++){if((r=t[n])<a&&++u>o)throw c(s);if(r==a){for(var S=u,E=36;;){var x=E<=v?1:E>=v+26?26:E-v;if(S<x)break;var R=S-x,T=36-x;p(e,l(y(x+R%T))),S=f(R/T),E+=36}p(e,l(y(S))),v=w(u,b,m==g),u=0,m++}}u++,a++}return d(e,"")};t.exports=function(t){var e,n,r=[],o=g(v(m(t),a,"."),".");for(e=0;e<o.length;e++)n=o[e],p(r,u(i,n)?"xn--"+A(n):n);return d(r,".")}},8415:function(t,e,n){"use strict";var r=n(9303),o=n(1340),i=n(4488),a=RangeError;t.exports=function(t){var e=o(i(this)),n="",s=r(t);if(s<0||s==1/0)throw a("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},6091:function(t,e,n){var r=n(6530).PROPER,o=n(7293),i=n(1361);t.exports=function(t){return o((function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||r&&i[t].name!==t}))}},3111:function(t,e,n){var r=n(1702),o=n(4488),i=n(1340),a=n(1361),s=r("".replace),c=RegExp("^["+a+"]+"),u=RegExp("(^|[^"+a+"])["+a+"]+$"),f=function(t){return function(e){var n=i(o(e));return 1&t&&(n=s(n,c,"")),2&t&&(n=s(n,u,"$1")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},6293:function(t,e,n){var r=n(7392),o=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},6532:function(t,e,n){var r=n(6916),o=n(5005),i=n(5112),a=n(8052);t.exports=function(){var t=o("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,s=i("toPrimitive");e&&!e[s]&&a(e,s,(function(t){return r(n,this)}),{arity:1})}},2015:function(t,e,n){var r=n(6293);t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},261:function(t,e,n){var r,o,i,a,s=n(7854),c=n(2104),u=n(9974),f=n(614),l=n(2597),h=n(7293),d=n(490),p=n(206),v=n(317),g=n(8053),m=n(6833),y=n(5268),w=s.setImmediate,A=s.clearImmediate,b=s.process,S=s.Dispatch,E=s.Function,x=s.MessageChannel,R=s.String,T=0,P={},C="onreadystatechange";h((function(){r=s.location}));var I=function(t){if(l(P,t)){var e=P[t];delete P[t],e()}},_=function(t){return function(){I(t)}},D=function(t){I(t.data)},L=function(t){s.postMessage(R(t),r.protocol+"//"+r.host)};w&&A||(w=function(t){g(arguments.length,1);var e=f(t)?t:E(t),n=p(arguments,1);return P[++T]=function(){c(e,void 0,n)},o(T),T},A=function(t){delete P[t]},y?o=function(t){b.nextTick(_(t))}:S&&S.now?o=function(t){S.now(_(t))}:x&&!m?(a=(i=new x).port2,i.port1.onmessage=D,o=u(a.postMessage,a)):s.addEventListener&&f(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!h(L)?(o=L,s.addEventListener("message",D,!1)):o=C in v("script")?function(t){d.appendChild(v("script"))[C]=function(){d.removeChild(this),I(t)}}:function(t){setTimeout(_(t),0)}),t.exports={set:w,clear:A}},863:function(t,e,n){var r=n(1702);t.exports=r(1..valueOf)},1400:function(t,e,n){var r=n(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},4599:function(t,e,n){var r=n(7593),o=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw o("Can't convert number to bigint");return BigInt(e)}},7067:function(t,e,n){var r=n(9303),o=n(7466),i=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw i("Wrong length or index");return n}},5656:function(t,e,n){var r=n(8361),o=n(4488);t.exports=function(t){return r(o(t))}},9303:function(t,e,n){var r=n(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},7466:function(t,e,n){var r=n(9303),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488),o=Object;t.exports=function(t){return o(r(t))}},4590:function(t,e,n){var r=n(3002),o=RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw o("Wrong offset");return n}},3002:function(t,e,n){var r=n(9303),o=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw o("The argument can't be less than 0");return e}},7593:function(t,e,n){var r=n(6916),o=n(111),i=n(2190),a=n(8173),s=n(2140),c=n(5112),u=TypeError,f=c("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,c=a(t,f);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!o(n)||i(n))return n;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},4948:function(t,e,n){var r=n(7593),o=n(2190);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},1694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},1340:function(t,e,n){var r=n(648),o=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9843:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(6916),a=n(9781),s=n(3832),c=n(260),u=n(3331),f=n(5787),l=n(9114),h=n(8880),d=n(5988),p=n(7466),v=n(7067),g=n(4590),m=n(4948),y=n(2597),w=n(648),A=n(111),b=n(2190),S=n(30),E=n(7976),x=n(7674),R=n(8006).f,T=n(7321),P=n(2092).forEach,C=n(6340),I=n(7045),_=n(3070),D=n(1236),L=n(9909),k=n(9587),M=L.get,O=L.set,N=L.enforce,H=_.f,V=D.f,j=Math.round,U=o.RangeError,F=u.ArrayBuffer,B=F.prototype,Y=u.DataView,X=c.NATIVE_ARRAY_BUFFER_VIEWS,G=c.TYPED_ARRAY_TAG,$=c.TypedArray,z=c.TypedArrayPrototype,W=c.aTypedArrayConstructor,q=c.isTypedArray,J="BYTES_PER_ELEMENT",K="Wrong length",Q=function(t,e){W(t);for(var n=0,r=e.length,o=new t(r);r>n;)o[n]=e[n++];return o},Z=function(t,e){I(t,e,{configurable:!0,get:function(){return M(this)[e]}})},tt=function(t){var e;return E(B,t)||"ArrayBuffer"==(e=w(t))||"SharedArrayBuffer"==e},et=function(t,e){return q(t)&&!b(e)&&e in t&&d(+e)&&e>=0},nt=function(t,e){return e=m(e),et(t,e)?l(2,t[e]):V(t,e)},rt=function(t,e,n){return e=m(e),!(et(t,e)&&A(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?H(t,e,n):(t[e]=n.value,t)};a?(X||(D.f=nt,_.f=rt,Z(z,"buffer"),Z(z,"byteOffset"),Z(z,"byteLength"),Z(z,"length")),r({target:"Object",stat:!0,forced:!X},{getOwnPropertyDescriptor:nt,defineProperty:rt}),t.exports=function(t,e,n){var a=t.match(/\d+/)[0]/8,c=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,d=o[c],m=d,y=m&&m.prototype,w={},b=function(t,e){H(t,e,{get:function(){return function(t,e){var n=M(t);return n.view[u](e*a+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=M(t);n&&(r=(r=j(r))<0?0:r>255?255:255&r),o.view[l](e*a+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};X?s&&(m=e((function(t,e,n,r){return f(t,y),k(A(e)?tt(e)?void 0!==r?new d(e,g(n,a),r):void 0!==n?new d(e,g(n,a)):new d(e):q(e)?Q(m,e):i(T,m,e):new d(v(e)),t,m)})),x&&x(m,$),P(R(d),(function(t){t in m||h(m,t,d[t])})),m.prototype=y):(m=e((function(t,e,n,r){f(t,y);var o,s,c,u=0,l=0;if(A(e)){if(!tt(e))return q(e)?Q(m,e):i(T,m,e);o=e,l=g(n,a);var h=e.byteLength;if(void 0===r){if(h%a)throw U(K);if((s=h-l)<0)throw U(K)}else if((s=p(r)*a)+l>h)throw U(K);c=s/a}else c=v(e),o=new F(s=c*a);for(O(t,{buffer:o,byteOffset:l,byteLength:s,length:c,view:new Y(o)});u<c;)b(t,u++)})),x&&x(m,$),y=m.prototype=S(z)),y.constructor!==m&&h(y,"constructor",m),N(y).TypedArrayConstructor=m,G&&h(y,G,c);var E=m!=d;w[c]=m,r({global:!0,constructor:!0,forced:E,sham:!X},w),J in m||h(m,J,a),J in y||h(y,J,a),C(c)}):t.exports=function(){}},3832:function(t,e,n){var r=n(7854),o=n(7293),i=n(7072),a=n(260).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;t.exports=!a||!o((function(){c(1)}))||!o((function(){new c(-1)}))||!i((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||o((function(){return 1!==new c(new s(2),1,void 0).length}))},3074:function(t,e,n){var r=n(7745),o=n(6304);t.exports=function(t,e){return r(o(t),e)}},7321:function(t,e,n){var r=n(9974),o=n(6916),i=n(9483),a=n(7908),s=n(6244),c=n(4121),u=n(1246),f=n(7659),l=n(4067),h=n(260).aTypedArrayConstructor,d=n(4599);t.exports=function(t){var e,n,p,v,g,m,y,w,A=i(this),b=a(t),S=arguments.length,E=S>1?arguments[1]:void 0,x=void 0!==E,R=u(b);if(R&&!f(R))for(w=(y=c(b,R)).next,b=[];!(m=o(w,y)).done;)b.push(m.value);for(x&&S>2&&(E=r(E,arguments[2])),n=s(b),p=new(h(A))(n),v=l(p),e=0;n>e;e++)g=x?E(b[e],e):b[e],p[e]=v?d(g):+g;return p}},6304:function(t,e,n){var r=n(260),o=n(6707),i=r.aTypedArrayConstructor,a=r.getTypedArrayConstructor;t.exports=function(t){return i(o(t,a(t)))}},9711:function(t,e,n){var r=n(1702),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},5143:function(t,e,n){var r=n(7293),o=n(5112),i=n(9781),a=n(1913),s=o("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),a&&!t.toJSON||!e.size&&(a||!i)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},3307:function(t,e,n){var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),o=n(7293);t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},4811:function(t,e,n){var r=n(7854),o=n(614),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},6800:function(t,e,n){var r=n(857),o=n(2597),i=n(6061),a=n(3070).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},6061:function(t,e,n){var r=n(5112);e.f=r},5112:function(t,e,n){var r=n(7854),o=n(2309),i=n(2597),a=n(9711),s=n(6293),c=n(3307),u=r.Symbol,f=o("wks"),l=c?u.for||u:u&&u.withoutSetter||a;t.exports=function(t){return i(f,t)||(f[t]=s&&i(u,t)?u[t]:l("Symbol."+t)),f[t]}},1361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9575:function(t,e,n){"use strict";var r=n(2109),o=n(1470),i=n(7293),a=n(3331),s=n(9670),c=n(1400),u=n(7466),f=n(6707),l=a.ArrayBuffer,h=a.DataView,d=h.prototype,p=o(l.prototype.slice),v=o(d.getUint8),g=o(d.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(p&&void 0===e)return p(s(this),t);for(var n=s(this).byteLength,r=c(t,n),o=c(void 0===e?n:e,n),i=new(f(this,l))(u(o-r)),a=new h(this),d=new h(i),m=0;r<o;)g(d,m++,v(a,r++));return i}})},2222:function(t,e,n){"use strict";var r=n(2109),o=n(7293),i=n(3157),a=n(111),s=n(7908),c=n(6244),u=n(7207),f=n(6135),l=n(5417),h=n(1194),d=n(5112),p=n(7392),v=d("isConcatSpreadable"),g=p>=51||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),m=function(t){if(!a(t))return!1;var e=t[v];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,arity:1,forced:!g||!h("concat")},{concat:function(t){var e,n,r,o,i,a=s(this),h=l(a,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(m(i=-1===e?a:arguments[e]))for(o=c(i),u(d+o),n=0;n<o;n++,d++)n in i&&f(h,d,i[n]);else u(d+1),f(h,d++,i);return h.length=d,h}})},3290:function(t,e,n){var r=n(2109),o=n(1285),i=n(1223);r({target:"Array",proto:!0},{fill:o}),i("fill")},7327:function(t,e,n){"use strict";var r=n(2109),o=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},1038:function(t,e,n){var r=n(2109),o=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(t){Array.from(t)}))},{from:o})},6992:function(t,e,n){"use strict";var r=n(5656),o=n(1223),i=n(7497),a=n(9909),s=n(3070).f,c=n(1656),u=n(6178),f=n(1913),l=n(9781),h="Array Iterator",d=a.set,p=a.getterFor(h);t.exports=c(Array,"Array",(function(t,e){d(this,{type:h,target:r(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,u(void 0,!0)):u("keys"==n?r:"values"==n?e[r]:[r,e[r]],!1)}),"values");var v=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!f&&l&&"values"!==v.name)try{s(v,"name",{value:"values"})}catch(t){}},9600:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(8361),a=n(5656),s=n(9341),c=o([].join);r({target:"Array",proto:!0,forced:i!=Object||!s("join",",")},{join:function(t){return c(a(this),void 0===t?",":t)}})},1249:function(t,e,n){"use strict";var r=n(2109),o=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},7042:function(t,e,n){"use strict";var r=n(2109),o=n(3157),i=n(4411),a=n(111),s=n(1400),c=n(6244),u=n(5656),f=n(6135),l=n(5112),h=n(1194),d=n(206),p=h("slice"),v=l("species"),g=Array,m=Math.max;r({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var n,r,l,h=u(this),p=c(h),y=s(t,p),w=s(void 0===e?p:e,p);if(o(h)&&(n=h.constructor,(i(n)&&(n===g||o(n.prototype))||a(n)&&null===(n=n[v]))&&(n=void 0),n===g||void 0===n))return d(h,y,w);for(r=new(void 0===n?g:n)(m(w-y,0)),l=0;y<w;y++,l++)y in h&&f(r,l,h[y]);return r.length=l,r}})},561:function(t,e,n){"use strict";var r=n(2109),o=n(7908),i=n(1400),a=n(9303),s=n(6244),c=n(3658),u=n(7207),f=n(5417),l=n(6135),h=n(5117),d=n(1194)("splice"),p=Math.max,v=Math.min;r({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var n,r,d,g,m,y,w=o(this),A=s(w),b=i(t,A),S=arguments.length;for(0===S?n=r=0:1===S?(n=0,r=A-b):(n=S-2,r=v(p(a(e),0),A-b)),u(A+n-r),d=f(w,r),g=0;g<r;g++)(m=b+g)in w&&l(d,g,w[m]);if(d.length=r,n<r){for(g=b;g<A-r;g++)y=g+n,(m=g+r)in w?w[y]=w[m]:h(w,y);for(g=A;g>A-r+n;g--)h(w,g-1)}else if(n>r)for(g=A-r;g>b;g--)y=g+n-1,(m=g+r-1)in w?w[y]=w[m]:h(w,y);for(g=0;g<n;g++)w[g+b]=arguments[g+2];return c(w,A-r+n),d}})},8309:function(t,e,n){var r=n(9781),o=n(6530).EXISTS,i=n(1702),a=n(7045),s=Function.prototype,c=i(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=i(u.exec);r&&!o&&a(s,"name",{configurable:!0,get:function(){try{return f(u,c(this))[1]}catch(t){return""}}})},8862:function(t,e,n){var r=n(2109),o=n(5005),i=n(2104),a=n(6916),s=n(1702),c=n(7293),u=n(614),f=n(2190),l=n(206),h=n(8044),d=n(6293),p=String,v=o("JSON","stringify"),g=s(/./.exec),m=s("".charAt),y=s("".charCodeAt),w=s("".replace),A=s(1..toString),b=/[\uD800-\uDFFF]/g,S=/^[\uD800-\uDBFF]$/,E=/^[\uDC00-\uDFFF]$/,x=!d||c((function(){var t=o("Symbol")();return"[null]"!=v([t])||"{}"!=v({a:t})||"{}"!=v(Object(t))})),R=c((function(){return'"\\udf06\\ud834"'!==v("\udf06\ud834")||'"\\udead"'!==v("\udead")})),T=function(t,e){var n=l(arguments),r=h(e);if(u(r)||void 0!==t&&!f(t))return n[1]=function(t,e){if(u(r)&&(e=a(r,this,p(t),e)),!f(e))return e},i(v,null,n)},P=function(t,e,n){var r=m(n,e-1),o=m(n,e+1);return g(S,t)&&!g(E,o)||g(E,t)&&!g(S,r)?"\\u"+A(y(t,0),16):t};v&&r({target:"JSON",stat:!0,arity:3,forced:x||R},{stringify:function(t,e,n){var r=l(arguments),o=i(x?T:v,null,r);return R&&"string"==typeof o?w(o,b,P):o}})},3706:function(t,e,n){var r=n(7854);n(8003)(r.JSON,"JSON",!0)},2703:function(t,e,n){n(8003)(Math,"Math",!0)},9653:function(t,e,n){"use strict";var r=n(2109),o=n(1913),i=n(9781),a=n(7854),s=n(857),c=n(1702),u=n(4705),f=n(2597),l=n(9587),h=n(7976),d=n(2190),p=n(7593),v=n(7293),g=n(8006).f,m=n(1236).f,y=n(3070).f,w=n(863),A=n(3111).trim,b="Number",S=a[b],E=s[b],x=S.prototype,R=a.TypeError,T=c("".slice),P=c("".charCodeAt),C=function(t){var e=p(t,"number");return"bigint"==typeof e?e:I(e)},I=function(t){var e,n,r,o,i,a,s,c,u=p(t,"number");if(d(u))throw R("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=A(u),43===(e=P(u,0))||45===e){if(88===(n=P(u,2))||120===n)return NaN}else if(48===e){switch(P(u,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=T(u,2)).length,s=0;s<a;s++)if((c=P(i,s))<48||c>o)return NaN;return parseInt(i,r)}return+u},_=u(b,!S(" 0o1")||!S("0b1")||S("+0x1")),D=function(t){return h(x,t)&&v((function(){w(t)}))},L=function(t){var e=arguments.length<1?0:S(C(t));return D(this)?l(Object(e),this,L):e};L.prototype=x,_&&!o&&(x.constructor=L),r({global:!0,constructor:!0,wrap:!0,forced:_},{Number:L});var k=function(t,e){for(var n,r=i?g(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;r.length>o;o++)f(e,n=r[o])&&!f(t,n)&&y(t,n,m(e,n))};o&&E&&k(s[b],E),(_||o)&&k(s[b],S)},3299:function(t,e,n){n(2109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})},5192:function(t,e,n){n(2109)({target:"Number",stat:!0},{isFinite:n(7023)})},6977:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(9303),a=n(863),s=n(8415),c=n(7293),u=RangeError,f=String,l=Math.floor,h=o(s),d=o("".slice),p=o(1..toFixed),v=function(t,e,n){return 0===e?n:e%2==1?v(t,e-1,n*t):v(t*t,e/2,n)},g=function(t,e,n){for(var r=-1,o=n;++r<6;)o+=e*t[r],t[r]=o%1e7,o=l(o/1e7)},m=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=l(r/e),r=r%e*1e7},y=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=f(t[e]);n=""===n?r:n+h("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!c((function(){p({})}))},{toFixed:function(t){var e,n,r,o,s=a(this),c=i(t),l=[0,0,0,0,0,0],p="",w="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return f(s);if(s<0&&(p="-",s=-s),s>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(s*v(2,69,1))-69)<0?s*v(2,-e,1):s/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(g(l,0,n),r=c;r>=7;)g(l,1e7,0),r-=7;for(g(l,v(10,r,1),0),r=e-1;r>=23;)m(l,1<<23),r-=23;m(l,1<<r),g(l,1,1),m(l,2),w=y(l)}else g(l,0,n),g(l,1<<-e,0),w=y(l)+h("0",c);return w=c>0?p+((o=w.length)<=c?"0."+h("0",c-o)+w:d(w,0,o-c)+"."+d(w,o-c)):p+w}})},5003:function(t,e,n){var r=n(2109),o=n(7293),i=n(5656),a=n(1236).f,s=n(9781);r({target:"Object",stat:!0,forced:!s||o((function(){a(1)})),sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},9660:function(t,e,n){var r=n(2109),o=n(6293),i=n(7293),a=n(5181),s=n(7908);r({target:"Object",stat:!0,forced:!o||i((function(){a.f(1)}))},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(s(t)):[]}})},489:function(t,e,n){var r=n(2109),o=n(7293),i=n(7908),a=n(9518),s=n(8544);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!s},{getPrototypeOf:function(t){return a(i(t))}})},7941:function(t,e,n){var r=n(2109),o=n(7908),i=n(1956);r({target:"Object",stat:!0,forced:n(7293)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},8304:function(t,e,n){n(2109)({target:"Object",stat:!0},{setPrototypeOf:n(7674)})},1539:function(t,e,n){var r=n(1694),o=n(8052),i=n(288);r||o(Object.prototype,"toString",i,{unsafe:!0})},2479:function(t,e,n){var r=n(2109),o=n(4699).values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},821:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(9662),a=n(8523),s=n(2534),c=n(408);r({target:"Promise",stat:!0,forced:n(612)},{all:function(t){var e=this,n=a.f(e),r=n.resolve,u=n.reject,f=s((function(){var n=i(e.resolve),a=[],s=0,f=1;c(t,(function(t){var i=s++,c=!1;f++,o(n,e,t).then((function(t){c||(c=!0,a[i]=t,--f||r(a))}),u)})),--f||r(a)}));return f.error&&u(f.value),n.promise}})},4164:function(t,e,n){"use strict";var r=n(2109),o=n(1913),i=n(3702).CONSTRUCTOR,a=n(2492),s=n(5005),c=n(614),u=n(8052),f=a&&a.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&c(a)){var l=s("Promise").prototype.catch;f.catch!==l&&u(f,"catch",l,{unsafe:!0})}},3401:function(t,e,n){"use strict";var r,o,i,a=n(2109),s=n(1913),c=n(5268),u=n(7854),f=n(6916),l=n(8052),h=n(7674),d=n(8003),p=n(6340),v=n(9662),g=n(614),m=n(111),y=n(5787),w=n(6707),A=n(261).set,b=n(5948),S=n(842),E=n(2534),x=n(8572),R=n(9909),T=n(2492),P=n(3702),C=n(8523),I="Promise",_=P.CONSTRUCTOR,D=P.REJECTION_EVENT,L=P.SUBCLASSING,k=R.getterFor(I),M=R.set,O=T&&T.prototype,N=T,H=O,V=u.TypeError,j=u.document,U=u.process,F=C.f,B=F,Y=!!(j&&j.createEvent&&u.dispatchEvent),X="unhandledrejection",G=function(t){var e;return!(!m(t)||!g(e=t.then))&&e},$=function(t,e){var n,r,o,i=e.value,a=1==e.state,s=a?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(a||(2===e.rejection&&K(e),e.rejection=1),!0===s?n=i:(l&&l.enter(),n=s(i),l&&(l.exit(),o=!0)),n===t.promise?u(V("Promise-chain cycle")):(r=G(n))?f(r,n,c,u):c(n)):u(i)}catch(t){l&&!o&&l.exit(),u(t)}},z=function(t,e){t.notified||(t.notified=!0,b((function(){for(var n,r=t.reactions;n=r.get();)$(n,t);t.notified=!1,e&&!t.rejection&&q(t)})))},W=function(t,e,n){var r,o;Y?((r=j.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!D&&(o=u["on"+t])?o(r):t===X&&S("Unhandled promise rejection",n)},q=function(t){f(A,u,(function(){var e,n=t.facade,r=t.value;if(J(t)&&(e=E((function(){c?U.emit("unhandledRejection",r,n):W(X,n,r)})),t.rejection=c||J(t)?2:1,e.error))throw e.value}))},J=function(t){return 1!==t.rejection&&!t.parent},K=function(t){f(A,u,(function(){var e=t.facade;c?U.emit("rejectionHandled",e):W("rejectionhandled",e,t.value)}))},Q=function(t,e,n){return function(r){t(e,r,n)}},Z=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,z(t,!0))},tt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw V("Promise can't be resolved itself");var r=G(e);r?b((function(){var n={done:!1};try{f(r,e,Q(tt,n,t),Q(Z,n,t))}catch(e){Z(n,e,t)}})):(t.value=e,t.state=1,z(t,!1))}catch(e){Z({done:!1},e,t)}}};if(_&&(H=(N=function(t){y(this,H),v(t),f(r,this);var e=k(this);try{t(Q(tt,e),Q(Z,e))}catch(t){Z(e,t)}}).prototype,(r=function(t){M(this,{type:I,done:!1,notified:!1,parent:!1,reactions:new x,rejection:!1,state:0,value:void 0})}).prototype=l(H,"then",(function(t,e){var n=k(this),r=F(w(this,N));return n.parent=!0,r.ok=!g(t)||t,r.fail=g(e)&&e,r.domain=c?U.domain:void 0,0==n.state?n.reactions.add(r):b((function(){$(r,n)})),r.promise})),o=function(){var t=new r,e=k(t);this.promise=t,this.resolve=Q(tt,e),this.reject=Q(Z,e)},C.f=F=function(t){return t===N||undefined===t?new o(t):B(t)},!s&&g(T)&&O!==Object.prototype)){i=O.then,L||l(O,"then",(function(t,e){var n=this;return new N((function(t,e){f(i,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete O.constructor}catch(t){}h&&h(O,H)}a({global:!0,constructor:!0,wrap:!0,forced:_},{Promise:N}),d(N,I,!1,!0),p(I)},7727:function(t,e,n){"use strict";var r=n(2109),o=n(1913),i=n(2492),a=n(7293),s=n(5005),c=n(614),u=n(6707),f=n(9478),l=n(8052),h=i&&i.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){h.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),n=c(t);return this.then(n?function(n){return f(e,t()).then((function(){return n}))}:t,n?function(n){return f(e,t()).then((function(){throw n}))}:t)}}),!o&&c(i)){var d=s("Promise").prototype.finally;h.finally!==d&&l(h,"finally",d,{unsafe:!0})}},8674:function(t,e,n){n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(9662),a=n(8523),s=n(2534),c=n(408);r({target:"Promise",stat:!0,forced:n(612)},{race:function(t){var e=this,n=a.f(e),r=n.reject,u=s((function(){var a=i(e.resolve);c(t,(function(t){o(a,e,t).then(n.resolve,r)}))}));return u.error&&r(u.value),n.promise}})},683:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(8523);r({target:"Promise",stat:!0,forced:n(3702).CONSTRUCTOR},{reject:function(t){var e=i.f(this);return o(e.reject,void 0,t),e.promise}})},6294:function(t,e,n){"use strict";var r=n(2109),o=n(5005),i=n(1913),a=n(2492),s=n(3702).CONSTRUCTOR,c=n(9478),u=o("Promise"),f=i&&!s;r({target:"Promise",stat:!0,forced:i||s},{resolve:function(t){return c(f&&this===u?a:this,t)}})},4916:function(t,e,n){"use strict";var r=n(2109),o=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},2087:function(t,e,n){var r=n(7854),o=n(9781),i=n(7045),a=n(7066),s=n(7293),c=r.RegExp,u=c.prototype;o&&s((function(){var t=!0;try{c(".","d")}catch(e){t=!1}var e={},n="",r=t?"dgimsy":"gimsy",o=function(t,r){Object.defineProperty(e,t,{get:function(){return n+=r,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in t&&(i.hasIndices="d"),i)o(a,i[a]);return Object.getOwnPropertyDescriptor(u,"flags").get.call(e)!==r||n!==r}))&&i(u,"flags",{configurable:!0,get:a})},9714:function(t,e,n){"use strict";var r=n(6530).PROPER,o=n(8052),i=n(9670),a=n(1340),s=n(7293),c=n(4706),u="toString",f=RegExp.prototype[u],l=s((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),h=r&&f.name!=u;(l||h)&&o(RegExp.prototype,u,(function(){var t=i(this);return"/"+a(t.source)+"/"+a(c(t))}),{unsafe:!0})},8783:function(t,e,n){"use strict";var r=n(8710).charAt,o=n(1340),i=n(9909),a=n(1656),s=n(6178),c="String Iterator",u=i.set,f=i.getterFor(c);a(String,"String",(function(t){u(this,{type:c,string:o(t),index:0})}),(function(){var t,e=f(this),n=e.string,o=e.index;return o>=n.length?s(void 0,!0):(t=r(n,o),e.index+=t.length,s(t,!1))}))},4723:function(t,e,n){"use strict";var r=n(6916),o=n(7007),i=n(9670),a=n(8554),s=n(7466),c=n(1340),u=n(4488),f=n(8173),l=n(1530),h=n(7651);o("match",(function(t,e,n){return[function(e){var n=u(this),o=a(e)?void 0:f(e,t);return o?r(o,e,n):new RegExp(e)[t](c(n))},function(t){var r=i(this),o=c(t),a=n(e,r,o);if(a.done)return a.value;if(!r.global)return h(r,o);var u=r.unicode;r.lastIndex=0;for(var f,d=[],p=0;null!==(f=h(r,o));){var v=c(f[0]);d[p]=v,""===v&&(r.lastIndex=l(o,s(r.lastIndex),u)),p++}return 0===p?null:d}]}))},5306:function(t,e,n){"use strict";var r=n(2104),o=n(6916),i=n(1702),a=n(7007),s=n(7293),c=n(9670),u=n(614),f=n(8554),l=n(9303),h=n(7466),d=n(1340),p=n(4488),v=n(1530),g=n(8173),m=n(647),y=n(7651),w=n(5112)("replace"),A=Math.max,b=Math.min,S=i([].concat),E=i([].push),x=i("".indexOf),R=i("".slice),T="$0"==="a".replace(/./,"$0"),P=!!/./[w]&&""===/./[w]("a","$0");a("replace",(function(t,e,n){var i=P?"$":"$0";return[function(t,n){var r=p(this),i=f(t)?void 0:g(t,w);return i?o(i,t,r,n):o(e,d(r),t,n)},function(t,o){var a=c(this),s=d(t);if("string"==typeof o&&-1===x(o,i)&&-1===x(o,"$<")){var f=n(e,a,s,o);if(f.done)return f.value}var p=u(o);p||(o=d(o));var g=a.global;if(g){var w=a.unicode;a.lastIndex=0}for(var T=[];;){var P=y(a,s);if(null===P)break;if(E(T,P),!g)break;""===d(P[0])&&(a.lastIndex=v(s,h(a.lastIndex),w))}for(var C,I="",_=0,D=0;D<T.length;D++){for(var L=d((P=T[D])[0]),k=A(b(l(P.index),s.length),0),M=[],O=1;O<P.length;O++)E(M,void 0===(C=P[O])?C:String(C));var N=P.groups;if(p){var H=S([L],M,k,s);void 0!==N&&E(H,N);var V=d(r(o,void 0,H))}else V=m(L,s,k,M,N,o);k>=_&&(I+=R(s,_,k)+V,_=k+L.length)}return I+R(s,_)}]}),!!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!T||P)},3123:function(t,e,n){"use strict";var r=n(2104),o=n(6916),i=n(1702),a=n(7007),s=n(9670),c=n(8554),u=n(7850),f=n(4488),l=n(6707),h=n(1530),d=n(7466),p=n(1340),v=n(8173),g=n(1589),m=n(7651),y=n(2261),w=n(2999),A=n(7293),b=w.UNSUPPORTED_Y,S=4294967295,E=Math.min,x=[].push,R=i(/./.exec),T=i(x),P=i("".slice),C=!A((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=p(f(this)),a=void 0===n?S:n>>>0;if(0===a)return[];if(void 0===t)return[i];if(!u(t))return o(e,i,t,a);for(var s,c,l,h=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,m=new RegExp(t.source,d+"g");(s=o(y,m,i))&&!((c=m.lastIndex)>v&&(T(h,P(i,v,s.index)),s.length>1&&s.index<i.length&&r(x,h,g(s,1)),l=s[0].length,v=c,h.length>=a));)m.lastIndex===s.index&&m.lastIndex++;return v===i.length?!l&&R(m,"")||T(h,""):T(h,P(i,v)),h.length>a?g(h,0,a):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:o(e,this,t,n)}:e,[function(e,n){var r=f(this),a=c(e)?void 0:v(e,t);return a?o(a,e,r,n):o(i,p(r),e,n)},function(t,r){var o=s(this),a=p(t),c=n(i,o,a,r,i!==e);if(c.done)return c.value;var u=l(o,RegExp),f=o.unicode,v=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(b?"g":"y"),g=new u(b?"^(?:"+o.source+")":o,v),y=void 0===r?S:r>>>0;if(0===y)return[];if(0===a.length)return null===m(g,a)?[a]:[];for(var w=0,A=0,x=[];A<a.length;){g.lastIndex=b?0:A;var R,C=m(g,b?P(a,A):a);if(null===C||(R=E(d(g.lastIndex+(b?A:0)),a.length))===w)A=h(a,A,f);else{if(T(x,P(a,w,A)),x.length===y)return x;for(var I=1;I<=C.length-1;I++)if(T(x,C[I]),x.length===y)return x;A=w=R}}return T(x,P(a,w)),x}]}),!C,b)},3210:function(t,e,n){"use strict";var r=n(2109),o=n(3111).trim;r({target:"String",proto:!0,forced:n(6091)("trim")},{trim:function(){return o(this)}})},2443:function(t,e,n){n(6800)("asyncIterator")},4032:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(6916),a=n(1702),s=n(1913),c=n(9781),u=n(6293),f=n(7293),l=n(2597),h=n(7976),d=n(9670),p=n(5656),v=n(4948),g=n(1340),m=n(9114),y=n(30),w=n(1956),A=n(8006),b=n(1156),S=n(5181),E=n(1236),x=n(3070),R=n(6048),T=n(5296),P=n(8052),C=n(7045),I=n(2309),_=n(6200),D=n(3501),L=n(9711),k=n(5112),M=n(6061),O=n(6800),N=n(6532),H=n(8003),V=n(9909),j=n(2092).forEach,U=_("hidden"),F="Symbol",B="prototype",Y=V.set,X=V.getterFor(F),G=Object[B],$=o.Symbol,z=$&&$[B],W=o.TypeError,q=o.QObject,J=E.f,K=x.f,Q=b.f,Z=T.f,tt=a([].push),et=I("symbols"),nt=I("op-symbols"),rt=I("wks"),ot=!q||!q[B]||!q[B].findChild,it=c&&f((function(){return 7!=y(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=J(G,e);r&&delete G[e],K(t,e,n),r&&t!==G&&K(G,e,r)}:K,at=function(t,e){var n=et[t]=y(z);return Y(n,{type:F,tag:t,description:e}),c||(n.description=e),n},st=function(t,e,n){t===G&&st(nt,e,n),d(t);var r=v(e);return d(n),l(et,r)?(n.enumerable?(l(t,U)&&t[U][r]&&(t[U][r]=!1),n=y(n,{enumerable:m(0,!1)})):(l(t,U)||K(t,U,m(1,{})),t[U][r]=!0),it(t,r,n)):K(t,r,n)},ct=function(t,e){d(t);var n=p(e),r=w(n).concat(ht(n));return j(r,(function(e){c&&!i(ut,n,e)||st(t,e,n[e])})),t},ut=function(t){var e=v(t),n=i(Z,this,e);return!(this===G&&l(et,e)&&!l(nt,e))&&(!(n||!l(this,e)||!l(et,e)||l(this,U)&&this[U][e])||n)},ft=function(t,e){var n=p(t),r=v(e);if(n!==G||!l(et,r)||l(nt,r)){var o=J(n,r);return!o||!l(et,r)||l(n,U)&&n[U][r]||(o.enumerable=!0),o}},lt=function(t){var e=Q(p(t)),n=[];return j(e,(function(t){l(et,t)||l(D,t)||tt(n,t)})),n},ht=function(t){var e=t===G,n=Q(e?nt:p(t)),r=[];return j(n,(function(t){!l(et,t)||e&&!l(G,t)||tt(r,et[t])})),r};u||($=function(){if(h(z,this))throw W("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,e=L(t),n=function(t){this===G&&i(n,nt,t),l(this,U)&&l(this[U],e)&&(this[U][e]=!1),it(this,e,m(1,t))};return c&&ot&&it(G,e,{configurable:!0,set:n}),at(e,t)},P(z=$[B],"toString",(function(){return X(this).tag})),P($,"withoutSetter",(function(t){return at(L(t),t)})),T.f=ut,x.f=st,R.f=ct,E.f=ft,A.f=b.f=lt,S.f=ht,M.f=function(t){return at(k(t),t)},c&&(C(z,"description",{configurable:!0,get:function(){return X(this).description}}),s||P(G,"propertyIsEnumerable",ut,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:$}),j(w(rt),(function(t){O(t)})),r({target:F,stat:!0,forced:!u},{useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(t,e){return void 0===e?y(t):ct(y(t),e)},defineProperty:st,defineProperties:ct,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:lt}),N(),H($,F),D[U]=!0},1817:function(t,e,n){"use strict";var r=n(2109),o=n(9781),i=n(7854),a=n(1702),s=n(2597),c=n(614),u=n(7976),f=n(1340),l=n(7045),h=n(9920),d=i.Symbol,p=d&&d.prototype;if(o&&c(d)&&(!("description"in p)||void 0!==d().description)){var v={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:f(arguments[0]),e=u(p,this)?new d(t):void 0===t?d():d(t);return""===t&&(v[e]=!0),e};h(g,d),g.prototype=p,p.constructor=g;var m="Symbol(test)"==String(d("test")),y=a(p.valueOf),w=a(p.toString),A=/^Symbol\((.*)\)[^)]+$/,b=a("".replace),S=a("".slice);l(p,"description",{configurable:!0,get:function(){var t=y(this);if(s(v,t))return"";var e=w(t),n=m?S(e,7,-1):b(e,A,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},763:function(t,e,n){var r=n(2109),o=n(5005),i=n(2597),a=n(1340),s=n(2309),c=n(2015),u=s("string-to-symbol-registry"),f=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=a(t);if(i(u,e))return u[e];var n=o("Symbol")(e);return u[e]=n,f[n]=e,n}})},2165:function(t,e,n){n(6800)("iterator")},2526:function(t,e,n){n(4032),n(763),n(6620),n(8862),n(9660)},6620:function(t,e,n){var r=n(2109),o=n(2597),i=n(2190),a=n(6330),s=n(2309),c=n(2015),u=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!i(t))throw TypeError(a(t)+" is not a symbol");if(o(u,t))return u[t]}})},3680:function(t,e,n){var r=n(5005),o=n(6800),i=n(8003);o("toStringTag"),i(r("Symbol"),"Symbol")},2990:function(t,e,n){"use strict";var r=n(1702),o=n(260),i=r(n(1048)),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",(function(t,e){return i(a(this),t,e,arguments.length>2?arguments[2]:void 0)}))},8927:function(t,e,n){"use strict";var r=n(260),o=n(2092).every,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},3105:function(t,e,n){"use strict";var r=n(260),o=n(1285),i=n(4599),a=n(648),s=n(6916),c=n(1702),u=n(7293),f=r.aTypedArray,l=r.exportTypedArrayMethod,h=c("".slice);l("fill",(function(t){var e=arguments.length;f(this);var n="Big"===h(a(this),0,3)?i(t):+t;return s(o,this,n,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),u((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})))},5035:function(t,e,n){"use strict";var r=n(260),o=n(2092).filter,i=n(3074),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(t){var e=o(a(this),t,arguments.length>1?arguments[1]:void 0);return i(this,e)}))},7174:function(t,e,n){"use strict";var r=n(260),o=n(2092).findIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},4345:function(t,e,n){"use strict";var r=n(260),o=n(2092).find,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},2846:function(t,e,n){"use strict";var r=n(260),o=n(2092).forEach,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},4731:function(t,e,n){"use strict";var r=n(260),o=n(1318).includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},7209:function(t,e,n){"use strict";var r=n(260),o=n(1318).indexOf,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},6319:function(t,e,n){"use strict";var r=n(7854),o=n(7293),i=n(1702),a=n(260),s=n(6992),c=n(5112)("iterator"),u=r.Uint8Array,f=i(s.values),l=i(s.keys),h=i(s.entries),d=a.aTypedArray,p=a.exportTypedArrayMethod,v=u&&u.prototype,g=!o((function(){v[c].call([1])})),m=!!v&&v.values&&v[c]===v.values&&"values"===v.values.name,y=function(){return f(d(this))};p("entries",(function(){return h(d(this))}),g),p("keys",(function(){return l(d(this))}),g),p("values",y,g||!m,{name:"values"}),p(c,y,g||!m,{name:"values"})},8867:function(t,e,n){"use strict";var r=n(260),o=n(1702),i=r.aTypedArray,a=r.exportTypedArrayMethod,s=o([].join);a("join",(function(t){return s(i(this),t)}))},7789:function(t,e,n){"use strict";var r=n(260),o=n(2104),i=n(6583),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return o(i,a(this),e>1?[t,arguments[1]]:[t])}))},3739:function(t,e,n){"use strict";var r=n(260),o=n(2092).map,i=n(6304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(t){return o(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(i(t))(e)}))}))},4483:function(t,e,n){"use strict";var r=n(260),o=n(3671).right,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return o(i(this),t,e,e>1?arguments[1]:void 0)}))},9368:function(t,e,n){"use strict";var r=n(260),o=n(3671).left,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return o(i(this),t,e,e>1?arguments[1]:void 0)}))},2056:function(t,e,n){"use strict";var r=n(260),o=r.aTypedArray,i=r.exportTypedArrayMethod,a=Math.floor;i("reverse",(function(){for(var t,e=this,n=o(e).length,r=a(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e}))},3462:function(t,e,n){"use strict";var r=n(7854),o=n(6916),i=n(260),a=n(6244),s=n(4590),c=n(7908),u=n(7293),f=r.RangeError,l=r.Int8Array,h=l&&l.prototype,d=h&&h.set,p=i.aTypedArray,v=i.exportTypedArrayMethod,g=!u((function(){var t=new Uint8ClampedArray(2);return o(d,t,{length:1,0:3},1),3!==t[1]})),m=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new l(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));v("set",(function(t){p(this);var e=s(arguments.length>1?arguments[1]:void 0,1),n=c(t);if(g)return o(d,this,n,e);var r=this.length,i=a(n),u=0;if(i+e>r)throw f("Wrong length");for(;u<i;)this[e+u]=n[u++]}),!g||m)},678:function(t,e,n){"use strict";var r=n(260),o=n(6304),i=n(7293),a=n(206),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(t,e){for(var n=a(s(this),t,e),r=o(this),i=0,c=n.length,u=new r(c);c>i;)u[i]=n[i++];return u}),i((function(){new Int8Array(1).slice()})))},7462:function(t,e,n){"use strict";var r=n(260),o=n(2092).some,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},3824:function(t,e,n){"use strict";var r=n(7854),o=n(1470),i=n(7293),a=n(9662),s=n(4362),c=n(260),u=n(8886),f=n(256),l=n(7392),h=n(8008),d=c.aTypedArray,p=c.exportTypedArrayMethod,v=r.Uint16Array,g=v&&o(v.prototype.sort),m=!(!g||i((function(){g(new v(2),null)}))&&i((function(){g(new v(2),{})}))),y=!!g&&!i((function(){if(l)return l<74;if(u)return u<67;if(f)return!0;if(h)return h<602;var t,e,n=new v(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(g(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));p("sort",(function(t){return void 0!==t&&a(t),y?g(this,t):s(d(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!y||m)},5021:function(t,e,n){"use strict";var r=n(260),o=n(7466),i=n(1400),a=n(6304),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=s(this),r=n.length,c=i(t,r);return new(a(n))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,o((void 0===e?r:i(e,r))-c))}))},2974:function(t,e,n){"use strict";var r=n(7854),o=n(2104),i=n(260),a=n(7293),s=n(206),c=r.Int8Array,u=i.aTypedArray,f=i.exportTypedArrayMethod,l=[].toLocaleString,h=!!c&&a((function(){l.call(new c(1))}));f("toLocaleString",(function(){return o(l,h?s(u(this)):u(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!a((function(){c.prototype.toLocaleString.call([1,2])})))},5016:function(t,e,n){"use strict";var r=n(260).exportTypedArrayMethod,o=n(7293),i=n(7854),a=n(1702),s=i.Uint8Array,c=s&&s.prototype||{},u=[].toString,f=a([].join);o((function(){u.call({})}))&&(u=function(){return f(this)});var l=c.toString!=u;r("toString",u,l)},2472:function(t,e,n){n(9843)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},4747:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),a=n(8533),s=n(8880),c=function(t){if(t&&t.forEach!==a)try{s(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in o)o[u]&&c(r[u]&&r[u].prototype);c(i)},3948:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),a=n(6992),s=n(8880),c=n(5112),u=c("iterator"),f=c("toStringTag"),l=a.values,h=function(t,e){if(t){if(t[u]!==l)try{s(t,u,l)}catch(e){t[u]=l}if(t[f]||s(t,f,e),o[e])for(var n in a)if(t[n]!==a[n])try{s(t,n,a[n])}catch(e){t[n]=a[n]}}};for(var d in o)h(r[d]&&r[d].prototype,d);h(i,"DOMTokenList")},5556:function(t,e,n){"use strict";n(6992);var r=n(2109),o=n(7854),i=n(6916),a=n(1702),s=n(9781),c=n(5143),u=n(8052),f=n(7045),l=n(9190),h=n(8003),d=n(3061),p=n(9909),v=n(5787),g=n(614),m=n(2597),y=n(9974),w=n(648),A=n(9670),b=n(111),S=n(1340),E=n(30),x=n(9114),R=n(4121),T=n(1246),P=n(8053),C=n(5112),I=n(4362),_=C("iterator"),D="URLSearchParams",L=D+"Iterator",k=p.set,M=p.getterFor(D),O=p.getterFor(L),N=Object.getOwnPropertyDescriptor,H=function(t){if(!s)return o[t];var e=N(o,t);return e&&e.value},V=H("fetch"),j=H("Request"),U=H("Headers"),F=j&&j.prototype,B=U&&U.prototype,Y=o.RegExp,X=o.TypeError,G=o.decodeURIComponent,$=o.encodeURIComponent,z=a("".charAt),W=a([].join),q=a([].push),J=a("".replace),K=a([].shift),Q=a([].splice),Z=a("".split),tt=a("".slice),et=/\+/g,nt=Array(4),rt=function(t){return nt[t-1]||(nt[t-1]=Y("((?:%[\\da-f]{2}){"+t+"})","gi"))},ot=function(t){try{return G(t)}catch(e){return t}},it=function(t){var e=J(t,et," "),n=4;try{return G(e)}catch(t){for(;n;)e=J(e,rt(n--),ot);return e}},at=/[!'()~]|%20/g,st={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ct=function(t){return st[t]},ut=function(t){return J($(t),at,ct)},ft=d((function(t,e){k(this,{type:L,iterator:R(M(t).entries),kind:e})}),"Iterator",(function(){var t=O(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n}),!0),lt=function(t){this.entries=[],this.url=null,void 0!==t&&(b(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===z(t,0)?tt(t,1):t:S(t)))};lt.prototype={type:D,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,o,a,s,c,u=T(t);if(u)for(n=(e=R(t,u)).next;!(r=i(n,e)).done;){if(a=(o=R(A(r.value))).next,(s=i(a,o)).done||(c=i(a,o)).done||!i(a,o).done)throw X("Expected sequence with length 2");q(this.entries,{key:S(s.value),value:S(c.value)})}else for(var f in t)m(t,f)&&q(this.entries,{key:f,value:S(t[f])})},parseQuery:function(t){if(t)for(var e,n,r=Z(t,"&"),o=0;o<r.length;)(e=r[o++]).length&&(n=Z(e,"="),q(this.entries,{key:it(K(n)),value:it(W(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],r=0;r<e.length;)t=e[r++],q(n,ut(t.key)+"="+ut(t.value));return W(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ht=function(){v(this,dt);var t=k(this,new lt(arguments.length>0?arguments[0]:void 0));s||(this.length=t.entries.length)},dt=ht.prototype;if(l(dt,{append:function(t,e){P(arguments.length,2);var n=M(this);q(n.entries,{key:S(t),value:S(e)}),s||this.length++,n.updateURL()},delete:function(t){P(arguments.length,1);for(var e=M(this),n=e.entries,r=S(t),o=0;o<n.length;)n[o].key===r?Q(n,o,1):o++;s||(this.length=n.length),e.updateURL()},get:function(t){P(arguments.length,1);for(var e=M(this).entries,n=S(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){P(arguments.length,1);for(var e=M(this).entries,n=S(t),r=[],o=0;o<e.length;o++)e[o].key===n&&q(r,e[o].value);return r},has:function(t){P(arguments.length,1);for(var e=M(this).entries,n=S(t),r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){P(arguments.length,1);for(var n,r=M(this),o=r.entries,i=!1,a=S(t),c=S(e),u=0;u<o.length;u++)(n=o[u]).key===a&&(i?Q(o,u--,1):(i=!0,n.value=c));i||q(o,{key:a,value:c}),s||(this.length=o.length),r.updateURL()},sort:function(){var t=M(this);I(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=M(this).entries,r=y(t,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((e=n[o++]).value,e.key,this)},keys:function(){return new ft(this,"keys")},values:function(){return new ft(this,"values")},entries:function(){return new ft(this,"entries")}},{enumerable:!0}),u(dt,_,dt.entries,{name:"entries"}),u(dt,"toString",(function(){return M(this).serialize()}),{enumerable:!0}),s&&f(dt,"size",{get:function(){return M(this).entries.length},configurable:!0,enumerable:!0}),h(ht,D),r({global:!0,constructor:!0,forced:!c},{URLSearchParams:ht}),!c&&g(U)){var pt=a(B.has),vt=a(B.set),gt=function(t){if(b(t)){var e,n=t.body;if(w(n)===D)return e=t.headers?new U(t.headers):new U,pt(e,"content-type")||vt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),E(t,{body:x(0,S(n)),headers:x(0,e)})}return t};if(g(V)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return V(t,arguments.length>1?gt(arguments[1]):{})}}),g(j)){var mt=function(t){return v(this,F),new j(t,arguments.length>1?gt(arguments[1]):{})};F.constructor=mt,mt.prototype=F,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:mt})}}t.exports={URLSearchParams:ht,getState:M}},1637:function(t,e,n){n(5556)},8789:function(t,e,n){"use strict";n(8783);var r,o=n(2109),i=n(9781),a=n(5143),s=n(7854),c=n(9974),u=n(1702),f=n(8052),l=n(7045),h=n(5787),d=n(2597),p=n(1574),v=n(8457),g=n(1589),m=n(8710).codeAt,y=n(3197),w=n(1340),A=n(8003),b=n(8053),S=n(5556),E=n(9909),x=E.set,R=E.getterFor("URL"),T=S.URLSearchParams,P=S.getState,C=s.URL,I=s.TypeError,_=s.parseInt,D=Math.floor,L=Math.pow,k=u("".charAt),M=u(/./.exec),O=u([].join),N=u(1..toString),H=u([].pop),V=u([].push),j=u("".replace),U=u([].shift),F=u("".split),B=u("".slice),Y=u("".toLowerCase),X=u([].unshift),G="Invalid scheme",$="Invalid host",z="Invalid port",W=/[a-z]/i,q=/[\d+-.a-z]/i,J=/\d/,K=/^0x/i,Q=/^[0-7]+$/,Z=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,nt=/[\0\t\n\r #/:<>?@[\\\]^|]/,rt=/^[\u0000-\u0020]+/,ot=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,it=/[\t\n\r]/g,at=function(t){var e,n,r,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)X(e,t%256),t=D(t/256);return O(e,".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e}(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),r===n?(e+=n?":":"::",o=!0):(e+=N(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},st={},ct=p({},st,{" ":1,'"':1,"<":1,">":1,"`":1}),ut=p({},ct,{"#":1,"?":1,"{":1,"}":1}),ft=p({},ut,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),lt=function(t,e){var n=m(t,0);return n>32&&n<127&&!d(e,t)?t:encodeURIComponent(t)},ht={ftp:21,file:null,http:80,https:443,ws:80,wss:443},dt=function(t,e){var n;return 2==t.length&&M(W,k(t,0))&&(":"==(n=k(t,1))||!e&&"|"==n)},pt=function(t){var e;return t.length>1&&dt(B(t,0,2))&&(2==t.length||"/"===(e=k(t,2))||"\\"===e||"?"===e||"#"===e)},vt=function(t){return"."===t||"%2e"===Y(t)},gt={},mt={},yt={},wt={},At={},bt={},St={},Et={},xt={},Rt={},Tt={},Pt={},Ct={},It={},_t={},Dt={},Lt={},kt={},Mt={},Ot={},Nt={},Ht=function(t,e,n){var r,o,i,a=w(t);if(e){if(o=this.parse(a))throw I(o);this.searchParams=null}else{if(void 0!==n&&(r=new Ht(n,!0)),o=this.parse(a,null,r))throw I(o);(i=P(new T)).bindURL(this),this.searchParams=i}};Ht.prototype={type:"URL",parse:function(t,e,n){var o,i,a,s,c,u=this,f=e||gt,l=0,h="",p=!1,m=!1,y=!1;for(t=w(t),e||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,t=j(t,rt,""),t=j(t,ot,"$1")),t=j(t,it,""),o=v(t);l<=o.length;){switch(i=o[l],f){case gt:if(!i||!M(W,i)){if(e)return G;f=yt;continue}h+=Y(i),f=mt;break;case mt:if(i&&(M(q,i)||"+"==i||"-"==i||"."==i))h+=Y(i);else{if(":"!=i){if(e)return G;h="",f=yt,l=0;continue}if(e&&(u.isSpecial()!=d(ht,h)||"file"==h&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=h,e)return void(u.isSpecial()&&ht[u.scheme]==u.port&&(u.port=null));h="","file"==u.scheme?f=It:u.isSpecial()&&n&&n.scheme==u.scheme?f=wt:u.isSpecial()?f=Et:"/"==o[l+1]?(f=At,l++):(u.cannotBeABaseURL=!0,V(u.path,""),f=Mt)}break;case yt:if(!n||n.cannotBeABaseURL&&"#"!=i)return G;if(n.cannotBeABaseURL&&"#"==i){u.scheme=n.scheme,u.path=g(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,f=Nt;break}f="file"==n.scheme?It:bt;continue;case wt:if("/"!=i||"/"!=o[l+1]){f=bt;continue}f=xt,l++;break;case At:if("/"==i){f=Rt;break}f=kt;continue;case bt:if(u.scheme=n.scheme,i==r)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query=n.query;else if("/"==i||"\\"==i&&u.isSpecial())f=St;else if("?"==i)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query="",f=Ot;else{if("#"!=i){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.path.length--,f=kt;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query=n.query,u.fragment="",f=Nt}break;case St:if(!u.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,f=kt;continue}f=Rt}else f=xt;break;case Et:if(f=xt,"/"!=i||"/"!=k(h,l+1))continue;l++;break;case xt:if("/"!=i&&"\\"!=i){f=Rt;continue}break;case Rt:if("@"==i){p&&(h="%40"+h),p=!0,a=v(h);for(var A=0;A<a.length;A++){var b=a[A];if(":"!=b||y){var S=lt(b,ft);y?u.password+=S:u.username+=S}else y=!0}h=""}else if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(p&&""==h)return"Invalid authority";l-=v(h).length+1,h="",f=Tt}else h+=i;break;case Tt:case Pt:if(e&&"file"==u.scheme){f=Dt;continue}if(":"!=i||m){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(u.isSpecial()&&""==h)return $;if(e&&""==h&&(u.includesCredentials()||null!==u.port))return;if(s=u.parseHost(h))return s;if(h="",f=Lt,e)return;continue}"["==i?m=!0:"]"==i&&(m=!1),h+=i}else{if(""==h)return $;if(s=u.parseHost(h))return s;if(h="",f=Ct,e==Pt)return}break;case Ct:if(!M(J,i)){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()||e){if(""!=h){var E=_(h,10);if(E>65535)return z;u.port=u.isSpecial()&&E===ht[u.scheme]?null:E,h=""}if(e)return;f=Lt;continue}return z}h+=i;break;case It:if(u.scheme="file","/"==i||"\\"==i)f=_t;else{if(!n||"file"!=n.scheme){f=kt;continue}if(i==r)u.host=n.host,u.path=g(n.path),u.query=n.query;else if("?"==i)u.host=n.host,u.path=g(n.path),u.query="",f=Ot;else{if("#"!=i){pt(O(g(o,l),""))||(u.host=n.host,u.path=g(n.path),u.shortenPath()),f=kt;continue}u.host=n.host,u.path=g(n.path),u.query=n.query,u.fragment="",f=Nt}}break;case _t:if("/"==i||"\\"==i){f=Dt;break}n&&"file"==n.scheme&&!pt(O(g(o,l),""))&&(dt(n.path[0],!0)?V(u.path,n.path[0]):u.host=n.host),f=kt;continue;case Dt:if(i==r||"/"==i||"\\"==i||"?"==i||"#"==i){if(!e&&dt(h))f=kt;else if(""==h){if(u.host="",e)return;f=Lt}else{if(s=u.parseHost(h))return s;if("localhost"==u.host&&(u.host=""),e)return;h="",f=Lt}continue}h+=i;break;case Lt:if(u.isSpecial()){if(f=kt,"/"!=i&&"\\"!=i)continue}else if(e||"?"!=i)if(e||"#"!=i){if(i!=r&&(f=kt,"/"!=i))continue}else u.fragment="",f=Nt;else u.query="",f=Ot;break;case kt:if(i==r||"/"==i||"\\"==i&&u.isSpecial()||!e&&("?"==i||"#"==i)){if(".."===(c=Y(c=h))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"==i||"\\"==i&&u.isSpecial()||V(u.path,"")):vt(h)?"/"==i||"\\"==i&&u.isSpecial()||V(u.path,""):("file"==u.scheme&&!u.path.length&&dt(h)&&(u.host&&(u.host=""),h=k(h,0)+":"),V(u.path,h)),h="","file"==u.scheme&&(i==r||"?"==i||"#"==i))for(;u.path.length>1&&""===u.path[0];)U(u.path);"?"==i?(u.query="",f=Ot):"#"==i&&(u.fragment="",f=Nt)}else h+=lt(i,ut);break;case Mt:"?"==i?(u.query="",f=Ot):"#"==i?(u.fragment="",f=Nt):i!=r&&(u.path[0]+=lt(i,st));break;case Ot:e||"#"!=i?i!=r&&("'"==i&&u.isSpecial()?u.query+="%27":u.query+="#"==i?"%23":lt(i,st)):(u.fragment="",f=Nt);break;case Nt:i!=r&&(u.fragment+=lt(i,ct))}l++}},parseHost:function(t){var e,n,r;if("["==k(t,0)){if("]"!=k(t,t.length-1))return $;if(e=function(t){var e,n,r,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,f=null,l=0,h=function(){return k(t,l)};if(":"==h()){if(":"!=k(t,1))return;l+=2,f=++u}for(;h();){if(8==u)return;if(":"!=h()){for(e=n=0;n<4&&M(tt,h());)e=16*e+_(h(),16),l++,n++;if("."==h()){if(0==n)return;if(l-=n,u>6)return;for(r=0;h();){if(o=null,r>0){if(!("."==h()&&r<4))return;l++}if(!M(J,h()))return;for(;M(J,h());){if(i=_(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;l++}c[u]=256*c[u]+o,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;c[u++]=e}else{if(null!==f)return;l++,f=++u}}if(null!==f)for(a=u-f,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[f+a-1],c[f+--a]=s;else if(8!=u)return;return c}(B(t,1,-1)),!e)return $;this.host=e}else if(this.isSpecial()){if(t=y(t),M(et,t))return $;if(e=function(t){var e,n,r,o,i,a,s,c=F(t,".");if(c.length&&""==c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(o=c[r]))return t;if(i=10,o.length>1&&"0"==k(o,0)&&(i=M(K,o)?16:8,o=B(o,8==i?1:2)),""===o)a=0;else{if(!M(10==i?Z:8==i?Q:tt,o))return t;a=_(o,i)}V(n,a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=L(256,5-e))return null}else if(a>255)return null;for(s=H(n),r=0;r<n.length;r++)s+=n[r]*L(256,3-r);return s}(t),null===e)return $;this.host=e}else{if(M(nt,t))return $;for(e="",n=v(t),r=0;r<n.length;r++)e+=lt(n[r],st);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return d(ht,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&dt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==o?(u+="//",t.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=at(o),null!==i&&(u+=":"+i)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+O(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(t){var e=this.parse(t);if(e)throw I(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Vt(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+at(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(w(t)+":",gt)},getUsername:function(){return this.username},setUsername:function(t){var e=v(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=lt(e[n],ft)}},getPassword:function(){return this.password},setPassword:function(t){var e=v(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=lt(e[n],ft)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?at(t):at(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Tt)},getHostname:function(){var t=this.host;return null===t?"":at(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Pt)},getPort:function(){var t=this.port;return null===t?"":w(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=w(t))?this.port=null:this.parse(t,Ct))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+O(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Lt))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=w(t))?this.query=null:("?"==k(t,0)&&(t=B(t,1)),this.query="",this.parse(t,Ot)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=w(t))?("#"==k(t,0)&&(t=B(t,1)),this.fragment="",this.parse(t,Nt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Vt=function(t){var e=h(this,jt),n=b(arguments.length,1)>1?arguments[1]:void 0,r=x(e,new Ht(t,!1,n));i||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},jt=Vt.prototype,Ut=function(t,e){return{get:function(){return R(this)[t]()},set:e&&function(t){return R(this)[e](t)},configurable:!0,enumerable:!0}};if(i&&(l(jt,"href",Ut("serialize","setHref")),l(jt,"origin",Ut("getOrigin")),l(jt,"protocol",Ut("getProtocol","setProtocol")),l(jt,"username",Ut("getUsername","setUsername")),l(jt,"password",Ut("getPassword","setPassword")),l(jt,"host",Ut("getHost","setHost")),l(jt,"hostname",Ut("getHostname","setHostname")),l(jt,"port",Ut("getPort","setPort")),l(jt,"pathname",Ut("getPathname","setPathname")),l(jt,"search",Ut("getSearch","setSearch")),l(jt,"searchParams",Ut("getSearchParams")),l(jt,"hash",Ut("getHash","setHash"))),f(jt,"toJSON",(function(){return R(this).serialize()}),{enumerable:!0}),f(jt,"toString",(function(){return R(this).serialize()}),{enumerable:!0}),C){var Ft=C.createObjectURL,Bt=C.revokeObjectURL;Ft&&f(Vt,"createObjectURL",c(Ft,C)),Bt&&f(Vt,"revokeObjectURL",c(Bt,C))}A(Vt,"URL"),o({global:!0,constructor:!0,forced:!a,sham:!i},{URL:Vt})},285:function(t,e,n){n(8789)},6425:function(t,e,n){var r=n(3118),o=n(9435),i=4294967295;function a(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=i,this.__views__=[]}a.prototype=r(o.prototype),a.prototype.constructor=a,t.exports=a},7548:function(t,e,n){var r=n(3118),o=n(9435);function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}i.prototype=r(o.prototype),i.prototype.constructor=i,t.exports=i},3118:function(t,e,n){var r=n(3218),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},9435:function(t){t.exports=function(){}},278:function(t){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},169:function(t,e,n){var r=n(6425),o=n(7548),i=n(278);t.exports=function(t){if(t instanceof r)return t.clone();var e=new o(t.__wrapped__,t.__chain__);return e.__actions__=i(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},1263:function(t,e,n){var r=n(8111);t.exports=function(t){var e=r(t);return e.__chain__=!0,e}},1469:function(t){var e=Array.isArray;t.exports=e},3218:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},8111:function(t,e,n){var r=n(6425),o=n(7548),i=n(9435),a=n(1469),s=n(7005),c=n(169),u=Object.prototype.hasOwnProperty;function f(t){if(s(t)&&!a(t)&&!(t instanceof r)){if(t instanceof o)return t;if(u.call(t,"__wrapped__"))return c(t)}return new o(t)}f.prototype=i.prototype,f.prototype.constructor=f,t.exports=f},5778:function(e){"use strict";e.exports=t},2047:function(t){"use strict";t.exports=e}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return n[t](i,i.exports,o),i.exports}o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return function(){"use strict";function t(e,n){return t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t(e,n)}function e(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,t(e,n)}o.r(i),o.d(i,{CreateAnnotAddon:function(){return Qa},CreateStampService:function(){return qi}});o(2222);function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}var r=o(5778);o(1539),o(9714),o(4916),o(4723),o(3210),o(5306),o(1249),o(3123);var a=Math.pow(2,24);function s(t){var e;return t<16777216?e=255:(e=t/a&255,t&=16777215),{r:t>>16&255,g:t>>8&255,b:255&t,a:e}}var c=r.stateHandler,u=c.IStateHandler,f=c.HandStateHandler,l=r.vendors.Hammer,h=c.StateHandlerConsts.STATE_HANDLER_CREATE_TEXT,d=r.ViewerEvents,p=r.shared,v=p.getClientX,g=p.getClientY,m=function(t){function r(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-note",n}e(r,t),r.getStateName=function(){return h};var o=r.prototype;return o.pageHandler=function(t){var e=this;this.pageRender=t;var r=t.$handler;r.addClass(this.cursorStyle);var o=r[0];(this.hammer=new l.Manager(o,{recognizers:[[l.Tap]]})).on("tap",(function(r){var i=o.getBoundingClientRect(),a=r.srcEvent,s=v(a),c=g(a),u=[s-i.left,c-i.top],l=u[0],h=u[1];return t.getPDFPage().then((function(r){var o=r.reverseDevicePoint([l,h],t.scale,t.getRotation()),i=o[0],a=o[1],s=e.pdfViewer.getDefaultAnnotConfig()("text"),c=n({flags:28,type:"text",rect:{left:i,right:i+20,top:a,bottom:a-20},subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Note")},s);r.addAnnot(c).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;t.pdfViewer.eventEmitter.emit(d.addAnnotSuccess,r.annot),t.pdfViewer.getStateHandlerManager().switchTo(f.getStateName()),t.annotsRender.activeAnnot(n.getId()),setTimeout((function(){t.annotsRender.doubleTapAnnot(n.getId())}),100)}))}))}))},o.getNoteRightPanelData=function(){var t=localStorage.getItem("NOTE-STORAGE-KEY");return t?JSON.parse(t):t||{}},o.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle)},o.out=function(){this.destroyPageHandler()},r}(u),y=(o(6992),o(8674),o(8783),o(3948),r.stateHandler),w=y.IStateHandler,A=(y.HandStateHandler,r.vendors.Hammer),b=r.shared.DebouncePromiseQueue,S=y.StateHandlerUtils,E=S.getDevicePagePoint,x=S.deltaDeviceRect,R=S.appendSelectMark,T=S.removeSelectMark,P=S.removeTextSelectedRangeMark,C=S.showTextSelectedRangeMark,I=r.ViewerEvents,_=function(t){function n(e){var n;return(n=t.call(this,e)||this).cursorStyle="",n}e(n,t);var r=n.prototype;return r.getDefaultProps=function(t){return this.pdfViewer.getDefaultAnnotConfig()(t)},r.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r,o,i=n[0],a=this.hammer=new A.Manager(i,{recognizers:[[A.Pan,{direction:A.DIRECTION_ALL}],[A.Tap]]}),s=-1,c=-1;a.on("tap",(function(n){e.pageRender.pdfViewer.activeElement();var r=e.pageRender.pdfViewer,o=n.srcEvent,i=t.getPDFPointFromClientPoint(o.clientX,o.clientY,!0),a=i[0],s=i[1],c=r.getEventEmitter();t.getPDFPage().then((function(e){var n=t.scale,r=t.rotate,o=e.getDeviceMatrix();return o.scale(n,n),o.rotate(r),e.getAnnotObjectNumAtDevicePoint([a,s],1,[o.a,o.b,o.c,o.d,o.e,o.f])})).then((function(e){var r=t.getAnnotRender(e);if(r){var o=r.component;c.emit(I.tapAnnotation,r,n),o.tapAnnot(n)}}))})),a.on("panstart",(function(n){if(!1!==e.panStart(n,e)){s=-1,c=-1;var a=E(i,n);r=[a.x,a.y],e.hideSelectMark(),o=new b,e.shouldDrawRange=!1,t.getTextContinueRectAtDevicePoints([a.x,a.y],[a.x+5,a.y+5],-1,-1).then((function(t){e.shouldDrawRange=!(t||[])[0]}))}})),a.on("panmove",(function(t){!1!==e.panMove(t,e)&&o&&o.push((function(){var n,o=e.pageRender,i=[r[0]+t.deltaX,r[1]+t.deltaY];if(e.shouldDrawRange){C(o,r,i);var a=x(r,t.deltaX,t.deltaY);n=o.getTextRectsAtRect(a)}else n=e.getTextRect(r,i,s,c);n.then((function(t){var e;return(e=t[0])&&"string"==typeof e.text&&(s=e.start,c=e.end),Promise.all([o.getPDFPage(),t])})).then((function(t){var n=t[0],r=t[1];e.pdfViewer.eventEmitter.emit("collab-creating-op",{type:"textMarkup",rects:r,page:n.getIndex()});var i=o.transformRectArray(n,r);e.showSelectMark(i)}))}))})),a.on("panend",(function(n){if(!1!==e.panEnd(n,e)&&o&&o){o.end(),o=null;var i,a=[r[0]+n.deltaX,r[1]+n.deltaY];if(e.shouldDrawRange){e.shouldDrawRange=!1,P(t,t.$handler);var u=x(r,n.deltaX,n.deltaY);i=t.getTextRectsAtRect(u)}else i=e.getTextRect(r,a,s,c);i.then((function(n){var r;return(r=n[0])&&"string"==typeof r.text&&(s=r.start,c=r.end),e.hideSelectMark(),Promise.all([t.getPDFPage(),n])})).then((function(t){var n=t[0],r=t[1];return r.length<1?Promise.resolve():e.addAnnot(n,r).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;return e.afterAddAnnot(r),e.pageRender.annotsRender.activeAnnot(n.getId()),t})).then((function(t){if(e.pdfViewer.config.showCommentList){var n=t[t.length-2];e.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}})).catch((function(t){}))}))}}))},r.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.hideSelectMark(),this.pdfViewer.eventEmitter.emit("collab-creating-op",{cancle:1,page:this.pageRender.index})},r.out=function(){this.destroyPageHandler()},r.panStart=function(){},r.panMove=function(){},r.panEnd=function(){},r.showSelectMark=function(t){R(this.pageRender.$handler,t)},r.hideSelectMark=function(){T(this.pageRender.$handler)},r.getTextRect=function(t,e,n,r){return this.pageRender.getTextContinueRectAtDevicePoints(t,e,n,r)},r.addAnnot=function(t,e){},r.afterAddAnnot=function(t){this.pdfViewer.eventEmitter.emit(I.addAnnotSuccess,t.annot)},n}(w),D=r.stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_HIGHLIGHT,L=function(t){function r(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-highlight",n}return e(r,t),r.getStateName=function(){return D},r.prototype.addAnnot=function(t,e){return t.addAnnot(n({flags:4,type:"highlight",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Highlight"),rect:{left:0,right:0,top:0,bottom:0},coords:e},this.getDefaultProps("highlight")))},r}(_),k=r.stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_STRIKE_OUT,M=function(t){function r(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-strikeout",n}return e(r,t),r.getStateName=function(){return k},r.prototype.addAnnot=function(t,e){return t.addAnnot(n({flags:4,type:"strikeout",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Strikeout"),rect:{left:0,right:0,top:0,bottom:0},coords:e},this.getDefaultProps("strikeout")))},r}(_),O=r.stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_UNDERLINE,N=function(t){function r(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-underline",n}return e(r,t),r.getStateName=function(){return O},r.prototype.addAnnot=function(t,e){return t.addAnnot(n({flags:4,type:"underline",rect:{left:0,right:0,top:0,bottom:0},coords:e,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Underline")},this.getDefaultProps("underline")))},r}(_),H=r.stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_SQUIGGLY,V=function(t){function r(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-s-underline",n}return e(r,t),r.getStateName=function(){return H},r.prototype.addAnnot=function(t,e){return t.addAnnot(n({flags:4,type:"squiggly",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Squiggly"),rect:{left:0,right:0,top:0,bottom:0},coords:e},this.getDefaultProps("squiggly")))},r}(_),j=r.stateHandler,U=j.StateHandlerConsts.STATE_HANDLER_CREATE_REPLACE,F=j.StateHandlerUtils.getCaretRectAndRotate,B=function(t){function n(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-replace-text",n}return e(n,t),n.getStateName=function(){return U},n.prototype.addAnnot=function(t,e){var n=this.pdfViewer.getDefaultAnnotConfig()("replace"),r=F(e),o=r.rect,i=r.rotate;return t.addAnnotGroup([{flags:4,type:"strikeout",rect:{left:0,right:0,top:0,bottom:0},coords:e,noPopup:!0,typeAlias:"Replace",intent:"StrikeOutTextEdit",color:n.color||255,opacity:n.opacity||1,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Replace")},{type:"caret",flags:4,rect:o,typeAlias:"Replace",intent:"Replace",rotation:i,color:n.color||255,opacity:n.opacity||1,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Replace")}],1)},n}(_);function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var r=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(e,void 0!==n&&n<r?n:r)}return t(e,n)}var $=r.stateHandler,z=r.Matrix,W=$.IStateHandler,q=($.HandStateHandler,r.vendors.Hammer),J=r.shared,K=J.DebouncePromiseQueue,Q=J.getClientX,Z=J.getClientY,tt=$.StateHandlerUtils,et=tt.getDevicePagePoint,nt=(tt.deltaDeviceRect,tt.appendSelectMark),rt=tt.removeSelectMark,ot=tt.getCaretRectAndRotate,it=r.ViewerEvents,at=$.StateHandlerConsts.STATE_HANDLER_CREATE_CARET,st=function(t){function n(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-insert-text",n}e(n,t),n.getStateName=function(){return at};var r=n.prototype;return r.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r,o,i=n[0],a=this.hammer=new q.Manager(i,{recognizers:[[q.Pan,{direction:q.DIRECTION_ALL}],[q.Tap]]}),s=-1,c=-1;a.on("panstart",(function(t){if(!1!==e.panStart(t,e)){s=-1,c=-1;var n=et(i,t);r=[n.x,n.y],e.hideSelectMark(),o=new K}})),a.on("panmove",(function(t){!1!==e.panMove(t,e)&&o.push((function(){var n=e.pageRender,o=[r[0]+t.deltaX,r[1]+t.deltaY];return e.getTextRect(r,o,s,c).then((function(t){var e;return(e=t[0])&&"string"==typeof e.text&&(s=e.start,c=e.end),Promise.all([n.getPDFPage(),t])})).then((function(t){var e=t[0],r=t[1];return n.transformRectArray(e,r)})).then((function(t){e.showSelectMark(t)}))}))})),a.on("panend",(function(n){if(!1!==e.panEnd(n,e)){o.end(),o=null;var i=[r[0]+n.deltaX,r[1]+n.deltaY];return e.getTextRect(r,i,s,c).then((function(n){var r;return(r=n[0])&&"string"==typeof r.text&&(s=r.start,c=r.end),e.hideSelectMark(),Promise.all([t.getPDFPage(),n])})).then((function(t){var n=t[0],r=t[1];if(r.length<1)return Promise.resolve();var o=ot(r),i=o.rect,a=o.rotate;return n.addAnnot({type:"caret",flags:4,rect:i,rotation:a,subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Insert")}).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;e.pdfViewer.eventEmitter.emit(it.addAnnotSuccess,r.annot),e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.config.showCommentList&&r.showReplyDialog()}))}))}})),a.on("tap",(function(n){if(!1!==e.tap(n,e)){var r=i.getBoundingClientRect(),o=n.srcEvent,a=Q(o),s=Z(o),c=[a-r.left,s-r.top];return t.getPDFPage().then((function(n){var r=n.reverseDevicePoint([c[0],c[1]],t.scale,t.getRotation());return n.getCharInfoAtPoint(r).then((function(t){if(t){var r=t.top-t.bottom,o=t.bottom+r/2,i=(t.right+t.left)/2,a=new z;a.e=-i,a.f=-o;var s=(t.bottom+t.top)/2,c=s-r,u=t.right-3*r/8,f=t.right+3*r/8,l=a.transformRect(u,s,f,c),h=t.rotation*Math.PI/2;return a.reset(),a.rotate(-h),l=a.transformRect.apply(a,G(X,l)),a.reset(),a.e=i,a.f=o,l=a.transformRect.apply(a,G(X,l)),n.addAnnot({type:"caret",rect:{left:l[0],bottom:l[1],right:l[2],top:l[3]},rotation:h}).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;e.pdfViewer.eventEmitter.emit(it.addAnnotSuccess,r.annot),e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.config.showCommentList&&r.showReplyDialog()}))}}))}))}}))},r.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.hideSelectMark()},r.out=function(){this.destroyPageHandler()},r.panStart=function(){},r.panMove=function(){},r.panEnd=function(){},r.tap=function(){},r.showSelectMark=function(t){nt(this.pageRender.$handler,t)},r.hideSelectMark=function(){rt(this.pageRender.$handler)},r.getTextRect=function(t,e,n,r){return this.pageRender.getTextContinueRectAtDevicePoints(t,e,n,r)},n}(W),ct=r.stateHandler.IStateHandler,ut=r.vendors,ft=(ut.Hammer,ut.jQuery,function(t){function n(e){return t.call(this,e)||this}e(n,t),n.textboxWidth=function(){return 100},n.textboxHeight=function(){return 20},n.calloutKneeLength=function(){return 20},n.getStateName=function(){return"createFreetext"};var r=n.prototype;return r.pageHandler=function(t){},n.edit=function(t,e){var n=t.annotsRender.getAnnotRender(e[0].objectNumber).component;n.active(!0),setTimeout((function(){n.showReplyDialog("comment")}),0)},r.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler")},r.out=function(){this.destroyPageHandler()},n}(ct));o(1038),o(7042);function lt(t,e){t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?function(t,e){var n=t instanceof HTMLInputElement?t.value.length:t.textLength;ht(t,{startOffset:n,endOffset:n},e)}(t,e):"inherit"!==t.contentEditable&&dt(t,e)}function ht(t,e,n){t.focus(n),setTimeout((function(){t.focus(n),t.setSelectionRange(e.startOffset,e.endOffset)})),t.setSelectionRange(e.startOffset,e.endOffset)}function dt(t,e,n){var r,o;t.focus(e),setTimeout((function(){return t.focus(e)}));var i=document.createRange();if(i.selectNodeContents(t),n){var a=t.childNodes[n.startNodeIndex||0];a&&i.setStart(a,Math.min(n.startOffset,(null===(r=a.textContent)||void 0===r?void 0:r.length)||0));var s=t.childNodes[n.endNodeIndex||0];s&&i.setStart(s,Math.min(n.endOffset,(null===(o=a.textContent)||void 0===o?void 0:o.length)||0))}i.collapse(!0);var c=window.getSelection();c&&(c.removeAllRanges(),c.addRange(i))}var pt=r.stateHandler,vt=r.ViewerEvents,gt=(pt.IStateHandler,pt.StateHandlerUtils.getDevicePagePoint),mt=r.vendors.Hammer,yt=r.shared,wt=yt.extendOptions,At=yt.convertFromNumberToHex,bt=pt.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER,St=function(t){function n(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-typewriter",n}e(n,t),n.getStateName=function(){return bt};var r=n.prototype;return r.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass("fv__create-stamp-state-handler "+this.cursorStyle);var r=n[0];(this.hammer=new mt.Manager(r,{recognizers:[[mt.Tap]]})).on("tap",(function(n){var o=gt(r,n);var i=function(n){var i=100*t.scale*4/3,a=20*t.scale*2/3,s={left:o.x,right:o.x+i,top:o.y,bottom:o.y+2*a},c=e.input=document.createElement("div");c.contentEditable=!0;var u=e.pdfViewer.getDefaultAnnotConfig(),f=wt({defaultAppearance:{textColor:255,textSize:12,font:"Arial"}},"function"==typeof u?u("freetext","FreeTextTypewriter"):{}),l=f.defaultAppearance.textSize*t.scale*4/3,h=function(t){var e=r.getBoundingClientRect();return{maxWidth:e.right-t.left,maxHeight:e.height-t.top}}(s),d=h.maxHeight,p=h.maxWidth;c.style.cssText="\n                    position: absolute;\n                    left: "+s.left+"px;\n                    top: "+s.top+"px;\n                    min-width: "+l+"px;\n                    min-height: "+l+"px;\n                    font-size: "+l+"px;\n                    line-height: 1;\n                    font-family: FoxitPDFSDKForWeb;\n                    color: "+At(16777215&f.defaultAppearance.textColor)+";\n                    outline:1px solid #5aa;\n                    outline-offset:1px;\n                    max-width: "+p+"px;\n                    max-height: "+d+"px;\n                    overflow: hidden;\n                    white-space: pre-line;\n                    word-break: break-word;\n                ",c.innerText=f.contents||"",r.appendChild(c),lt(c),c.onmousedown=c.ontouchstart=c.onpointerdown=function(t){t.stopPropagation()};c.onkeydown=function(t){39!==t.keyCode&&37!==t.keyCode||t.stopPropagation()},c.onkeyup=function(t){},c.onblur=function(){if(0===c.innerText.trim().length)r.removeChild(c),e.input=null;else{var o=c.getBoundingClientRect();s.right=s.left+o.width,s.bottom=s.top+o.height;var i=n.reverseDeviceRect(s,t.scale,t.getRotation());c.innerText=c.innerText.replace(/\n{2}/gi,"\n");var a={type:"freetext",intent:"FreeTextTypewriter",rect:i,contents:c.innerText.trim(),rotation:((360-90*n.getRotation()-t.getRotation())%360+360)%360,flags:4,borderInfo:{width:0},subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Typewriter")};n.addAnnot(a).then((function(e){r.removeChild(c);var n=e[0],o=t.annotsRender.getAnnotRender(n.getId()).component;o.$textInput.get(0).blur(),t.pdfViewer.eventEmitter.emit(vt.addAnnotSuccess,o.annot)}))}}};t.page?i(t.page):t.getPDFPage().then(i)}))},r.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler "+this.cursorStyle),this.input&&this.input.blur()},r.out=function(){t.prototype.out.call(this)},n}(ft),Et=r.creation.CreateFreeTextCalloutService,xt=r.stateHandler,Rt=r.ViewerEvents,Tt=(r.CalloutShape,xt.IStateHandler,xt.StateHandlerUtils.getDevicePagePoint),Pt=r.vendors,Ct=Pt.Hammer,It=(Pt.jQuery,r.shared),_t=It.getClientX,Dt=It.getClientY,Lt=(It.CalloutPointsReviser,xt.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_CALLOUT),kt=function(t){function r(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-typewriter",n}e(r,t),r.getStateName=function(){return Lt};var o=r.prototype;return o.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass("fv__create-callout-state-handler "+this.cursorStyle),n.on("mousemove",(function(t){if(e.startAdding){var n=r.getBoundingClientRect(),o=_t(t)-n.left,i=Dt(t)-n.top;e.service.update({x:o,y:i})}}));var r=n[0];(this.hammer=new Ct.Manager(r,{recognizers:[[Ct.Pan,{direction:Ct.DIRECTION_ALL}],[Ct.Tap]]})).on("tap",(function(n){if(e.startAdding)e.service.complete().then((function(n){return e.pdfViewer.getStateHandlerManager().switchTo(),ft.edit(t,n)})).catch((function(t){}));else{e.service||(e.service=new Et,e.service.prepare(t));var o=Tt(r,n);e.service.start(o),e.service.update(o),e.startAdding=1}})).on("panstart",(function(n){e.service||(e.service=new Et,e.service.prepare(t));var o=Tt(r,n);e.service.start(o)})).on("panend",(function(n){e.service.complete().then((function(n){return e.pdfViewer.getStateHandlerManager().switchTo(),ft.edit(t,n)})).catch((function(t){}))})).on("panmove",(function(n){var o=r.getBoundingClientRect(),i=n.srcEvent,a=_t(i)-o.left,s=Dt(i)-o.top;e.service.update({x:a,y:s}),e.service.annotInfo&&e.pdfViewer.eventEmitter.emit("collab-creating-op",{type:"freetext",page:t.index,points:e.service.annotInfo.calloutLinePoints,innerRect:e.service.annotInfo.innerRect,rect:e.service.annotInfo.rect})}))},o.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-callout-state-handler "+this.cursorStyle),this.service&&this.service.destroy(),this.pdfViewer.eventEmitter.emit("collab-creating-op",{cancle:1,page:this.pageRender.index})},o.out=function(){this.destroyPageHandler()},o.addAnnot=function(t){var e=this,r=this.pageRender,o=r.pdfViewer;return r.getPDFPage().then((function(i){var a,s=e.pdfViewer.getDefaultAnnotConfig()("freetext","FreeTextTextbox"),c=n({},((a={type:"freetext",intent:"FreeTextCallout",subject:"FreeTextCallout","interior-color":16777215,rotation:((360-90*i.getRotation()-r.getRotation())%360+360)%360,flags:4}).subject=e.pdfViewer.i18n.t("viewer_:annotSubjects.Callout"),a),t,s);return o.getStateHandlerManager().switchTo(),i.addAnnot(c)})).then((function(t){var e=t[0],n=r.annotsRender.getAnnotRender(e.getId()).component;return o.eventEmitter.emit(Rt.addAnnotSuccess,n.annot),ft.edit(r,t)}))},r}(ft),Mt=5,Ot=0,Nt=r.stateHandler,Ht=r.ViewerEvents,Vt=(Nt.IStateHandler,Nt.StateHandlerUtils.getDevicePagePoint),jt=r.vendors.Hammer,Ut=Nt.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_BOX,Ft=function(t){function r(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-typewriter",n}e(r,t),r.getStateName=function(){return Ut};var o=r.prototype;return o.pageHandler=function(t){var e=this;this.pageRender=t;var r=t.$handler;r.addClass("fv__create-stamp-state-handler "+this.cursorStyle);var o=r[0];(this.hammer=new jt.Manager(o,{recognizers:[[jt.Tap]]})).on("tap",(function(r){var i=Vt(o,r),a=t.pdfViewer;return t.getPDFPage().then((function(r){var o=t.getScale(),a=t.getRotation(),s=100*o*4/3,c=20*o*2/3,u={left:i.x,right:i.x+s,top:i.y-c,bottom:i.y+c},f=e.pdfViewer.getDefaultAnnotConfig()("freetext","FreeTextTextbox"),l=16777215;void 0!==f.fillColor&&(l=f.fillColor);var h=r.reverseDeviceRect(u,o,a),d=f.borderInfo;if(d&&d.style===Mt){var p=2===d.cloudIntensity?14.25:6;h={left:h.left-p,right:h.right+p,top:h.top+p,bottom:h.bottom-p}}var v=n({type:"freetext",rect:h,"interior-color":l,rotation:((360-90*r.getRotation()-a)%360+360)%360,flags:4,subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Textbox")},f);return r.addAnnot(v)})).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;return a.eventEmitter.emit(Ht.addAnnotSuccess,r.annot),ft.edit(t,e)})).then((function(t){a.getStateHandlerManager().switchTo()}))}))},o.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler "+this.cursorStyle),this.__removeHandlerMouseEvent__&&this.__removeHandlerMouseEvent__()},o.out=function(){this.destroyPageHandler()},r}(ft),Bt=(o(3290),function(){function t(t){this.component=t,this.prepared=!1}var e=t.prototype;return e.prepare=function(){this.prepared||(this.prepared=!0,this.doPrepare())},e.doPrepare=function(){},e.show=function(){this.prepared&&this.doShow()},e.doShow=function(){},e.hide=function(){this.prepared&&this.doHide()},e.doHide=function(){},e.destroy=function(){this.component=null,this.prepared=!1},e.willRender=function(){},e.afterRender=function(){},e.render=function(t,e,n){return this.prepared||this.prepare(),this.doRender(t,e,n)},e.doRender=function(t,e){return Promise.resolve()},e.numberToRGBAString=function(t){var e=s(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},e.invisibleRender=function(){},t}());o(8309);function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Xt(t){var e=function(t,e){if("object"!==Yt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Yt(e)?e:String(e)}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xt(r.key),r)}}function $t(t,e,n){return e&&Gt(t.prototype,e),n&&Gt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var zt="vertical",Wt="horizontal";var qt;navigator.appVersion.match(/iphone/gi),"undefined"!=typeof devicePixelRatio&&devicePixelRatio;function Jt(){return qt||(qt=function(){if("undefined"!=typeof screen&&screen.deviceXDPI)return{x:screen.deviceXDPI,y:screen.deviceYDPI};if("undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;top:20in;border:none;padding:0;",document.body.appendChild(t);var e={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)};return t.parentNode.removeChild(t),e}return{x:96,y:96}}()),qt}var Kt,Qt=function(){function t(t,e){this.fromInchRate=t,this.name=e}var e=t.prototype;return e.convertTo=function(t,e){return t/this.fromInchRate*e.fromInchRate},e.convertAreaTo=function(t,e){return t/Math.pow(this.fromInchRate,2)*Math.pow(e.fromInchRate,2)},$t(t,[{key:"isPixel",get:function(){return!1}}]),t}(),Zt=function(t){function n(e){var n;return(n=t.call(this,0,"px")||this).orientation=e,Object.defineProperty(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n),"fromInchRate",{get:function(){var t=Jt();switch(e){case Wt:return t.x;case zt:return t.y;default:return t.x}}}),n}return e(n,t),$t(n,[{key:"isPixel",get:function(){return!0}}]),n}(Qt),te={inch:"inch",custom:"custom",mi:"mi",pt:"pt",ft:"ft",yd:"yd",km:"km",m:"m",cm:"cm",mm:"mm",pica:"pica"},ee=new Qt(1,te.inch),ne=new Qt(1,te.custom),re=new Qt(1/63360,te.mi),oe=new Qt(72,te.pt),ie=new Qt(1/12,te.ft),ae=new Qt(1/36,te.yd),se=new Qt(.0254/1e3,te.km),ce=new Qt(.0254,te.m),ue=new Qt(2.54,te.cm),fe=new Qt(25.4,te.mm),le=new Qt(6,te.pica),he=new Zt(Wt),de=(new Zt(zt),(Kt={})[ee.name]=ee,Kt[ne.name]=ne,Kt[re.name]=re,Kt[oe.name]=oe,Kt[ie.name]=ie,Kt[ae.name]=ae,Kt[se.name]=se,Kt[ce.name]=ce,Kt[ue.name]=ue,Kt[fe.name]=fe,Kt[le.name]=le,Kt[he.name]=he,Kt);function pe(t){switch(t=(t=t.toLowerCase()).replace(/[^a-z]/g,"")){case"in":t="inch";break;case"p":t="pica"}return de[t]}var ve=function(t){function r(e){return t.call(this,e)||this}e(r,t);var o=r.prototype;return o.prepare=function(){this.prepared||(this.canvas=document.createElement("canvas"),this.container=this.component.getContainerElement(),this.container.appendChild(this.canvas),t.prototype.prepare.call(this))},o.destroy=function(){t.prototype.destroy.call(this),this.prepared&&this.canvas.remove()},o.doShow=function(){this.canvas.classList.remove("fv__ui-hide")},o.doHide=function(){this.canvas.classList.add("fv__ui-hide")},o.convertPointToPixel=function(t,e){return void 0===e&&(e=1),oe.convertTo(t,he)*e},o.willRender=function(){this.canvas.style.willChange="left, top, width, height",this.container.style.willChange="left; top"},o.afterRender=function(){this.canvas.style.willChange="auto",this.container.style.willChange="auto"},o.render=function(t,e){this.prepared||this.prepare();var r=this.component.getRenderingData(t,e);if(!r)return Promise.resolve();var o=r.annotInfo,i=o.borderInfo||{},a=this.convertPointToPixel(i.width,t),s=r.smartScale;!r.annotFlag.checkNoZoom()||(t=1);var c=r.rect,u=r.outerDeviceRect,f=r.innerDeviceRect;n(f,{width:f.right-f.left,height:f.bottom-f.top}),n(u,{width:u.right-u.left,height:u.bottom-u.top}),this.resetCanvasSize(u.width,u.height),this.container.style.cssText+="\n            left: "+c.left+"px;\n            top: "+c.top+"px;\n        ";var l=this.canvas.style;if(0===a&&0===o.borderColor&&!o.fillColor)return l.visibility="hidden",Promise.resolve();if(0===o.opacity)return l.visibility="hidden",Promise.resolve();l.visibility="unset";try{return Promise.resolve(this.doRender({outerRect:u,innerRect:f,deviceRect:c,scale:t,smartScale:s,rotate:e,renderingData:r}))}catch(t){return console.error(t),Promise.resolve()}},o.doRender=function(t){t.outerRect,t.innerRect,t.deviceRect,t.scale,t.rotate},o.resetCanvasSize=function(t,e){this.canvas.width=Math.ceil(t),this.canvas.height=Math.ceil(e),this.canvas.style.width=null,this.canvas.style.height=null},o.invisibleRender=function(){this.canvas&&(this.canvas.width=0)},r}(Bt),ge=(o(7941),o(9653),{SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5,NOBORDER:6}),me={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",CIRCLE_DIMENSION:"CircleDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"},ye={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"},we=Object.keys(ye).reduce((function(t,e){return t[ye[e]]=Number(e),t}),{}),Ae=0,be=1,Se=(Promise.resolve(),function(){function t(t,e){this.x=t,this.y=e}var e=t.prototype;return e.add=function(e,n){return new t(this.x+e,this.y+n)},e.addp=function(e){return new t(this.x+e.x,this.y+e.y)},e.subtractp=function(e){return new t(this.x-e.x,this.y-e.y)},e.subtract=function(e,n){return new t(this.x-e,this.y-n)},e.move=function(e,n){var r=n.x-this.x,o=n.y-this.y,i=e/Math.sqrt(r*r+o*o);return new t(this.x+r*i,this.y+o*i)},e.rotate=function(e,n){var r=this.x-n.x,o=this.y-n.y,i=Math.sqrt(r*r+o*o),a=Math.atan2(o,r)-e,s=i*Math.cos(a),c=i*Math.sin(a);return new t(n.x+s,n.y+c)},e.distanceTo=function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},e.slope=function(t){var e=this._dot(t);return Math.acos(e/(this._disp()*t._disp()))},e._dot=function(t){return this.x*t.x+this.y*t.y},e._disp=function(){return Math.sqrt(this._dot(this))},e.equalTo=function(e,n){return void 0===n&&(n=0),n=Math.abs(n),e instanceof t&&Math.abs(this.x-e.x)<=n&&Math.abs(this.y-e.y)<=n},e.clone=function(){return new t(this.x,this.y)},t}());o(4747);function Ee(t){throw new Error("Method not implemented"+(t?":"+t:""))}var xe=function(){function t(){this.segments=[]}var e=t.prototype;return e.addSegment=function(t){t instanceof Re&&this.segments.push(t)},e.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),t.closePath()},t}(),Re=function(){function t(t,e){this.from=t,this.to=e}var e=t.prototype;return e.render=function(t){Ee()},e.isJoinedBefore=function(t){return this.to.equalTo(t.from)},e.isJoinedAfter=function(t){return t.to.equalTo(this.from)},e.isJoinedWith=function(t){return this.isJoinedBefore(t)||this.isJoinedAfter(t)},t}(),Te=function(){function t(){}return t.prototype.generate=function(){Ee()},t}();o(7327);function Pe(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var r=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(e,void 0!==n&&n<r?n:r)}return t(e,n)}var Ce=function(t){function n(e,n,r){var o;return(o=t.call(this,null,r)||this).controlPoint1=e,o.controlPoint2=n,o}return e(n,t),n.prototype.render=function(t){t.bezierCurveTo(this.controlPoint1.x,this.controlPoint1.y,this.controlPoint2.x,this.controlPoint2.y,this.to.x,this.to.y)},n}(Re),Ie=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n.prototype.render=function(t){t.moveTo(this.from.x,this.from.y)},n}(Re),_e=.5522847498308,De=3.14159265358979,Le=1e-4,ke=function(t){function n(e,n,r){var o;return(o=t.call(this)||this).points=e,o.innerRect=n,o.outerRect=r,o}return e(n,t),n.prototype.generate=function(t,e){var n=this;void 0===t&&(t=4);var r=new xe,o=this.points.map((function(t){return t.y=n.innerRect.height-t.y,t})),i=o.length,a=i*t,s=o.map((function(t,e){return t.distanceTo(o[(e+1)%i])})).reduce((function(t,e){return t+e})),c={left:o[0].x,right:o[0].x,top:o[0].y,bottom:o[0].y},u=s/a;if(0==u)return r;for(var f=[],l=0,h=o[0],d=o[1],p=h.distanceTo(d),v=0,g=1;v<a;v++){for(;l>p;)l-=p,g++,h=d,d=o[g%i],p=h.distanceTo(d);f.push(h.move(l,d)),l+=u}var m=f.length,y=!0,w=5*u/8;return f.forEach((function(t,e){var o=function(t,e,n){var r=t.subtractp(e),o=n.subtractp(e),i=[],a=Math.atan2(r.y,r.x),s=Math.atan2(o.y,o.x);a+=Math.acos(t.distanceTo(e)/(2*w))-De/9,s-=Math.acos(n.distanceTo(e)/(2*w)),s<a&&(s+=2*De);var c={left:e.x-w,right:e.x+w,bottom:e.y-w,top:e.y+w},u=Me(c,a,s,y);i.push.apply(i,Pe(X,u.arrAp)),y=!1;var f=e.subtractp(n);return a=Math.atan2(f.y,f.x),a+=Math.acos(n.distanceTo(e)/(2*w)),s=a-De/9,c={left:n.x-w,right:n.x+w,bottom:n.y-w,top:n.y+w},u=Me(c,a,s,y),i.push.apply(i,Pe(X,u.arrAp)),i}(f[0==e?m-1:e-1],t,f[(e+1)%m]);o.forEach((function(t){var e=function(t){t&&(t.x+=n.innerRect.left-n.outerRect.left,t.y=n.innerRect.height-t.y+(n.innerRect.top-n.outerRect.top))};e(t.from),e(t.to),e(t.controlPoint1),e(t.controlPoint2),r.addSegment(t)}))})),r.rect=c,r},n}(Te);function Me(t,e,n,r){var o,i,a,s,c,u,f,l,h,d,p,v,g,m,y,w,A,b,S,E,x,R,T,P,C={};if(t.left>=t.right||t.bottom>=t.top)return{arrAp:[],pdfRect:C};if(Math.abs(n-e)<=Le)return{arrAp:[],pdfRect:C};var I=[];o=(t.right+t.left)/2,i=(t.top+t.bottom)/2,a=Math.abs(t.right-t.left)/2,s=Math.abs(t.top-t.bottom)/2,T=e,x=o+(p=a*Math.cos(T)),R=i+(v=s*Math.sin(T)),C.left=C.right=x,C.bottom=C.top=R,r&&I.push(new Ie(new Se(x,R)));var _=1;n<e&&(_=-1);var D=Math.floor(2*e/De);_>0&&(D+=1),D*=De/2;for(var L=!1;P=D,_>0?n<=D&&(P=n,L=!0):n>=D&&(P=n,L=!0),p=a*Math.cos(T),v=s*Math.sin(T),A=a*Math.cos(P),h=d=-a*a*s*s,g=p+(x=(S=((f=a*a*v)*d-(l=a*a*(b=s*Math.sin(P)))*h)/((c=s*s*p)*l-(u=s*s*A)*f))-p)*_e,m=v+(R=(E=(u*h-c*d)/(c*l-u*f))-v)*_e,y=A+(x=S-A)*_e,w=b+(R=E-b)*_e,g=x=o+g,m=R=i+m,C.left>g&&(C.left=g),C.bottom>m&&(C.bottom=m),C.right<g&&(C.right=g),C.top<m&&(C.top=m),y=x=o+y,w=R=i+w,C.left>y&&(C.left=y),C.bottom>w&&(C.bottom=w),C.right<y&&(C.right=y),C.top<w&&(C.top=w),A=x=o+A,b=R=i+b,C.left>A&&(C.left=A),C.bottom>b&&(C.bottom=b),C.right<A&&(C.right=A),C.top<b&&(C.top=b),I.push(new Ce(new Se(g,m),new Se(y,w),new Se(A,b))),!L;)T=P,D+=_*De/2;return{arrAp:I,pdfRect:C}}var Oe=function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=t),void 0===r&&(r=e),this.top=t,this.left=e,this.bottom=n,this.right=r},Ne=function(){function t(t){this.offsetLeft=0,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.target=t}t.isOverlap=function(t,e,n){void 0===n&&(n=!1);var r=Math.max(t.left,e.left),o=Math[n?"min":"max"](t.top,e.top),i=Math[n?"max":"min"](t.bottom,e.bottom),a=Math.min(t.right,e.right);if(r<=a)if(n){if(o>=i)return(a-r)*(o-i)}else if(o<=i)return(a-r)*(i-o);return 0},t.isInRect=function(t,e,n,r){if(void 0===r&&(r=!1),t>=n.left&&t<=n.right)if(r){if(e>=n.bottom&&e<=n.top)return!0}else if(e<=n.bottom&&e>=n.top)return!0;return!1},t.rectInRect=function(t,e,n){return void 0===n&&(n=!1),!!(t.left>=e.left&&t.right<=e.right)&&(n?t.top<=e.top&&t.bottom>=e.bottom:t.top>=e.top&&t.bottom<=e.bottom)},t.on=function(e){return new t(e)},t.subtract=function(t,e){return new Oe(t.top-e.top,t.left-e.left,t.bottom-e.bottom,t.right-e.right)},t.expandOffset=function(t,e){return new Oe(t.top-e.top,t.left-e.left,e.bottom-t.bottom,e.right-t.right)},t.copyTo=function(t,e){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom};var e=t.prototype;return e.moveLeft=function(t){return this.offsetLeft+=t,this.offsetRight+=t,this},e.moveTop=function(t){return this.offsetTop+=t,this.offsetBottom+=t,this},e.move=function(t,e){return this.moveLeft(t).moveTop(e)},e.moveTo=function(t,e){return this.offsetLeft=this.offsetRight=this.target.left-t,this.offsetTop=this.offsetBottom=this.target.top-e,this},e.shrink=function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=t),void 0===r&&(r=e),this.add(new Oe(t,e,-n,-r))},e.expand=function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=t),void 0===r&&(r=e),this.add(new Oe(-t,-e,n,r))},e.zoom=function(t,e,n){void 0===t&&(t=1),void 0===e&&(e="center"),void 0===n&&(n="center");var r=this.target.right+this.offsetRight-(this.target.left+this.offsetLeft),o=this.target.bottom+this.offsetBottom-(this.target.top+this.offsetTop),i=r*t-r,a=o*t-o,s=0,c=0,u=0,f=0;switch(e){case"right":s=-i;break;case"center":s=-i/2,c=i/2;break;default:c=i}switch(n){case"bottom":u=-a;break;case"center":u=-a/2,f=a/2;break;default:f=a}return this.add(new Oe(u,s,f,c))},e.add=function(t){var e=void 0===t?{}:t,n=e.top,r=void 0===n?0:n,o=e.left,i=void 0===o?r:o,a=e.bottom,s=void 0===a?r:a,c=e.right,u=void 0===c?i:c;return this.offsetLeft+=i,this.offsetRight+=u,this.offsetBottom+=s,this.offsetTop+=r,this},e.extract=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight;return{left:t,top:this.target.top+this.offsetTop,right:e,bottom:this.target.bottom+this.offsetBottom}},e.boundary=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop;return{left:t,top:n,width:e-t,height:this.target.bottom+this.offsetBottom-n}},e.intersect=function(e){e instanceof t||(e=t.on(e));var n=this.toPlainObject(),r=e.toPlainObject(),o={left:Math.max(n.left,r.left),right:Math.min(n.right,r.right),top:Math.max(n.top,r.top),bottom:Math.min(n.bottom,r.bottom)};return t.on(o)},e.toPlainObject=function(){return{left:this.target.left+this.offsetLeft,right:this.target.right+this.offsetRight,top:this.target.top+this.offsetTop,bottom:this.target.bottom+this.offsetBottom}},t}(),He=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var o=r.prototype;return o.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-square-canvas")},o.doRender=function(t,e){void 0===e&&(e=!0);var n=t.renderingData.annotInfo,r=n.borderInfo||{},o=this.convertPointToPixel(r.width||1,t.scale),i=this.canvas.getContext("2d");if(i.clearRect(0,0,this.canvas.width,this.canvas.height),i.save(),!this.component.needToggleView||!this.component.needToggleView()||this.component.shouldRenderByMouseEvent()){t.lineWidth=o,e&&(i.globalAlpha=n.opacity),0===o||!1===n.hasBorderColor?i.strokeStyle="transparent":i.strokeStyle=this.numberToRGBAString(n.color),i.lineWidth=o;try{switch(r.style){case ge.BEVELED:case ge.UNDERLINE:case ge.SOLID:this.renderSolid(i,n,t);break;case ge.DASHED:this.renderDashed(i,n,t);break;case ge.CLOUDY:this.renderCloud(i,n,t)}var a=n.fillColor;a&&(i.fillStyle=this.numberToRGBAString(a),i.fill()),i.stroke()}finally{i.restore()}}},o.shrinkRect=function(t,e){var r=Ne.on(t).shrink(e).extract();return n(r,{width:r.right-r.left,height:r.bottom-r.top})},o.renderCloud=function(t,e,n){e.fillColor;var r=e.borderInfo.cloudIntensity,o=this.shrinkRect(n.innerRect,0),i=this.shrinkRect(n.outerRect,0),a=o.width,s=o.height;new ke([new Se(0,s),new Se(a,s),new Se(a,0),new Se(0,0)],o,i).generate(32/3/r).render(t)},o.renderDashed=function(t,e,n){var r=this,o=e.borderInfo,i=o.dashes||[],a=o.dashPhase||0,s=n.scale;t.save(),t.setLineDash&&t.setLineDash(i.map((function(t){return r.convertPointToPixel(t,s)}))),t.lineDashOffset=this.convertPointToPixel(a,s),this.renderSolid(t,e,n)},o.renderSolid=function(t,e,n){var r=n.lineWidth,o=n.innerRect,i=n.outerRect,a=o.width,s=o.height,c=.5*r,u=o.left-i.left,f=o.top-i.top;t.beginPath(),t.rect(c+u,c+f,a-r,s-r),t.closePath()},r}(ve),Ve=(o(2087),{invisible:1,hidden:2,print:4,noZoom:8,noRotate:16,noView:32,readOnly:64,locked:128,toggleNoView:256,lockedContents:512}),je=function(){function t(t){this.flag=t}var e=t.prototype;return e.getValue=function(){return this.flag},e.checkInvisible=function(){return(this.flag&Ve.invisible)===Ve.invisible},e.checkHidden=function(){return(this.flag&Ve.hidden)===Ve.hidden},e.checkPrint=function(){return(this.flag&Ve.print)===Ve.print},e.checkNoZoom=function(){return(this.flag&Ve.noZoom)===Ve.noZoom},e.checkNoRotate=function(){return(this.flag&Ve.noRotate)===Ve.noRotate},e.checkNoView=function(){return(this.flag&Ve.noView)===Ve.noView},e.checkReadOnly=function(){return(this.flag&Ve.readOnly)===Ve.readOnly},e.checkLocked=function(){return(this.flag&Ve.locked)===Ve.locked},e.checkToggleNoView=function(){return(this.flag&Ve.toggleNoView)===Ve.toggleNoView},e.checkLockedContents=function(){return(this.flag&Ve.lockedContents)===Ve.lockedContents},e.check=function(t){return(this.flag&t)===t},e.and=function(){return this},e.or=function(t){return this.flag=this.flag|t,this},t}(),Ue={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"};function Fe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=!0;"boolean"==typeof t&&(o=t,t=n[0],n=n.slice(1)),(null===t||"object"!=typeof t&&"function"!=typeof t)&&(t={});for(var i=0,a=n.length;i<a;i++){var s=n[i];if(null!=s)for(var c in s){var u=t[c],f=s[c];if(t!==f){var l=void 0;if(o&&f&&(Ye(f)||(l=Array.isArray(f)))){var h=void 0;l?(l=!1,h=u&&Array.isArray(u)?u:[]):h=u&&Ye(u)?u:{},t[c]=Fe(o,h,f)}else void 0!==f&&(t[c]=f)}}}return t}function Be(t,e){return null!=t&&{}.hasOwnProperty.call(t,e)}function Ye(t){if(!t||"object"!==function(t){if(null===t)return"null";switch(typeof t){case"object":case"function":return Ue[Object.prototype.toString(t)]||"object"}return typeof t}(t)||t.nodeType||null!=t&&t==t.window)return!1;if(t.constructor&&!Be(t,"constructor")&&!Be(t.constructor.prototype,"isPrototypeOf"))return!1;var e=void 0;for(e in t);return void 0===e||Be(t,e)}var Xe=n({jrLicenseSuccess:"jr-license-success",srLicenseSuccess:"sr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",beforeLoadPDFDoc:"before-load-pdf-document",startConvert:"start-convert",finishConvert:"finish-convert",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",beforeRenderPage:"before-render-page",renderPageSuccess:"render-page-success",updateZoomMode:"update-zoom-mode",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",unActiveAnnotation:"unactive-annotation",updateActiveAnnotation:"update-action-annotation",updateActionAnnotation:"update-action-annotation",removeActiveAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationBefore:"remove-action-annotation-before",removeActiveAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActiveAnnotationFailed:"remove-action-annotation-failed",removeActionAnnotationFailed:"remove-action-annotation-failed",beforeSwitchStateHandler:"before-switch-state-handler",switchStateHandler:"switch-state-handler",deactiveStateHandler:"deactive-state-handler",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",beforeDocumentRotation:"before-document-rotation",afterDocumentRotation:"after-document-rotation",snapModeChanged:"snap-mode-changed",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",onlineSignAdded:"onlineSign-added",onlineSignDeleted:"onlineSign-deleted",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",perimeterAnnotCreationStart:"perimeter-creation-start",updateDistanceAnnot:"update-distance-annot",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",addEditImage:"add-edit-image",InkImageSelected:"ink-image-selected",OnlineImageSelected:"online-image-selected",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",sideBarChanged:"sidebar-changed",showWhatsNew:"show-whats-new",disableScroll:"disable-scroll",enableScroll:"enable-scroll",updateScrollableStatus:"update-scrollable-status",selectText:"select-text",changeEnableJS:"change-enable-js",toggleEngineSr2JrSuccess:"toggle-engine-sr-to-jr-success",iconInited:"iconInited",iconAdded:"iconAdded",iconRemoved:"iconRemoved",annotationPermissionChanged:"annotation-premission-changed",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page",designerAssistantStatusChanged:"form-designer-assistant-status-changed",mouseEnter:"mouse-enter",mouseLeave:"mouse-leave",setFromFieldHighlight:"set_form_field_highlight",AddFontMaps:"set_font_map",thumbnailClicked:"thumbnail-clicked",layerActionActived:"layer-action-actived",redeModeShowSidebar:"rede-mode-show-sidebar",gridToggle:"grid-toggle",snapGridToggle:"snap-grid-toggle",toggleCollaborationMode:"toggleCollaborationMode",findReplaceDialogVisibleChange:"find-replace-dialog-visible-change",showAllComments:"show-all-comments",hideAllComments:"hide-all-comments",focusOnControl:"focus-on-control",blurFromObject:"blur-from-object",documentWillPrint:"document-will-print",documentDidPrint:"document-did-print",documentWillSave:"document-will-save",documentDidSave:"document-did-save",verifyDocSignatureEvent:"verify-doc-signature",verifySignatureEvent:"verify-signature",clearSignatureEvent:"clear-signature",viewSignedVersionDocEvent:"view-signed-version",showFieldPropertiesEvent:"show-field-properties",showSignatureVerifyInfoEvent:"show-signature-tusted-info",compareSignedVersionEvent:"compare-signed-version",showCompareSignedVersionResultEvent:"show-compare-signed-version-result",createInkSignSuccess:"createInkSignSuccess",galleryCreateStamp:"galleryCreateStamp",switchGalleryTabActive:"switchGalleryTabActive",mangeStampInner:"mangeStampInner",tapField:"tap-field",tapGraphicsObject:"tap-graphics-object",spawnPageSuccess:" spawn-page-success"},{annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReplyAdded:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationReviewStateAnnotAdded:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationMarkedStateAnnotAdded:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationPositionMoved:"annotation-moved-position",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionAdded:"action-add",actionRemove:"action-remove",actionRemoved:"action-remove",layerVisibleChange:"layer-visible-change",layerVisibleChanged:"layer-visible-change",layerRemoved:"layer-removed",layerMerged:"layer-merged",bookmarkAdded:"bookmark-added",structureBookmarkAdded:"structure-bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageInfoChanged:"page-info-change",pageRotationChange:"page-rotation-change",pageRotationChanged:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptSucceeded:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pwdAndPermRemoved:"remove-password-and-permission",securityTypeChanged:"security-type-changed",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",pagesInserted:"import-pages",importPages:"import-pages",documentAttachmentAdd:"document-attachment-add",docAttachmentAdded:"document-attachment-add",documentAttachmentModify:"document-attachment-modify",docAttachmentModified:"document-attachment-modify",documentAttachmentRemove:"document-attachment-remove",docAttachmentRemoved:"document-attachment-remove",applyRedaction:"apply-redaction",redactionApplied:"apply-redaction",removeReviewState:"remove-review-state",reviewStateRemoved:"remove-review-state",removeMarkedState:"remove-marked-state",markedStateRemoved:"remove-marked-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",COChange:"COChange",COChanged:"COChange",pagesReversed:"pages-reversed",pagesMoved:"pages-moved",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated",pageMeasureScaleRatioChanged:" page-measure-scale-ratio-changed",obtainsPageFromEngine:"obtains-page-from-engine",pagesBoxChange:"pages-box-changed",pagesBoxChanged:"pages-box-changed",pagesLabelChange:"pages-label-change",pagesLabelChanged:"pages-label-change",pagesLabelNeedUpdate:"pages-label-need-change",pagesLabelNeedUpdated:"pages-label-need-change",pagesReplace:"pages-replace",pagesReplaced:"pages-replace",recognitionForm:"recognition-form",removeEmbeddedPageThumbnail:"remove-embedded-page-thumbnail",embeddedPageThumbnailRemoved:"remove-embedded-page-thumbnail",articleThreadAdded:"article-thread-added",articleThreadUpdated:"article-thread-updated",articleThreadRemoved:"article-thread-removed",articleBeadAdded:"article-bead-added",articleBeadRemoved:"article-bead-removed",articleBeadUpdated:"article-bead-updated",articleEnterReadMode:"article-enter-read-mode",articleOutReadMode:"article-out-read-mode",signChinaNoApply:"sign-china-no-apply",signChinaFlowNoApply:"sign-china-flow-no-apply",signChinaLegalNoticeConfirm:"sign-china-legal-notice-confirm",invalidRect:"invalidRect"});var Ge,$e=72;function ze(t){return function(){if(!Ge){var t=Jt();Ge=[t.x,t.y]}return Ge}()[t]}function We(t,e){return void 0===e&&(e=0),t*ze(e)/$e}var qe=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var o=r.prototype;return o.getTileConfig=function(t,e){void 0===t&&(t=this.scale),void 0===e&&(e=this.rotate);var n=this.pdfViewer.getSmartScale(t),r=this.pdfViewer.config.tileSize,o=this.page.getDeviceRect(this.pdfRect,1,e),i=this.page.getDeviceRect(this.pdfRect,n,e),a=i.right-i.left,s=i.bottom-i.bottom;return[Math.ceil(s/r),Math.ceil(a/r),a,s,r,n,t,e,o.left,o.top]},o.getRenderingData=function(e,r){return void 0===e&&(e=this.scale),void 0===r&&(r=this.rotate),n(t.prototype.getRenderingData.call(this,e,r),{opacity:this.annotationInfo.opacity,tileConfig:this.getTileConfig(e,r)})},r}(function(){function t(t){this.pdfRect={left:0,right:0,top:0,bottom:0},this.deviceRect={left:0,right:0,top:0,bottom:0},this.annotationInfo=this.getDefaultAnnotInfo(),this.eContainer=document.createElement("div"),this.eContainer.classList.add("fv__viewer-fake-annot-container"),this.pdfViewer=t.pdfViewer,this.pageRender=t.pageRender,this.intent=t.info.intent,Fe(this.annotationInfo,t.info,this.getDefaultAnnotConfig()),this.annotationInfo.type=this.getType(),this.page=t.pageRender.page,this.scale=t.pageRender.scale,this.rotate=t.pageRender.rotate,this.pageRender.$annotsContainer.append(this.eContainer)}var e=t.prototype;return e.setRect=function(t){this.deviceRect=t;var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top),r=We(this.annotationInfo.borderInfo.width)*this.scale*2;if(e<r){var o=.5*(r-e)*(t.right-t.left>0?1:-1);t.right+=o,t.left-=o}if(n<r){var i=.5*(r-n)*(t.bottom-t.top>0?1:-1);t.top-=i,t.bottom+=i}e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);var a=this.pageRender.rotate;this.pdfRect=this.page.reverseDeviceRect(t,this.scale,a),this.eContainer.style.cssText+="\n            left: "+t.left+"px;\n            top: "+t.top+"px;\n            width: "+e+"px;\n            height: "+n+"px;\n        "},e.setContent=function(t){this.annotationInfo.contents=t},e.zoomTo=function(t){this.scale=t},e.draw=function(){this.renderer||(this.renderer=this.generateApRenderer(),this.renderer.prepare(),this.renderer.willRender()),this.renderer.component&&this.renderer.render(this.scale,this.rotate)},e.getContainerElement=function(){return this.eContainer},e.getRenderingData=function(t,e){void 0===t&&(t=this.scale),void 0===e&&(e=this.rotate);var n=this.pdfViewer.getSmartScale(t),r=this.getDeviceRect(t,e),o=this.getOuterDeviceRect(t,e),i=this.getDeviceRect(n,e);return{annotInfo:this.annotationInfo,annotFlag:new je(this.annotationInfo.flags),smartScale:n,rect:o,outerDeviceRect:o,innerDeviceRect:r,engineRenderingRect:i,scale:t,rotate:e,page:this.page}},e.getDeviceRect=function(t,e){return this.page.getDeviceRect(this.pdfRect,t,e)},e.getOuterDeviceRect=function(t,e){var n=this.annotationInfo.borderInfo;if(n&&5===n.style){var r=this.pageRender.getContainerVisibleRect(),o=r.right-r.left,i=r.bottom-r.top,a=this.page.getDeviceRect(this.pdfRect,t,e),s=(o-(a.right-a.left))/2,c=(i-(a.bottom-a.top))/2;return{left:a.left-s,right:a.right+s,top:a.top-c,bottom:a.bottom+c}}return this.page.getDeviceRect(this.pdfRect,t,e)},e.apply=function(){var t,e=this;null===(t=this.renderer)||void 0===t||t.afterRender();var n=this.getCreationJSON();return n.endingStyle&&(n.endStyle=n.endingStyle,delete n.endingStyle),n.rect=this.pdfRect,this.page.addAnnot(n).then((function(t){e.destroy();var n=t[0];return e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.eventEmitter.emit(Xe.addAnnotSuccess,n),t}))},e.destroy=function(){var t;null===(t=this.renderer)||void 0===t||t.destroy(),this.getContainerElement().remove()},e.getCreationJSON=function(){return this.annotationInfo},e.getDefaultAnnotInfo=function(){return{borderInfo:{width:2,style:ge.SOLID},color:16711680,opacity:1,flags:4,date:new Date}},e.getDefaultAnnotConfig=function(){var t=this.pdfViewer.getDefaultAnnotConfig();return"function"==typeof t?t(this.getType(),this.getIntent()):{}},e.getIntent=function(){return this.intent},t}()),Je=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.getType=function(){return"square"},r.generateApRenderer=function(){return new He(this)},n}(qe),Ke=(o(6977),function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var o=r.prototype;return o.doRender=function(t){var e=t.renderingData.annotInfo,n=e.borderInfo||{},r=this.convertPointToPixel(n.width||1,t.scale);if(0!=r||-1!=e.borderColor||e.fillColor){var o=this.canvas.getContext("2d");if(o.clearRect(0,0,this.canvas.width,this.canvas.height),o.save(),!this.component.needToggleView||!this.component.needToggleView()||this.component.shouldRenderByMouseEvent()){t.lineWidth=r,o.globalAlpha=e.opacity,0===r||!1===e.hasBorderColor?o.strokeStyle="transparent":o.strokeStyle=this.numberToRGBAString(e.color),o.lineWidth=r;try{switch(n.style){case ge.SOLID:this.renderSolid(o,e,t);break;case ge.BEVELED:break;case ge.DASHED:this.renderDashed(o,e,t);break;case ge.CLOUDY:0==n.cloudIntensity?this.renderSolid(o,e,t):this.renderCloud(o,e,t)}var i=e.fillColor;i&&(o.fillStyle=this.numberToRGBAString(i),o.fill()),o.stroke()}finally{o.restore()}}}},o.renderSolid=function(t,e,n){this.renderDashed(t,e,n)},o.renderDashed=function(t,e,n){var r=e.borderInfo,o=n.lineWidth,i=n.innerRect,a=n.outerRect,s=r.dashes||[],c=r.dashPhase||0,u=.5*o,f=new Se(.5*(i.left+i.right)-a.left,.5*(i.top+i.bottom)-a.top),l=Math.abs(.5*i.height-u),h=Math.abs(.5*i.width-u);t.lineDashOffset=c,t.setLineDash&&t.setLineDash(s),t.beginPath(),function(t,e,n,r,o,i,a,s,c){void 0===i&&(i=0);void 0===a&&(a=0);void 0===s&&(s=2*Math.PI);void 0===c&&(c=!0);t.ellipse?t.ellipse(e,n,r,o,i,a,s,c):(t.save(),t.translate(e,n),t.rotate(i),t.scale(r,o),t.arc(0,0,1,a,s,c),t.restore())}(t,f.x,f.y,h,l),t.closePath()},o.renderCloud=function(t,e,n){var r=e.borderInfo.cloudIntensity,o=.5*n.lineWidth,i=this.shrinkRect(n.innerRect,o),a=this.shrinkRect(n.outerRect,o),s=new Se(.5*(a.right-a.left)-(i.left-a.left),.5*(a.bottom-a.top)-(i.top-a.top)),c=.5*i.height-o,u=.5*i.width-o,f=16/r,l=Math.PI/f,h=2*Math.PI,d=Array(Math.floor(h/l)-1).fill(0).map((function(t,e){return e*l%h})).map((function(t){var e=u*Math.cos(h-t),n=c*Math.sin(h-t);return s.add(e,n)}));new ke(d,i,a).generate(1,t).render(t)},o.shrinkRect=function(t,e){var r=Ne.on(t).shrink(e).extract();return n(r,{width:r.right-r.left,height:r.bottom-r.top})},r}(ve));o(561);var Qe=function(){var t=localStorage.getItem("Measuring-KEY");if(t){var e=(t=JSON.parse(t)).label;return e?e+"\n":""}return""},Ze=function(){var t=localStorage.getItem("Measure-Right-Tab");return t?JSON.parse(t):{makup:!0}},tn=function(t){for(var e=t.length-1;e>=0;e--){t[e].destroy(),t.splice(e,1)}return[]},en=function(t,e,r){var o=t.getRenderingData(e,r);!o.annotFlag.checkNoZoom()||(e=1);var i=o.outerDeviceRect,a=o.innerDeviceRect;return n(a,{width:a.right-a.left,height:a.bottom-a.top}),n(i,{width:i.right-i.left,height:i.bottom-i.top}),{renderingData:o,innerRect:a,outerRect:i,scale:e,rotate:r}},nn=function(t,e){var n=t.canvas,r=n.width,o=n.height,i=e.x,a=e.y;i-=4,a-=4,(i=Math.max(i,2))+8>r&&(i=r-8-2),(a=Math.max(a,2))+8>o&&(a=o-8-2),t.rotate(0),t.fillStyle="#ffffff",t.rect(i,a,8,8),t.stroke(),t.fill()},rn=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.getType=function(){return"circle"},r.generateApRenderer=function(){return new Ke(this)},r.apply=function(){var e=this;return t.prototype.apply.call(this).then((function(t){return"CircleDimension"===e.annotationInfo.intent?e.page.getMeasureScaleRatio().then((function(n){if(n&&n.scale){var r=e.pdfViewer.getStore().getCurrentValue("measurementData"),o=Qe(),i=pe(r.displayUnit.name)?e.pdfViewer.i18n.t("measurement.units."+r.displayUnit.name):r.displayUnit.name;return t[0].setContent(o+parseFloat(r.area).toFixed(2)+" sq "+i).then((function(e){return t}))}return t})):t}))},n}(qe),on=r.stateHandler,an=r.ViewerEvents,sn=on.IStateHandler,cn=on.StateHandlerUtils.getDevicePagePoint,un=r.shared.keyboardStatus,fn=r.keyboard,ln=fn.BuiltinCommand,hn=fn.BuiltinShortcutContext,dn=function(t){function n(e,n){var r;return(r=t.call(this,e)||this).type=n,r.cursorStyle="fv__cursor-crosshair",r}e(n,t);var r=n.prototype;return r.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r=n.get(0),o=this.hammer=new Hammer.Manager(r);o.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL}));var i,a=!1,s=this.pdfViewer.getKeyboard(),c=function(){};s.withContext(hn.CREATING_ANNOTATION,(function(t){t.keyup(ln.CANCEL_CREATING_ANNOTATION_OPERATION,(function(){e.cancel(),a=!0,c()}),{interceptors:[function(t,e){a||e(t)}]})})),o.on("panstart",(function(t){c=s.activeContext(hn.CREATING_ANNOTATION),a=!1,i=r.getBoundingClientRect(),e.startPoint=cn(r,t),e.start({left:e.startPoint.x,top:e.startPoint.y})})),o.on("panmove",(function(t){if(!a){var n=r.getBoundingClientRect(),o=n.left-i.left,s=n.top-i.top,c=e.correctPosition({x:e.startPoint.x+t.deltaX-o,y:e.startPoint.y+t.deltaY-s});return e.currentPoint=c,e.adjust(e.currentFakeAnnot,e.startPoint,c)}})),o.on("panend",(function(t){if(c(),!a){var n=r.getBoundingClientRect(),o=n.left-i.left,s=n.top-i.top,u=e.correctPosition({x:e.startPoint.x+t.deltaX-o,y:e.startPoint.y+t.deltaY-s});e.currentPoint=u,e.end(e.currentFakeAnnot,e.startPoint,u),i=null}})),o.on("pancancel",(function(t){if(c(),!a)return i=null,e.pdfViewer.eventEmitter.emit("collab-creating-op",{cancle:1,page:e.pageRender.index}),e.end(e.currentFakeAnnot,e.startPoint,e.currentPoint)})),this.removeZoomToSuccessEvent=this.pdfViewer.addEventListener(an.zoomToSuccess,(function(t){!a&&e.currentFakeAnnot&&(e.currentFakeAnnot.zoomTo(t),e.currentFakeAnnot.draw())}))},r.correctPosition=function(t){var e=this.pageRender.getShowWidth(),n=this.pageRender.getShowHeight();return{x:Math.max(0,Math.min(e,t.x)),y:Math.max(0,Math.min(n,t.y))}},r.getSubject=function(){switch(this.type){case"circle":return this.pdfViewer.i18n.t("viewer_:annotSubjects.Oval");case"square":return this.pdfViewer.i18n.t("viewer_:annotSubjects.Rectangle")}return""},r.start=function(t){var e=t.left,n=t.top,r={flags:4,subject:this.getSubject()};switch(this.type){case"circle":this.currentFakeAnnot=new rn({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:r});break;case"square":this.currentFakeAnnot=new Je({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:r});break;case"square-crop":this.currentFakeAnnot=new Je({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:{flags:4,subject:this.getSubject(),borderInfo:{width:1},color:255}});break;default:throw new Error("Will never happen")}this.currentFakeAnnot.setRect({left:e,top:n,right:e+10,bottom:n-10})},r.adjust=function(t,e,n){var r,o,i=e.x,a=e.y,s=n.x,c=n.y,u=Math.abs(i-s),f=Math.abs(a-c);un.isShift?(u=f=Math.min(u,f),r=s<i?i-u:i,o=c<a?a-f:a):(r=Math.min(i,s),o=Math.min(a,c)),u=Math.max(u,1),f=Math.max(f,1),t.setRect({left:r,top:o,right:r+u,bottom:o+f}),t.draw()},r.end=function(t,e,n){var r=this;this.currentFakeAnnot.apply().then((function(t){if(r.pdfViewer.config.showCommentList){var e=t[0];r.pageRender.annotsRender.getAnnotRender(e.getId()).component.showReplyDialog()}})),this.currentFakeAnnot=null},r.cancel=function(){this.currentFakeAnnot&&(this.currentFakeAnnot.destroy(),this.currentFakeAnnot=null),this.pdfViewer.eventEmitter.emit("collab-creating-op",{cancle:1,page:this.pageRender.index})},r.currentPointDirection=function(){var t=this.startPoint.x,e=this.startPoint.y,n=this.currentPoint.x,r=this.currentPoint.y;return n<=t?r<e?"north-west":"south-west":r<e?"north-east":"south-east"},r.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.offCancelEvent&&this.offCancelEvent(),this.removeZoomToSuccessEvent&&this.removeZoomToSuccessEvent()},r.out=function(){this.destroyPageHandler()},n}(sn),pn=r.stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_SQUARE,vn=function(t){function n(e){return t.call(this,e,"square")||this}return e(n,t),n.getStateName=function(){return pn},n}(dn),gn=r.stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_CIRCLE,mn=function(t){function n(e){return t.call(this,e,"circle")||this}return e(n,t),n.getStateName=function(){return gn},n}(dn);function yn(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var r=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(e,void 0!==n&&n<r?n:r)}return t(e,n)}var wn,An=function(){function t(){this.destroyHooks=[],this.isDestroyed=!1}var e=t.prototype;return e.addDestroyHook=function(){for(var e,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=this.destroyHooks).push.apply(e,yn(X,o.filter((function(e){if("function"!=typeof e&&!(e instanceof t))throw new Error("[Illegal Argument] Invalid destroy hook:"+e+", It's not a function!");return!0})))),function(){o.forEach((function(t){var e=n.destroyHooks.indexOf(t);e>-1&&n.destroyHooks.splice(e,1)}))}},e.destroy=function(){this.destroyHooks.forEach((function(e){"function"==typeof e?e():e instanceof t&&e.destroy()})),this.destroyHooks=[],this.isDestroyed=!0},t}(),bn=r.vendors.EventEmitter,Sn=function(t){function n(e){var n;return(n=t.call(this)||this).pdfViewer=e,n.eventEmitter=new bn,n.addDestroyHook((function(){n.eventEmitter.removeAllListeners()})),n.isLocked=!1,n.isStarted=!1,n}e(n,t);var r=n.prototype;return r.init=function(){},r.start=function(){this.isStarted=!0},r.cancel=function(){this.isStarted=!1},r.emit=function(t,e){this.isLocked||this.eventEmitter.emit(t,e)},r.on=function(t,e){var n=this;return this.eventEmitter.on(t,e),function(){n.eventEmitter.off(t,e)}},r.lock=function(){this.isLocked=!0},r.unlock=function(){this.isLocked=!1},n}(An),En=function(t){function n(e,n,r){var o;return(o=t.call(this,e)||this).target=n,o.hammer=new Hammer.Manager(n),o.hammer.add(new Hammer.Pan(r)),o.addDestroyHook((function(){o.hammer.destroy()})),o}return e(n,t),n.prototype.init=function(){var t,e,n=this,r=0,o=0,i=function(i){return function(a){if("start"===i){var s=(e=a.target).getBoundingClientRect();t={left:s.left,top:s.top}}n.eventEmitter.emit(i,{deltaX:a.deltaX-r,deltaY:a.deltaY-o,srcEvent:a.srcEvent}),"end"!==i&&"cancel"!==i||(e=null,r=0,o=0)}};this.hammer.on("panstart",i("start")),this.hammer.on("panmove",i("move")),this.hammer.on("panend",i("end")),this.hammer.on("pancancel",i("cancel"));var a=function(n){if(e){var i=e.getBoundingClientRect();r=i.left-t.left,o=i.top-t.top}};window.addEventListener("scroll",a,!0),this.addDestroyHook((function(){window.removeEventListener("scroll",a,!0)}));var s=function(t){var e=n.target.getBoundingClientRect(),r=t.clientX-e.left,o=t.clientY-e.top;n.eventEmitter.emit("mousemove",{x:r,y:o})};this.target.addEventListener("mousemove",s,!0),this.addDestroyHook((function(){n.target.removeEventListener("mousemove",s,!0)}))},n}(Sn),xn=4.396,Rn=function(){function t(t){this.component=t}var e=t.prototype;return e.numberToRGBAString=function(t){if("string"==typeof t)return t;var e=s(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},e.renderLineEnd=function(t,e,n,r,o,i){if(0!==r){var a=n.renderingData,s=a.fillColor;"line"===a.annotInfo.type&&(s=a.annotInfo.styleFillColor);var c=n.scale,u=Math.atan2(i.y-o.y,i.x-o.x);switch(t.save(),t.lineJoin="miter",t.beginPath(),r){case we.Square:this.renderSquareEnding(t,i,u,c,e);break;case we.Circle:this.renderCircleEnding(t,i,u,c,e);break;case we.Diamond:this.renderDiamondEnding(t,i,u,c,e);break;case we.OpenArrow:i=i.move(e/2,o),this.renderOpenArrowEnding(t,i,u,c,e);break;case we.ClosedArrow:i=i.move(e/2,o),this.renderClosedArrowEnding(t,i,u,c,e);break;case we.Butt:this.renderButtEnding(t,i,u,c,e);break;case we.ROpenArrow:this.renderROpenArrowEnding(t,i,u,c,e);break;case we.RClosedArrow:this.renderRClosedArrowEnding(t,i,u,c,e);break;case we.Slash:this.renderSlashEnding(t,i,u,c,e)}switch(r){case we.ClosedArrow:case we.RClosedArrow:case we.Diamond:case we.Square:case we.Circle:s&&(t.fillStyle=this.numberToRGBAString(s),t.fill())}t.stroke(),t.restore()}},e.renderSquareEnding=function(t,e,n,r,o){var i=xn*r+3.1*o,a=i/2;t.translate(e.x,e.y),t.rotate(n),t.moveTo(-a,-a),t.rect(-a,-a,i,i)},e.renderCircleEnding=function(t,e,n,r,o){var i=1.75862*r+2*o;t.translate(e.x,e.y),t.rotate(n),t.moveTo(i,0),t.arc(0,0,i,0,2*Math.PI)},e.renderDiamondEnding=function(t,e,n,r,o){var i=xn*r+3.1*o,a=i/2;t.translate(e.x,e.y),t.rotate(n+Math.PI/4),t.moveTo(-a,-a),t.rect(-a,-a,i,i)},e.renderOpenArrowEnding=function(t,e,n,r,o){var i=30/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!1)},e.renderClosedArrowEnding=function(t,e,n,r,o){var i=30/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!0)},e.renderButtEnding=function(t,e,n,r,o){var i=Math.PI/2,a=xn*r+3.1*o,s=new Se(e.x+a/2,e.y).rotate(Math.PI-n+i,e),c=s.rotate(Math.PI,e);t.moveTo(s.x,s.y),t.lineTo(c.x,c.y)},e.renderROpenArrowEnding=function(t,e,n,r,o){var i=150/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!1)},e.renderRClosedArrowEnding=function(t,e,n,r,o){var i=150/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!0)},e.renderArrow=function(t,e,n,r,o,i,a){void 0===a&&(a=!1);var s=xn*r+3.1*o,c=new Se(e.x+s,e.y),u=c.rotate(Math.PI-n+i,e),f=c.rotate(Math.PI-n-i,e);t.moveTo(u.x,u.y),t.lineTo(e.x,e.y),t.lineTo(f.x,f.y),a&&t.closePath()},e.renderSlashEnding=function(t,e,n,r,o){var i=60/180*Math.PI,a=xn*r+3.1*o,s=new Se(e.x+a/2,e.y).rotate(Math.PI-n+i,e),c=s.rotate(Math.PI,e);t.moveTo(s.x,s.y),t.lineTo(c.x,c.y)},t}(),Tn=Math.log(2),Pn=function(t){function n(e){var n;return(n=t.call(this,e)||this).helper=new Rn(e),n}e(n,t);var r=n.prototype;return r.doRender=function(t){var e=this,n=t.renderingData,r=n.page,o=n.annotInfo,i=o.borderInfo||{},a=t.scale,s=t.rotate,c=this.convertPointToPixel(i.width,a);if(0!=c||-1!=o.borderColor||o.fillColor){var u=this.canvas.getContext("2d");if(u.clearRect(0,0,this.canvas.width,this.canvas.height),u.save(),!this.component.needToggleView||!this.component.needToggleView()||this.component.shouldRenderByMouseEvent()){t.lineWidth=c,u.globalAlpha=o.opacity,u.lineWidth=c,0===c||!1===o.hasBorderColor?u.strokeStyle="transparent":u.strokeStyle=this.numberToRGBAString(o.color);var f=t.outerRect,l=this.convertToPathPoint(n.startPoint,a,f,r,s),h=this.convertToPathPoint(n.endPoint,a,f,r,s),d=n.leaderLinePoints,p=this.convertToPathPoint(d.start,a,f,r,s),v=this.convertToPathPoint(d.end,a,f,r,s);if(n.leaderLineOffset>0){var g=n.annotInfo.leaderLineLength>0?1:-1,m=this.convertPointToPixel(n.leaderLineOffset,a),y=l.move(m,h).rotate(g*Math.PI/2,l);h=h.move(m,l).rotate(g*-Math.PI/2,h),l=y,y=p.move(m,v).rotate(g*Math.PI/2,p),v=v.move(m,p).rotate(g*-Math.PI/2,v),p=y}var w=n.captionOffset,A=new Se(this.convertPointToPixel(w.x,a),-this.convertPointToPixel(w.y,a)),b=this.convertPointToPixel(n.leaderLineExtend,a);try{if(i.style===ge.DASHED){var S=i.dashes||[],E=i.dashPhase||0;u.setLineDash&&u.setLineDash(S.map((function(t){return e.convertPointToPixel(t,a)}))),u.lineDashOffset=this.convertPointToPixel(E,a)}u.beginPath(),this.renderLine(u,l,h,p,v,b),u.closePath(),u.stroke(),this.helper.renderLineEnd(u,c,t,n.startStyle,v,p),this.helper.renderLineEnd(u,c,t,n.endingStyle,p,v),this.renderLineCaption(u,t,c,p,v,A)}finally{u.restore()}}}},r.convertToPathPoint=function(t,e,n,r,o){void 0===o&&(o=0);var i=r.getDevicePoint([t.x,t.y],e,o),a=i[0],s=i[1];return new Se(a-n.left,s-n.top)},r.renderLine=function(t,e,n,r,o,i){if(t.moveTo(r.x,r.y),t.lineTo(o.x,o.y),t.moveTo(e.x,e.y),t.lineTo(r.x,r.y),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),i>0){var a=r.move(-i,e),s=o.move(-i,n);t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.moveTo(o.x,o.y),t.lineTo(s.x,s.y),t.moveTo(s.x,s.y)}},r.renderLineCaption=function(t,e,n,r,o,i){var a=e.renderingData,s=e.scale,c=a.annotInfo,u=c.content;if("string"==typeof u&&!((u=u.trim()).length<1)){var f,l,h=Math.atan2(o.y-r.y,o.x-r.x),d=r.distanceTo(o),p=r.move(.5*d,o),v=16*(f=s+1,Math.log(f)/Tn),g=16777215-(16777215&c.borderColor^10855845);t.save(),t.fillStyle=this.numberToRGBAString(g),t.font=v+"px bold Arial",t.textBaseline="middle",t.textAlign="center";var m=t.measureText(u),y=m.actualBoundingBoxAscent+m.actualBoundingBoxDescent,w=p.move(i.y,r).rotate(Math.PI/2,p),A=Math.PI/2;switch(A=i.y>0?-Math.PI/2:Math.PI/2,a.captionPos){case Ae:if(0!=i.y&&0!=i.x){l=w.move(i.x,p).rotate(A,w);break}l=w;break;case be:var b=p.move(.5*(n+y)-i.y,o).rotate(Math.PI/2,p);l=0!=i.x?b.move(i.x,p).rotate(A,w):b}if(a.hasCaption&&(t.translate(l.x,l.y),t.rotate(h),t.fillText(u,0,0),t.restore()),t.beginPath(),!(Math.abs(i.x)<d/2+m.width/2&&Math.abs(i.y)<y)){var S=i.x>0?-1:1,E=i.x+S*m.width/2;if(Math.abs(i.x)<=m.width/2){E=0;var x=y/2+4,R=i.y>0?1:-1,T=0;Math.abs(i.y)>y&&(T=i.y-R*x),w=p.move(T,r).rotate(Math.PI/2,p)}var P=w.move(E,p).rotate(A,w),C=P.move(Math.abs(E)+n/2,w);t.moveTo(p.x,p.y),t.lineTo(w.x,w.y),t.moveTo(C.x,C.y),t.lineTo(P.x,P.y),t.moveTo(P.x,P.y),t.closePath(),t.stroke()}}},r.setMarkUp=function(t,e){var n=en(this.component,t,e),r=n.renderingData,o=n.outerRect;t=n.scale,e=n.rotate;var i=r.page,a=r.annotInfo,s=a.borderInfo||{},c=this.convertPointToPixel(s.width,t),u=this.canvas.getContext("2d");u.clearRect(0,0,this.canvas.width,this.canvas.height),u.save(),u.lineWidth=c,u.strokeStyle=this.numberToRGBAString(a.color);var f=this.convertToPathPoint(r.startPoint,t,o,i,e),l=this.convertToPathPoint(r.endPoint,t,o,i,e),h=r.leaderLinePoints,d=this.convertToPathPoint(h.start,t,o,i,e),p=this.convertToPathPoint(h.end,t,o,i,e);if(r.leaderLineOffset>0){var v=r.annotInfo.leaderLineLength>0?1:-1,g=this.convertPointToPixel(r.leaderLineOffset,t),m=f.move(g,l).rotate(v*Math.PI/2,f);l=l.move(g,f).rotate(v*-Math.PI/2,l),f=m,m=d.move(g,p).rotate(v*Math.PI/2,d),p=p.move(g,d).rotate(v*-Math.PI/2,p),d=m}var y=this.convertPointToPixel(r.leaderLineExtend,t);u.beginPath(),this.renderLine(u,f,l,d,p,y),u.closePath(),nn(u,f),nn(u,l)},n}(ve),Cn=we,In=function(t){function r(e){var n,r=(n=t.call(this,e)||this).annotationInfo;switch(n.annotationInfo.endStyle&&(r.endingStyle=n.annotationInfo.endStyle),r.intent){case me.LINE_ARROW:r.endingStyle===Cn.None&&(r.endingStyle=Cn.OpenArrow);break;case me.LINE_DIMENSION:r.startStyle===Cn.None&&(r.startStyle=Cn.OpenArrow),r.endingStyle===Cn.None&&(r.endingStyle=Cn.OpenArrow)}return r.hasCaption=r.enableCaption,r.leaderLinePoints.start=r.startPoint,n}e(r,t);var o=r.prototype;return o.setRect=function(t){this.deviceRect=t;var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);var r=this.pageRender.rotate;this.pdfRect=this.page.reverseDeviceRect(t,this.scale,r),this.eContainer.style.cssText+="\n            width: "+e+"px;\n            height: "+n+"px;\n        "},o.generateApRenderer=function(){return new Pn(this)},o.getType=function(){return"line"},o.getStartPoint=function(){return this.annotationInfo.startPoint},o.getEndPoint=function(){return this.annotationInfo.endPoint},o.setEndPoint=function(t){var e=this.page.reverseDevicePoint([t.x,t.y],this.scale,this.rotate),n=e[0],r=e[1];this.annotationInfo.endPoint={x:n,y:r},this.annotationInfo.leaderLinePoints.end=this.annotationInfo.endPoint;var o=this.annotationInfo.startPoint,i=o.x,a=o.y,s=this.page.getDevicePoint([i,a],this.scale,this.rotate),c=s[0],u=s[1];this.setRect({left:c,top:u,right:t.x,bottom:t.y}),this.annotationInfo.intent==me.LINE_DIMENSION&&this.calculateLeaderLinePoints()},o.calculateLeaderLinePoints=function(){var t=this.getStartPoint(),e=this.getEndPoint(),n=e.y-t.y,r=e.x-t.x,o=-1/(n/r),i=Math.atan(o),a=t.y<=e.y?1:-1,s=this.annotationInfo.leaderLineLength,c=a*Math.cos(i)*s,u=a*Math.sin(i)*s,f={x:t.x+c,y:t.y+u},l=e,h=this.pdfRect;h.left<f.x&&f.x<h.right&&h.bottom<f.y&&f.y<h.top?l={x:e.x+c,y:e.y+u}:(f={x:t.x-c,y:t.y-u},l={x:e.x-c,y:e.y-u}),this.annotationInfo.leaderLinePoints.start=f,this.annotationInfo.leaderLinePoints.end=l},o.getRenderingData=function(){return n(n({},t.prototype.getRenderingData.call(this)),this.annotationInfo)},o.getOuterDeviceRect=function(t,e){return Ne.on(this.getDeviceRect(t,e)).expand(50).extract()},o.getDefaultAnnotInfo=function(){var e={x:0,y:0},r={x:0,y:0};return n(n({},t.prototype.getDefaultAnnotInfo.call(this)),{startPoint:e,endPoint:r,leaderLineLength:15,leaderLineExtend:5,captionOffset:{x:0,y:0},enableCaption:!1,leaderLinePoints:{start:e,end:r},leaderLineOffset:0,captionPos:Ae,content:"",startStyle:Ot,endingStyle:Ot})},o.apply=function(){var e=this;return t.prototype.apply.call(this).then((function(t){return"LineDimension"===e.annotationInfo.intent?e.page.getMeasureScaleRatio().then((function(n){if(n&&n.scale){var r=e.pdfViewer.getStore().getCurrentValue("measurementData"),o=Qe(),i=pe(r.displayUnit.name)?e.pdfViewer.i18n.t("measurement.units."+r.displayUnit.name):r.displayUnit.name;return t[0].setContent(o+parseFloat(r.distance).toFixed(2)+" "+i).then((function(e){return t}))}return t})):t}))},r}(qe);o(9600);!function(t){t.EndPoint="end-point",t.MidPoint="mid-point",t.IntersectionPoint="intersection-point",t.NearestPoint="nearest-point"}(wn||(wn={}));var _n=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.arc(n/2,n/2,2*Math.PI,0,360),t.stroke()},t}(),Dn=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.moveTo(n/2,0),t.lineTo(0,n),t.lineTo(n,n),t.closePath(),t.stroke()},t}(),Ln=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.rect(0,0,n,n),t.stroke()},t}(),kn=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.moveTo(0,0),t.lineTo(n,n),t.moveTo(0,n),t.lineTo(n,0),t.stroke()},t}(),Mn=function(t){function n(e){var n;return(n=t.call(this)||this).container=e,n.size=16,n.renderer=new _n,n.canvas=document.createElement("canvas"),n.canvas.classList.add("fv__viewer-snapped-point"),n.addDestroyHook((function(){n.canvas.parentElement===n.container&&n.container.removeChild(n.canvas)})),n.canvas.width=n.size,n.canvas.height=n.size,n}e(n,t);var r=n.prototype;return r.setRenderer=function(t){this.renderer=new t,this.redraw()},r.setSize=function(t){this.size=t,this.canvas.width=t,this.canvas.height=t,this.redraw()},r.setPosition=function(t,e){!function(t,e){var n=[],r=getComputedStyle(t);if("string"==typeof e){var o={};e.split(/;[\r\n\s]*/).forEach((function(t){var e=t.split(/\s*:\s*/),n=e[0],r=e[1];o[n]=r})),e=o}for(var i in e)r[i]!==e[i]&&n.push(i+":"+e[i]);n.length>0&&(t.style.cssText+=n.join(";"))}(this.canvas,{left:t+"px",top:e+"px",margin:.5*-this.size+"px "+.5*-this.size+"px"})},r.show=function(t){switch(this.container.appendChild(this.canvas),t){case wn.MidPoint:this.setRenderer(Dn);break;case wn.IntersectionPoint:this.setRenderer(kn);break;case wn.NearestPoint:this.setRenderer(Ln);break;default:this.setRenderer(_n)}},r.hide=function(){this.canvas.parentElement===this.container&&this.container.removeChild(this.canvas)},r.redraw=function(){if(this.renderer){var t=this.canvas.getContext("2d");t&&this.renderer.render(t)}},n}(An);function On(t,e,n){return void 0===n&&(n=.01),Math.abs(t-e)<n}function Nn(t,e,n){return void 0===n&&(n=.01),On(t.x,e.x)&&On(t.y,e.y)}var Hn=r.stateHandler,Vn=r.ViewerEvents,jn=Hn.IStateHandler,Un=r.shared,Fn=(Un.DebouncePromiseQueue,Un.keyboardStatus),Bn=Un.ThrottleAsyncTaskExecutor,Yn=(r.Consts.LineEndingStyle,Hn.StateHandlerConsts.STATE_HANDLER_CREATE_LINE),Xn=Hn.StateHandlerUtils.getDevicePagePoint,Gn=r.keyboard,$n=Gn.BuiltinCommand,zn=Gn.BuiltinShortcutContext,Wn=function(t){function r(e,n,r){var o;return(o=t.call(this,e)||this).startStyle=n,o.endStyle=r,o.cursorStyle="fv__cursor-crosshair",o.executor=new Bn(20),o}e(r,t),r.getStateName=function(){return Yn};var o=r.prototype;return o.createInteractionTool=function(t,e){return new En(this.pdfViewer,t,e)},o.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r=n.get(0);this.snappedPointAssistant=new Mn(r);var o,i=this.interaction=this.createInteractionTool(r,{direction:Hammer.DIRECTION_ALL});i.init();var a,s=function(){return i.on("mousemove",(function(t){e.executor.exec((function(){return e.getSnappedPoint(t).then((function(n){Nn(t,n)?(e.snappedPointAssistant.hide(),o=null):(e.snappedPointAssistant.show(n.type),e.snappedPointAssistant.setPosition(n.x,n.y),o=n)}))}))}))};this.offMouseMoveEvent=s();var c=!1,u=this.pdfViewer.getKeyboard(),f=function(){};u.withContext(zn.CREATING_ANNOTATION,(function(t){e.offCancelEvent=t.keyup($n.CANCEL_CREATING_ANNOTATION_OPERATION,(function(){f(),e.cancel(),e.interaction.cancel(),c=!0}),{interceptors:[function(t,e){c||e(t)}]})})),i.on("start",(function(t){if(e.offMouseMoveEvent(),f=u.activeContext(zn.CREATING_ANNOTATION),c=!1,o)a=[o.x,o.y];else{var n=Xn(r,t);a=[n.x,n.y]}var i=e.pageRender.page.reverseDevicePoint(a,e.pageRender.scale,e.pageRender.getRotation()),s=i[0],l=i[1];e.start(s,l)})),i.on("move",(function(t){if(!c){var n=function(t,e){if(Fn.isShift){var n=Math.sqrt(t*t+e*e),r=Math.atan2(e,t),o=.25*Math.PI,i=Math.round(r/o)*o;t=n*Math.cos(i),e=n*Math.sin(i)}return[t,e]}(t.deltaX,t.deltaY),r=n[0],o=n[1];e.adjust(e.fakeAnnotation,{x:a[0]+r,y:a[1]+o});var i=e.fakeAnnotation.pdfRect,s=e.fakeAnnotation.annotationInfo,u=s.startPoint,f=s.endPoint;e.pdfViewer.eventEmitter.emit("collab-creating-op",{type:e.type,page:e.pageRender.page.getIndex(),rect:i,points:[u,f]})}})),i.on("end",(function(t){if(!c)return f(),e.offMouseMoveEvent=s(),e.end()})),i.on("cancel",(function(t){c||(e.pdfViewer.eventEmitter.emit("collab-creating-op",{cancle:1,page:e.pageRender.index}),f(),e.cancel(),e.offMouseMoveEvent=s())})),this.__removeScrollEventListener=this.pdfViewer.getScrollWrap().addScrollEventListener((function(){if(!c&&e.fakeAnnotation){var t=e.fakeAnnotation.getStartPoint();a=e.pageRender.page.getDevicePoint([t.x,t.y],e.pageRender.scale,e.pageRender.getRotation())}})),this.__removeZoomToSuccessEventListener=this.pdfViewer.addEventListener(Vn.zoomToSuccess,(function(){if(!c&&e.fakeAnnotation){var t=e.pageRender.scale;e.fakeAnnotation.zoomTo(t),e.fakeAnnotation.draw()}}))},o.correctCoord=function(t,e){var n=this.pageRender.getScale(),r=t.getPxWidth()*n,o=t.getPxHeight()*n;return[Math.max(0,Math.min(r,e[0])),Math.max(0,Math.min(o,e[1]))]},o.start=function(t,e,n){var r;void 0===n&&(n="Line");var o=!0,i="";if(r=this.pdfViewer.customs.getMeasuringConfig){var a=r();a.hasOwnProperty("defaultLeader")&&(o=a.defaultLeader),"custom"==a.labelType&&(i=a.label)}return this.fakeAnnotation=new In({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({flags:4,label:i,startPoint:{x:t,y:e},endPoint:{x:t+1,y:e+1},startStyle:this.startStyle,endingStyle:this.endStyle,leaderLineLength:o?15:0,leaderLineExtend:o?5:0,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects."+n)})})},o.createAnnotJson=function(t){return n(t,this.pdfViewer.getDefaultAnnotConfig()("line")),t},o.getSnappedPoint=function(t){var e=this;return this.pageRender.getPDFPage().then((function(n){if(!n)return t;var r=e.pdfViewer.getSnapMode(e.constructor.getStateName());if(r&&r.length>0){var o=n.reverseDevicePoint([t.x,t.y],e.pageRender.scale,e.pageRender.rotate),i=o[0],a=o[1];return n.getSnappedPoint({x:i,y:a},r).then((function(t){var r=n.getDevicePoint([t.x,t.y],e.pageRender.scale,e.pageRender.rotate);return{x:r[0],y:r[1],type:t.type}}))}return t}))},o.adjust=function(t,e){var n=this;this.executor.exec((function(){return n.getSnappedPoint(e).then((function(r){Nn(e,r)?n.snappedPointAssistant.hide():(n.snappedPointAssistant.setPosition(r.x,r.y),n.snappedPointAssistant.show(r.type)),t.setEndPoint(r),t.draw()}))}))},o.end=function(){var t=this;this.fakeAnnotation&&this.executor.waitForLastTask().then((function(){t.snappedPointAssistant.hide();var e=t.fakeAnnotation.apply().then((function(e){if(t.pdfViewer.config.showCommentList){var n=e[e.length-2];t.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}}));return t.fakeAnnotation=null,e}))},o.cancel=function(){this.fakeAnnotation&&(this.pdfViewer.eventEmitter.emit("collab-creating-op",{cancle:1,page:this.pageRender.index}),this.snappedPointAssistant.hide(),this.executor.cancel(),this.pdfViewer.eventEmitter.emit(Vn.cancelAddAnnot),this.fakeAnnotation.destroy(),this.fakeAnnotation=null)},o.destroyPageHandler=function(){this.offMouseMoveEvent(),this.snappedPointAssistant.destroy(),this.executor.cancel(),this.interaction&&this.interaction.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.offCancelEvent&&this.offCancelEvent(),this.__removeZoomToSuccessEventListener&&this.__removeZoomToSuccessEventListener(),this.__removeScrollEventListener&&this.__removeScrollEventListener()},o.out=function(){this.destroyPageHandler()},r}(jn),qn=r.stateHandler,Jn=(r.ViewerEvents,qn.StateHandlerConsts.STATE_HANDLER_CREATE_ARROW),Kn=r.Consts.LineEndingStyle,Qn=function(t){function r(e){return t.call(this,e,Kn.None,Kn.OpenArrow)||this}return e(r,t),r.getStateName=function(){return Jn},r.prototype.createAnnotJson=function(t){return t.intent="LineArrow",t.subject=this.pdfViewer.i18n.t("viewer_:annotSubjects.Arrow"),n(t,this.pdfViewer.getDefaultAnnotConfig()("line","LineArrow")),t},r}(Wn);o(7727);function Zn(t){if("clientX"in t)return t.clientX;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientX;case"touchend":case"touchcancel":return t.changedTouches[0].clientX}}function tr(t){if("clientY"in t)return t.clientY;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientY;case"touchend":case"touchcancel":return t.changedTouches[0].clientY}}function er(){}var nr,rr,or,ir,ar,sr,cr,ur,fr,lr={IDLE:"idle",CONSTRUCT:"construct",CREATING:"creating"},hr=(o(5003),{}),dr="__lazy__",pr=function(){function t(){}return t.properties=function(e,n){for(var r in void 0===n&&(n={}),n){var o=n[r];"function"==typeof o&&t.property(e,r,o)}},t.property=function(t,e,n){var r=hr;Object.getOwnPropertyDescriptor(t,dr)||Object.defineProperty(t,dr,{value:{},enumerable:!1,configurable:!1});var o=t[dr][e]||{};t[dr][e]=o,o.initialized=!1;var i=!1;Object.defineProperty(t,e,{get:function(){if(!o.initialized){if(i)throw new Error("The lazy property is not initialized and cannot be accessed at this time");i=!0,r=n(),o.initialized=!0,i=!1}return r},enumerable:!0,configurable:!0})},t.loadProperty=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);if(n&&n.get)return n.get.call(t)},t.release=function(t,e){Object.defineProperty(t,e,{get:function(){},enumerable:!1,configurable:!0})},t.reset=function(t,e){var n=t[dr];if(n){var r=n[e];r&&(r.initialized=!1)}},t.isPropertyIntialized=function(t,e){var n=t[dr];return!!(n&&n[e]&&n[e].initialized)},t.hasProperty=function(t,e){var n=t[dr];return!(!n||!(e in n))},t.notNullProperty=function(e,n,r){return t.property(e,n,(function(){var o=r();return null==o&&t.reset(e,n),o}))},t.get=function(e,n,r){t.isPropertyIntialized(e,n)&&r(e[n])},t}(),vr=(rr=" -webkit- -moz- -o- -ms- ".split(" "),!!("ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch)||(nr=["(",rr.join("touch-enabled),("),"heartz",")"].join(""),!!window.matchMedia&&window.matchMedia(nr).matches)),gr=navigator.userAgent.toLowerCase(),mr=(/macintosh|mac os x/.test(gr),/ipad|iphone|ipod/.test(gr)),yr=(/iphone/.test(gr),/ipad/.test(gr),/ipod/.test(gr),/android/.test(gr)),wr=/blackberry/.test(gr),Ar=/webos/.test(gr),br=/silk|kindle/.test(gr),Sr=/aliapp/.test(gr),Er=/teamsmobile-android/.test(gr),xr=!Sr&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(gr),Rr=((!xr||Er)&&/mobile/.test(gr),!/(MI(.*|\s*)PAD).*/i.test(gr)&&/MI(\s+|\d+?|HM|xiaomi).*/i.test(gr),/HUAWEI/i.test(navigator.userAgent),/Linux/i.test(gr)),Tr=(!Rr&&/Windows(\s+NT)?/i.test(gr),/MacIntosh|(mac os)/i.test(gr),navigator.userAgent.toLowerCase()),Pr=/opera|opr/.test(Tr),Cr=/msie/.test(Tr),Ir=/trident/.test(Tr),_r=/\sapplewebkit\//.test(Tr),Dr=/chrome/.test(Tr),Lr=/safari/.test(Tr),kr=/firefox/.test(Tr),Mr=/edg\//.test(Tr),Or=(Ir||Cr)&&!Pr&&"msSaveBlob"in navigator,Nr=(Or&&(!!(or=Tr.match(/msie ([\d\.]+)/))&&parseInt(or[1])),!Cr&&Ir&&!Pr),Hr=(Tr.indexOf("edge"),Pr),Vr=_r,jr=!Hr&&Dr&&!!window.chrome&&Mr,Ur=/crios/.test(Tr)||!Hr&&Dr&&!!window.chrome&&!Mr,Fr=!/huawei/.test(Tr)&&!Hr&&Lr&&!Dr,Br=(navigator.product,!Ur&&!Hr&&!Fr&&kr),Yr=/maxthon/.test(Tr),Xr=(document.CompactMode,/tencenttraveler/.test(Tr)||/qqbrowser/.test(Tr)),Gr=(/wechat/.test(Tr),/metasr/.test(Tr)||/sogou/.test(Tr)),$r=(/baidubrowser/.test(Tr),/ucbrowser/.test(Tr)),zr=/liebao/.test(Tr),Wr=/miuibrowser/.test(Tr),qr=(/huaweibrowser/.test(Tr)||/huaweialp/.test(Tr),/crios/.test(Tr));(function(){if(Xr||$r||Gr||Wr||zr||Yr)return!1;if(-1===Tr.indexOf("chrome"))return!1;var t=function(t,e){var n=navigator.mimeTypes;for(var r in n)if(n[r][t]==e)return!0;return!1}("type","application/vnd.chromium.remoting-viewer");window.chrome})(),!!document.documentMode&&document.documentMode,document.documentMode,document.documentMode,document.documentMode;!function(t){t[t.DOWN=0]="DOWN",t[t.UP=1]="UP",t[t.MOVE=2]="MOVE"}(fr||(fr={}));var Jr=((ir={})[fr.DOWN]=["MSPointerDown"],ir[fr.MOVE]=["MSPointerMove"],ir[fr.UP]=["MSPointerUp"],ir),Kr=((ar={})[fr.DOWN]=["pointerdown"],ar[fr.MOVE]=["pointermove"],ar[fr.UP]=["pointerup"],ar),Qr=((sr={})[fr.DOWN]=["pointerdown","mousedown"],sr[fr.MOVE]=["pointermove","mousemove"],sr[fr.UP]=["pointerup","mouseup"],sr),Zr=((cr={})[fr.DOWN]=["pointerdown","touchstart"],cr[fr.MOVE]=["pointermove","touchmove"],cr[fr.UP]=["pointerup","touchend"],cr),to=((ur={})[fr.DOWN]=["mousedown","touchstart"],ur[fr.MOVE]=["mousemove","touchmove"],ur[fr.UP]=["mouseup","touchend"],ur),eo={};function no(t,e,n,r){var o,i=eo[e],a=0,s=i.map((function(e){var i,c=function(e){o!==e.type&&Date.now()-a<160?i():(o=e.type,r&&r.once&&i(),n.call(t,function(t){var e={native:t,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,target:t.target,preventDefault:function(){return t.preventDefault()},stopPropagation:function(){return t.stopPropagation()}};if(window.TouchEvent&&t instanceof window.TouchEvent){var n="touchend"===t.type||"touchcancel"===t.type?t.changedTouches[0]:t.touches[0];e.clientX=n.clientX,e.clientY=n.clientY,e.pageX=n.pageX,e.pageY=n.pageY,e.screenX=n.screenX,e.screenY=n.screenY,e.x=n.clientX,e.y=n.clientY,e.bubbles=t.bubbles,e.relatedTarget=n.target}else(t instanceof MouseEvent||t instanceof PointerEvent)&&(e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.x=t.x||t.clientX,e.y=t.y||t.clientY,e.relatedTarget=t.relatedTarget,e.button=t.button,e.buttons=t.buttons,e.bubbles=t.bubbles);return e}(e)),a=Date.now())};return i=function(){var n=s.indexOf(i);-1!==n&&(t.removeEventListener(e,c,r),s.splice(n,1))},t.addEventListener(e,c,r),i}));return function(){s.forEach((function(t){return t()}))}}function ro(t){if(Or){if(!Nr)return Jr[t]}else{if(Fr)return Qr[t];if(yr)return vr?Zr[t]:to[t]}return Kr[t]}pr.property(eo,fr.DOWN,(function(){return ro(fr.DOWN)})),pr.property(eo,fr.MOVE,(function(){return ro(fr.MOVE)})),pr.property(eo,fr.UP,(function(){return ro(fr.UP)}));var oo=function(t){function n(e,n,r){var o;return(o=t.call(this,e)||this).actionName=r,o.targetElement=n,o.status=lr.IDLE,o.lastMoveData={},o}e(n,t);var r=n.prototype;return r.startCreating=function(){this.status=lr.CREATING},r.cancel=function(){this.status=lr.IDLE},r._addEventListener=function(t,e,n,r){return t.addEventListener(e,n,r),function(){t.removeEventListener(e,n,r)}},r.init=function(){var t=this,e=new Hammer.Manager(this.targetElement);e.add(new Hammer.Tap({event:"doubletap",taps:2,posThreshold:100,time:296}),new Hammer.Pan({direction:Hammer.DIRECTION_ALL}));var n=!0,r=null,o=er,i=no(this.targetElement,fr.DOWN,(function(e){if(0===e.button){var i=e.clientX,a=e.clientY;if(r={x:e.clientX,y:e.clientY},t.status===lr.IDLE){o();var s=setTimeout((function(){t.status=lr.CONSTRUCT,t.emit("start",{clientX:i,clientY:a,srcEvent:e.native})}),300);o=function(){clearTimeout(s)}}else if(t.status===lr.CREATING){o(),n=!1;var c=setTimeout((function(){t.emit("add-point",{clientX:i,clientY:a,srcEvent:e.native}),n=!0}),300);o=function(){clearTimeout(c)}}}})),a=er;vr&&(a=this._addEventListener(this.targetElement,"touchstart",(function(t){t.touches.length>1&&o(),qr&&t.preventDefault()})));var s=no(this.targetElement,fr.MOVE,(function(e){if(vr&&r&&(Math.abs(e.clientX-r.x)>25||Math.abs(e.clientY-r.y)>25)&&o(),!t.isLocked&&n){if(t.status===lr.IDLE){var i=t.targetElement.getBoundingClientRect(),a=e.clientX-i.left,s=e.clientY-i.top;t.emit("mousemove",{x:a,y:s})}if(t.status===lr.CREATING&&!vr){var c=e.clientX,u=e.clientY;t.emit("move",t.lastMoveData={clientX:c,clientY:u,srcEvent:e.native})}}}));e.on("doubletap",(function(e){n=!0;var r=e.srcEvent;o(),t.lastMoveData={clientX:Zn(r),clientY:tr(r),srcEvent:e},c()}));var c=function(){t.status===lr.CREATING&&(t.status=lr.IDLE,t.unlock(),t.emit("end",t.lastMoveData),t.lastMoveData=null)},u=this.pdfViewer.getStore().subscribe(this.actionName,(function(e){switch(e){case"complete":c();break;case"cancel":t.status===lr.CREATING&&(t.status=lr.IDLE,t.unlock(),t.emit("cancel"));break;case"continue":t.startCreating()}}));this.addDestroyHook((function(){a(),e.destroy(),u(),i(),s()}))},n}(Sn);function io(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var r=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(e,void 0!==n&&n<r?n:r)}return t(e,n)}var ao=r.stateHandler,so=r.Log,co=r.ViewerEvents,uo=ao.IStateHandler,fo=so.LoggerFactory,lo=r.shared,ho=lo.DebouncePromiseQueue,po=(lo.getClientX,lo.getClientY,lo.keyboardStatus),vo=lo.ThrottleAsyncTaskExecutor,go=r.DeviceInfo.isTouchDevice,mo=r.keyboard,yo=mo.BuiltinCommand,wo=mo.BuiltinShortcutContext,Ao=(fo.getLogger("creation/complexshape/state"),function(t){function n(e,n){var r;return(r=t.call(this,e)||this).type=n,r.cursorStyle="fv__cursor-crosshair",r.executor=new vo(20,!0),r}e(n,t);var r=n.prototype;return r.createInteractionTool=function(t){return new oo(this.pdfViewer,t,"create-complex-shape")},r.syncAddingAnnot=function(t){void 0===t&&(t=!1);var e=this.fakeAnnotation,n=e.pdfRect,r=e.vertexes,o=e.lastPoint;this.pdfViewer.eventEmitter.emit("collab-creating-op",t?{cancle:t,page:this.pageRender.index}:{type:this.type,page:this.pageRender.page.getIndex(),rect:n,points:[].concat(io(X,r),[o]),closePath:"polygon"==this.type})},r.pageHandler=function(t){var e=this;this.pageRender=t,this.destroyPageHooks=[];var n=t.$handler;n.addClass(this.cursorStyle);var r=n.get(0);this.snappedPointAssistant=new Mn(r),this.interaction=this.createInteractionTool(r),this.interaction.init();var o=new ho,i=this.pdfViewer.getKeyboard(),a=function(){},s=function(){a=i.activeContext(wo.CREATING_ANNOTATION)};function c(t,e,n){if(po.isShift){var r=t.getDeviceVertexes();if(r.length>=1){var o=r[r.length-1],i=e-o.x,a=n-o.y,s=Math.sqrt(i*i+a*a),c=Math.atan2(a,i),u=.25*Math.PI,f=Math.round(c/u)*u;return i=s*Math.cos(f),a=s*Math.sin(f),{deviceX:o.x+i,deviceY:o.y+a}}}return{deviceX:e,deviceY:n}}i.withContext(wo.CREATING_ANNOTATION,(function(t){t.keyup(yo.CANCEL_CREATING_ANNOTATION_OPERATION,(function(){a(),e.interaction.unlock(),e.interaction.cancel(),e.cancel()}))})),"polygon"==this.type||"polyline"==this.type||this.pdfViewer.eventEmitter.addListener(co.toolbarTabsClicked,(function(){e.out()})),this.interaction.on("start",(function(t){var n=t.clientX,o=t.clientY;e.pageRender.annotsRender.unActiveAnnot();var i=r.getBoundingClientRect(),c=n-i.left,u=o-i.top;a(),s(),e.getSnappedPoint(c,u).then((function(t){e.fakeAnnotation=e.create(t.deviceX,t.deviceY),e.interaction.startCreating()}))})),this.interaction.on("add-point",(function(t){var n=t.clientX,o=t.clientY,i=r.getBoundingClientRect(),a=n-i.left,s=o-i.top,u=c(e.fakeAnnotation,a,s);e.getSnappedPoint(u.deviceX,u.deviceY).then((function(t){e.addPoint(e.fakeAnnotation,t)}))})),this.interaction.on("move",(function(t){var n=t.clientX,o=t.clientY,i=r.getBoundingClientRect(),a=n-i.left,s=o-i.top;e.executor.exec((function(){var t=c(e.fakeAnnotation,a,s);return e.getSnappedPoint(t.deviceX,t.deviceY).then((function(n){Nn({x:t.deviceX,y:t.deviceY},{x:n.deviceX,y:n.deviceY})?e.snappedPointAssistant.hide():(e.snappedPointAssistant.show(n.type),e.snappedPointAssistant.setPosition(n.deviceX,n.deviceY)),e.adjust(e.fakeAnnotation,n),e.syncAddingAnnot()}))}))})),this.interaction.on("mousemove",(function(t){e.mousemove(t)})),this.interaction.on("end",(function(t){if(e.canBeCompleted(e.fakeAnnotation)){a();var n=r.getBoundingClientRect(),o=c(e.fakeAnnotation,t.clientX-n.left,t.clientY-n.top);e.executor.waitForLastTask().finally((function(){e.getSnappedPoint(o.deviceX,o.deviceY).then((function(t){-1==e.end(e.fakeAnnotation,t)&&(s(),e.interaction.startCreating())}))}))}else e.interaction.startCreating()})),this.interaction.on("cancel",(function(){a(),e.cancel(),e.syncAddingAnnot(!0)}));var u=function(t){e.fakeAnnotation&&(e.fakeAnnotation.zoomTo(t),e.fakeAnnotation.draw())};this.destroyPageHooks.push((function(){return o.end()}),this.pdfViewer.addEventListener(co.zoomToSuccess,(function(){u(e.pageRender.scale)})),this.pdfViewer.addEventListener(co.changeViewModeSuccess,(function(t,n){u(e.pageRender.scale)})),this.pdfViewer.addEventListener(co.fitWidthResizeViewport,(function(){u(e.pageRender.scale)})))},r.getSnappedPoint=function(t,e){var n=this;return this.pageRender.getPDFPage().then((function(r){var o=n.pdfViewer.getSnapMode(n.constructor.getStateName());if(o&&o.length>0){var i=r.reverseDevicePoint([t,e],n.pageRender.scale,n.pageRender.rotate),a=i[0],s=i[1];return r.getSnappedPoint({x:a,y:s},o).then((function(t){var e=r.getDevicePoint([t.x,t.y],n.pageRender.scale,n.pageRender.rotate);return{deviceX:e[0],deviceY:e[1],type:t.type}}))}return{deviceX:t,deviceY:e}}))},r.create=function(t,e){throw new Error("not implemented!")},r.addPoint=function(t,e){var n=e.deviceX,r=e.deviceY;t.addPoint(n,r),t.draw()},r.mousemove=function(t){var e=this;this.executor.exec((function(){return e.getSnappedPoint(t.x,t.y).then((function(n){var r=n.deviceX,o=n.deviceY,i=n.type;Nn(t,{x:r,y:o})?e.snappedPointAssistant.hide():(e.snappedPointAssistant.setPosition(r,o),e.snappedPointAssistant.show(i))}))}))},r.adjust=function(t,e){var n=e.deviceX,r=e.deviceY;t.setLastPoint(n,r),t.draw()},r.end=function(t,e){var n=this;this.creatingState=0,e&&!go&&t.addPoint(e.deviceX,e.deviceY),t.apply().then((function(t){if(n.pdfViewer.config.showCommentList){var e=t[t.length-2];n.pageRender.annotsRender.getAnnotRender(e.getId()).component.showReplyDialog()}})),this.fakeAnnotation=null},r.cancel=function(){this.fakeAnnotation&&(this.syncAddingAnnot(!0),this.executor.cancel(),this.interaction.cancel(),this.fakeAnnotation.destroy(),this.fakeAnnotation=null)},r.canBeCompleted=function(){return!0},r.createAnnotJson=function(t,e){return t},r.docHandler=function(t){go?t.enableDragToScroll():t.disableDragToScroll()},r.destroyPageHandler=function(){this.snappedPointAssistant.destroy(),this.destroyPageHooks&&this.destroyPageHooks.forEach((function(t){return t()})),this.pageRender.$handler.removeClass(this.cursorStyle),this.fakeAnnotation&&(this.interaction.status!==lr.IDLE&&this.pdfViewer.eventEmitter.emit(co.cancelAddAnnot),this.fakeAnnotation.destroy(),this.fakeAnnotation=null),this.interaction.destroy(),this.offCancelEvent&&this.offCancelEvent()},r.out=function(){this.destroyPageHandler()},n}(uo)),bo=function(t){function n(e,n){var r;return void 0===n&&(n=!1),(r=t.call(this)||this).closing=n,e.length>1&&e.reduce((function(t,e,n){return r.addSegment(new So(t,e,1===n)),e})),r}return e(n,t),n.prototype.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),this.closing&&t.closePath()},n}(xe),So=function(t){function n(e,n,r){var o;return void 0===r&&(r=!1),(o=t.call(this,e,n)||this).atTheStart=r,o}return e(n,t),n.prototype.render=function(t){this.atTheStart&&t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y)},n}(Re);function Eo(t,e,n){void 0===n&&(n=5),t.fillStyle="#fff",e.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,n,0,360),t.stroke(),t.fill()}))}var xo=function(t){function n(e){var n;return(n=t.call(this,e)||this).helper=new Rn(e),n}e(n,t);var r=n.prototype;return r.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polyline")},r.doRender=function(t){var e=t.renderingData,n=e.annotInfo,r=n.borderInfo||{},o=t.scale,i=t.rotate,a=this.canvas.getContext("2d"),s=this.convertPointToPixel(0==r.width?.5:r.width,o);if((0!=s||-1!=n.borderColor||n.fillColor)&&(a.clearRect(0,0,this.canvas.width,this.canvas.height),!this.component.needToggleView||!this.component.needToggleView()||this.component.shouldRenderByMouseEvent())){var c=e.page,u=t.innerRect,f=e.vertexes.map((function(t){var e=c.getDevicePoint([t.x,t.y],o,i),n=e[0],r=e[1];return new Se(n-u.left,r-u.top)}));t.vertexes=f,a.save(),t.lineWidth=s,a.globalAlpha=n.opacity,a.lineWidth=s,0===s||!1===n.hasBorderColor?a.strokeStyle="transparent":a.strokeStyle=this.numberToRGBAString(n.color);try{switch(r.style){case ge.DASHED:case ge.SOLID:this.renderSolid(a,n,t);case ge.BEVELED:}var l=f[f.length-1],h=f[f.length-2],d=f[0],p=f[1];this.helper.renderLineEnd(a,s,t,e.startStyle,p,d),this.helper.renderLineEnd(a,s,t,e.endingStyle,h,l)}finally{a.restore()}}},r.renderSolid=function(t,e,n){var r=this,o=n.scale,i=e.borderInfo,a=i.dashes||[],s=i.dashPhase||0;i.style===ge.DASHED&&(t.setLineDash&&t.setLineDash(a.map((function(t){return r.convertPointToPixel(t,o)}))),t.lineDashOffset=this.convertPointToPixel(s,o)),new bo(n.vertexes,!1,5).render(t),t.stroke();try{if(!vr)return;void 0===n.renderingData.annotInfo.id&&Eo(t,n.vertexes)}catch(t){}},r.setMarkUp=function(t,e){var n=en(this.component,t,e),r=n.renderingData,o=n.innerRect;t=n.scale,e=n.rotate;var i=r.annotInfo,a=this.canvas.getContext("2d"),s=r.page;a.strokeStyle=this.numberToRGBAString(i.color),r.vertexes.map((function(n){var r=s.getDevicePoint([n.x,n.y],t,e),i=r[0],a=r[1];return new Se(i-o.left,a-o.top)})).forEach((function(t){return nn(a,t)})),a.restore()},n}(ve);function Ro(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var r=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(e,void 0!==n&&n<r?n:r)}return t(e,n)}var To=function(t){function r(e){var n,r;((n=t.call(this,e)||this).vertexes=[],n.deviceVertexes=[],n.lastPoint={x:0,y:0},n.annotationInfo.vertexes)&&(r=n.vertexes).push.apply(r,Ro(X,n.annotationInfo.vertexes));return n.annotationInfo.vertexes=n.vertexes,n}e(r,t);var o=r.prototype;return o.getVertexes=function(){return this.vertexes},o.getDeviceVertexes=function(){return this.deviceVertexes},o.addPoint=function(t,e){var n=this.page.reverseDevicePoint([t,e],this.scale,this.rotate),r=n[0],o=n[1];this.vertexes.push({x:r,y:o}),this.lastPoint={x:r,y:o},this.deviceVertexes.push({x:t,y:e}),this.updateRect()},o.setLastPoint=function(t,e){var n=this.deviceVertexes[this.deviceVertexes.length-1],r="number"==typeof t?t:n.x,o="number"==typeof e?e:n.y,i=this.page.reverseDevicePoint([r,o],this.scale,this.rotate),a=i[0],s=i[1];this.lastPoint={x:a,y:s},this.updateRect()},o.getLastPoint=function(){return this.lastPoint},o.zoomTo=function(e){var n=this;this.scale!==e&&(t.prototype.zoomTo.call(this,e),this.deviceVertexes=this.vertexes.map((function(t){var r=n.page.getDevicePoint([t.x,t.y],e,n.rotate);return{x:r[0],y:r[1]}})),this.updateRect())},o.removeLastPoint=function(){},o.getRenderingData=function(e,r){var o=t.prototype.getRenderingData.call(this,e,r),i=this.vertexes.slice(0);return i.push(this.lastPoint),n(n({},o),{vertexes:i})},o.generateApRenderer=function(){return new xo(this)},o.getType=function(){return"polyline"},o.getOuterDeviceRect=function(e,n){return t.prototype.getDeviceRect.call(this,e,n)},o.updateRect=function(){if(0!==this.deviceVertexes.length){var t=this.page.getDevicePoint([this.lastPoint.x,this.lastPoint.y],this.scale,this.rotate),e={x:t[0],y:t[1]},n=e.x,r=e.y,o=e.x,i=e.y;this.deviceVertexes.forEach((function(t){n=Math.min(n,t.x),o=Math.max(o,t.x),r=Math.min(r,t.y),i=Math.max(i,t.y)}));var a=We(this.annotationInfo.borderInfo.width)*this.scale*2+20;n-=a/2,r-=a/2,o+=a/2,i+=a/2,this.setRect({left:n,top:r,right:o,bottom:i})}},o.apply=function(){var e=this;return t.prototype.apply.call(this).then((function(t){var n=e.annotationInfo.intent;return"PolygonDimension"===n||"PolyLineDimension"===n?e.page.getMeasureScaleRatio().then((function(r){if(r&&r.scale){var o=e.pdfViewer.getStore().getCurrentValue("measurementData"),i=Qe(),a=pe(o.displayUnit.name)?e.pdfViewer.i18n.t("measurement.units."+o.displayUnit.name):o.displayUnit.name;return t[0].setContent(i+parseFloat("PolyLineDimension"===n?o.perimeter:o.area).toFixed(2)+" "+a).then((function(e){return t}))}return t})):t}))},r}(qe),Po=function(t){function n(e,n){var r;return void 0===n&&(n=!0),(r=t.call(this,e)||this).closing=n,r}e(n,t);var r=n.prototype;return r.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polygon")},r.doRender=function(t){var e=t.renderingData,n=e.annotInfo,r=n.borderInfo||{},o=t.scale,i=t.rotate,a=this.convertPointToPixel(0==r.width?.5:r.width,o);if(0!=a||-1!=n.borderColor||n.fillColor){var s=this.canvas.getContext("2d");if(s.clearRect(0,0,this.canvas.width,this.canvas.height),!this.component.needToggleView||!this.component.needToggleView()||this.component.shouldRenderByMouseEvent()){var c=e.page,u=t.innerRect,f=e.vertexes.map((function(t){var e=c.getDevicePoint([t.x,t.y],o,i),n=e[0],r=e[1];return new Se(n-u.left,r-u.top)}));t.vertexes=f,s.save(),t.lineWidth=a,s.globalAlpha=n.opacity,0===a||!1===n.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=this.numberToRGBAString(n.color),s.lineWidth=a;try{switch(r.style){case ge.DASHED:case ge.SOLID:case ge.UNDERLINE:case ge.BEVELED:this.renderSolid(s,n,t);break;case ge.CLOUDY:0==a?this.renderSolid(s,n,t):this.renderCloud(s,n,t)}}finally{s.restore()}}}},r.renderCloud=function(t,e,n){var r=e.fillColor,o=e.borderInfo.cloudIntensity,i=n.innerRect,a=n.outerRect;new ke(n.vertexes,i,a).generate(16/o).render(t),r&&(t.fillStyle=this.numberToRGBAString(r),t.fill()),t.stroke();try{if(!vr)return;var s=[],c=i.left-a.left,u=i.top-a.top;n.vertexes.forEach((function(t){s.push({x:t.x+c,y:i.height-t.y+u})})),void 0===n.renderingData.annotInfo.id&&Eo(t,s)}catch(t){}},r.renderSolid=function(t,e,n){var r=this,o=n.scale,i=e.borderInfo,a=i.dashes||[],s=i.dashPhase||0,c=e.fillColor;i.style===ge.DASHED&&(t.setLineDash&&t.setLineDash(a.map((function(t){return r.convertPointToPixel(t,o)}))),t.lineDashOffset=this.convertPointToPixel(s,o)),new bo(n.vertexes,this.closing).render(t),c&&(t.fillStyle=this.numberToRGBAString(c),t.fill()),t.stroke();try{if(!vr)return;void 0===n.renderingData.annotInfo.id&&Eo(t,n.vertexes)}catch(t){}},r.setMarkUp=function(t,e){var n=en(this.component,t,e),r=n.renderingData,o=n.innerRect;t=n.scale,e=n.rotate;var i=r.annotInfo,a=i.borderInfo||{},s=this.convertPointToPixel(a.width,t),c=this.canvas.getContext("2d");c.clearRect(0,0,this.canvas.width,this.canvas.height);var u=r.page,f=r.vertexes.map((function(n){var r=u.getDevicePoint([n.x,n.y],t,e),i=r[0],a=r[1];return new Se(i-o.left,a-o.top)}));c.save(),c.strokeStyle=this.numberToRGBAString(i.color),c.lineWidth=s;var l=this.closing;this.closing=!0,this.renderSolid(c,i,{vertexes:f}),c.beginPath(),f.forEach((function(t){return nn(c,t)})),this.closing=l},n}(ve),Co=function(t){function n(e){var n;(n=t.call(this,e)||this).isCloudy=!1;var r=n.annotationInfo;if(r.borderStyle)switch(r.borderInfo.style=r.borderStyle,r.borderStyle){case ge.CLOUDY:n.annotationInfo.borderInfo.cloudIntensity=r.borderStyleParam,n.isCloudy=!0;break;case ge.DASHED:n.annotationInfo.borderInfo.dashes=r.borderStyleParam}return r.borderInfo.style===ge.CLOUDY?n.isCloudy=!0:n.isCloudy=!1,n}e(n,t);var r=n.prototype;return r.generateApRenderer=function(){var t=this.isCloudy;return new Po(this,t)},r.getOuterDeviceRect=function(e,n){return this.isCloudy?Ne.on(this.getDeviceRect(e,n)).expand(100*e).extract():t.prototype.getDeviceRect.call(this,e,n)},r.getType=function(){return"polygon"},n}(To),Io=r.stateHandler,_o=r.Log,Do=r.DeviceInfo,Lo=_o.LoggerFactory,ko=Io.StateHandlerConsts.STATE_HANDLER_CREATE_POLYGON,Mo=Lo.getLogger("CreatePolygonStateHandler"),Oo=function(t){function n(e){return t.call(this,e,"polygon")||this}e(n,t),n.getStateName=function(){return ko};var r=n.prototype;return r.create=function(t,e){var n=new Co({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({type:"polygon",flags:4,date:new Date,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Polygon")})});return n.addPoint(t,e),Do&&Do.isTouchDevice&&n.draw(),this.pdfViewer.eventEmitter.emit(Xe.perimeterAnnotCreationStart,n),n},r.canBeCompleted=function(t){var e=t.getVertexes().length;return e<2&&Mo.debug("polygon has only "+e+" points"),e>=2},n}(Ao),No=r.stateHandler,Ho=r.Log,Vo=r.DeviceInfo,jo=Ho.LoggerFactory,Uo=No.StateHandlerConsts.STATE_HANDLER_CREATE_POLYLINE,Fo=(jo.getLogger("creation/polyline/state"),function(t){function r(e){return t.call(this,e,"polyline")||this}return e(r,t),r.getStateName=function(){return Uo},r.prototype.create=function(t,e){var r=this.pdfViewer.getDefaultAnnotConfig()("polyline"),o=new To(n({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({type:"polyline",flags:4,date:new Date,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Polyline")})},r));return o.addPoint(t,e),Vo&&Vo.isTouchDevice&&o.draw(),o},r}(Ao)),Bo=(o(2479),r.stateHandler),Yo=r.Log,Xo=r.DeviceInfo,Go=r.Consts.BORDER_STYLE,$o=Yo.LoggerFactory,zo=Bo.StateHandlerConsts.STATE_HANDLER_CREATE_POLYGON_CLOUD,Wo=Object.values(Go),qo=$o.getLogger("CreatePolygonCloudStateHandler"),Jo=function(t){function r(e){return t.call(this,e,"polygon")||this}e(r,t),r.getStateName=function(){return zo};var o=r.prototype;return o.create=function(t,e){var r,o=this.pdfViewer.getDefaultAnnotConfig()("polygon","PolygonCloud"),i=n({type:"polygon",flags:4,date:new Date,borderStyle:Go.CLOUDY,borderStyleParam:2,intent:"PolygonCloud",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Cloud")},o);if(r=o.borderInfo){Wo.indexOf(r.style)>-1&&(i.borderStyle=r.style);var a=r.dashes;Array.isArray(a)&&a.length>0?i.borderStyleParam=a:"number"==typeof r.cloudIntensity&&(i.borderStyleParam=r.cloudIntensity)}var s=new Co({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:i});return s.addPoint(t,e),Xo&&Xo.isTouchDevice&&s.draw(),s},o.canBeCompleted=function(t){var e=t.getVertexes().length;return e<2&&qo.debug("polygon has only "+e+" points"),e>=2},r}(Ao);function Ko(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var r=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(e,void 0!==n&&n<r?n:r)}return t(e,n)}var Qo=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.convertToCanvasBasedPoint=function(t,e,n,r,o,i){var a=o.getDevicePoint([t,e],r,i),s=a[0],c=a[1];return{x:s-n.left,y:c-n.top}},r.doRender=function(t){var e=this,n=t.scale,r=t.renderingData,o=t.rotate,i=r.page,a=r.annotInfo,s=a.startCharInfo,c=a.endCharInfo,u=r.quadPoints,f=r.outerDeviceRect;if(!s){var l=u[0];s={left:l[0].x,top:l[0].y,right:l[1].x,bottom:l[2].y}}if(!c){var h=u[u.length-1];c={left:h[0].x,top:h[0].y,right:h[1].x,bottom:h[2].y}}var d=u.map((function(t,r){var a=t.map((function(t){return e.convertToCanvasBasedPoint(t.x,t.y,f,n,i,o)})),s=a.map((function(t){return t.x})),c=a.map((function(t){return t.y})),u=Math.min.apply(Math,Ko(X,s)),l=Math.max.apply(Math,Ko(X,s)),h=Math.max.apply(Math,Ko(X,c)),d=Math.min.apply(Math,Ko(X,c));return{left:u,right:l,bottom:h,top:d,width:l-u,height:h-d,textBlockHeight:h-d}}));t.quadRects=d},n}(ve),Zo=function(t){function n(e){var n;return(n=t.call(this,e)||this).lastX=0,n.lastY=0,n}e(n,t);var r=n.prototype;return r.prepare=function(){t.prototype.prepare.call(this),Ur||Br||Fr||jr||(this.canvas.style.cssText+='\n            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n            -ms-filter: alpha(opacity=50);\n            filter: alpha(opacity=50);\n            -moz-opacity: 0.5;\n            -khtml-opacity: 0.5;\n            opacity: 0.5;\n        ')},r.doRender=function(e){e.smartScale,e.scale,this.component;var n=e.renderingData,r=n.annotInfo;if(this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()){var o=this.canvas.getContext("2d");return o.clearRect(0,0,this.canvas.width,this.canvas.height),void o.save()}if(0!=r.hasBorderColor){var i=this.canvas.getContext("2d"),a=n.outerDeviceRect,s=a.right-a.left,c=a.bottom-a.top;if(this.container.style.cssText+="\n                left: "+a.left+"px;\n                top: "+a.top+"px;\n            ",this.canvas.style.cssText+="width: "+s+"px;height: "+c+"px;",i.save(),i.fillStyle=this.numberToRGBAString(r.color),i.globalAlpha=n.opacity,n.isArea)i.fillRect(0,0,this.canvas.width,this.canvas.height);else t.prototype.doRender.call(this,e),e.quadRects.forEach((function(t){i.fillRect(t.left,t.top,t.width,t.textBlockHeight)}));i.restore()}},n}(Qo),ti=function(t){function r(e){var r;return(r=t.call(this,e)||this).annotationInfo.dicts=n({AreaHi:"AreaHi"},r.annotationInfo.dicts||{}),r.eContainer.classList.add("fv__viewer-fake-highlight-area-annot"),r}e(r,t);var o=r.prototype;return o.setRect=function(e){t.prototype.setRect.call(this,e),this.annotationInfo.coords=[this.pdfRect],this.annotationInfo.quadPoints=[{x:this.pdfRect.left,y:this.pdfRect.top},{x:this.pdfRect.right,y:this.pdfRect.top},{x:this.pdfRect.right,y:this.pdfRect.bottom},{x:this.pdfRect.left,y:this.pdfRect.bottom}]},o.getDefaultAnnotInfo=function(){var e=t.prototype.getDefaultAnnotInfo.call(this);return e.color=16776960,e},o.getDefaultAnnotConfig=function(){var t=this.pdfViewer.getDefaultAnnotConfig();return"function"==typeof t?t(this.getType()+"_isArea",this.getIntent()):{}},o.generateApRenderer=function(){return new Zo(this)},o.getType=function(){return"highlight"},o.getCreationJSON=function(){return n(n({},t.prototype.getCreationJSON.call(this)),{color:this.annotationInfo.color})},o.getRenderingData=function(e,r){var o=t.prototype.getRenderingData.call(this,e,r);return n(n({},o),{coords:[o.outerDeviceRect],isArea:!0})},r}(qe),ei=r.stateHandler,ni=ei.IStateHandler,ri=ei.StateHandlerUtils.getDevicePagePoint,oi=ei.StateHandlerConsts.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT,ii=function(t){function n(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-crosshair",n}e(n,t),n.getStateName=function(){return oi};var r=n.prototype;return r.pageHandler=function(t){var e=this;this.pageRender=t,this.pageDestroyHooks=[];var n=t.$handler.get(0);t.$handler.addClass(this.cursorStyle);var r=this.hammer=new Hammer.Manager(n);r.add(new Hammer.Pan),r.on("panstart",(function(t){e.startPoint=ri(n,t),e.start(e.startPoint)})),r.on("panmove",(function(t){return e.currentPoint={x:e.startPoint.x+t.deltaX,y:e.startPoint.y+t.deltaY},e.adjust(e.fakeAnnotation,e.startPoint,e.currentPoint)})),r.on("panend",(function(t){e.end(e.fakeAnnotation)})),r.on("pancancel",(function(t){return e.end(e.fakeAnnotation)})),this.pageDestroyHooks.push((function(){return r.destroy()}))},r.start=function(t){var e=t.x,n=t.y;return this.fakeAnnotation=new ti({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:{flags:4,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Highlight")}}),this.fakeAnnotation.setRect({left:e,right:e+1,top:n,bottom:n+1}),this.fakeAnnotation},r.adjust=function(t,e,n){var r=e.x,o=e.y,i=n.x,a=n.y,s=Math.min(r,i),c=Math.min(o,a),u=Math.max(r,i),f=Math.max(o,a);t.setRect({left:s,top:c,right:u,bottom:f}),t.draw()},r.end=function(t){var e=this;t.apply().then((function(t){if(e.pdfViewer.config.showCommentList){var n=t[t.length-2];e.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}}))},r.destroyPageHandler=function(){this.fakeAnnotation&&this.fakeAnnotation.destroy(),this.pageDestroyHooks&&this.pageDestroyHooks.forEach((function(t){return t()})),this.pageRender.$handler.removeClass(this.cursorStyle)},n}(ni);function ai(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var r=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(e,void 0!==n&&n<r?n:r)}return t(e,n)}var si=r.stateHandler,ci=r.ViewerEvents,ui=r.shared,fi=r.DeviceInfo,li=r.vendors.jQuery,hi=si.IStateHandler,di=si.StateHandlerUtils.getDevicePagePoint,pi=si.StateHandlerConsts.STATE_HANDLER_CREATE_PENCIL,vi=r.shared,gi=vi.getClientX,mi=vi.getClientY,yi=vi.colorConvertor,wi=ui.browser.dpr,Ai=function(t){function r(){var e;return(e=t.apply(this,arguments)||this).cursorStyle="fv__cursor-pencil",e.isMovingPencil=!1,e.destroyHooks=[],e}e(r,t),r.getStateName=function(){return pi},r.getStateHandlerName=function(){return"pencilStateHandler"};var o=r.prototype;return o.initTimeout=function(t,e){var n=this;void 0===e&&(e=!0);var r=this.timeout;clearTimeout(r),e&&(this.timeout=setTimeout((function(){if(n.isMovingPencil)return n.isMovingPencil=!1,n.initTimeout(t,e);n.addAnnot().then((function(t){n.isMovingPencil=!1;var e=n.$canvas[0].getContext("2d"),r=n.$canvas[0].width,o=n.$canvas[0].height;e.clearRect(0,0,r,o)}))}),t))},o.pageHandler=function(t){var e=this,r=this;this.pageRender=t;var o=t.$handler;o.addClass(this.cursorStyle);var i=o.width(),a=o.height(),s=function(t){if(void 0===t&&(t=!1),t&&e.$canvas){var n=o.width(),r=o.height();e.$canvas.css("width",n+"px"),e.$canvas.css("height",r+"px")}!e.pdfPointList||e.pdfPointList.length<1||(clearTimeout(e.timeout),e.addAnnot())};t.$element.on("blur",(function(){s()})),this.destroyHooks.push(this.pdfViewer.addEventListener(ci.zoomToSuccess,(function(t){s(!0)}))),this.$canvas=li('<canvas style="width:'+i+"px;height:"+a+'px" width="'+i*wi+'" height="'+a*wi+'"></canvas>'),o.append(this.$canvas);var c,u=this.$canvas[0].getContext("2d"),f=o[0],l=this.hammer=new Hammer.Manager(f,{recognizers:[[Hammer.Tap],[Hammer.Press],[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});this.pencilLists=[],this.isMovingPencil=!1,this.pdfPointList=[];var h=function(t){0==e.pdfPointList.length&&d(),u.closePath();var n=di(f,t);u.beginPath(),u.moveTo(n.x*wi,n.y*wi),u.arc(n.x*wi,n.y*wi,e.lineWidth,0,2*Math.PI),u.fillStyle=e.lineColor,u.fill(),u.closePath(),e.pencilLists.push([{x:n.x,y:n.y,type:3}]),e.isMovingPencil=!0,e.startAddAnnot()};function d(){var e=n({borderInfo:{width:2},color:16711680},r.pdfViewer.getDefaultAnnotConfig()("ink"));e.color=16777215&e.color;var i=o.width(),a=o.height();r.$canvas[0].width=i*wi,r.$canvas[0].height=a*wi,r.$canvas.css("width",i+"px"),r.$canvas.css("height",a+"px"),r.$canvas.css("opacity",Number(e.opacity)),r.lineWidth=e.borderInfo.width*t.getScale()*wi,u.lineWidth=e.borderInfo.width*t.getScale()*wi,r.lineColor=yi(e.color,"HTML"),u.strokeStyle=yi(e.color,"HTML"),u.lineJoin="round",u.lineCap="round"}if(l.on("tap",h),l.on("press",h),l.on("panstart",(function(t){0==e.pdfPointList.length&&d();var n=e.pencilLists;c=[],n.push(c);var r=di(f,t);u.closePath(),u.beginPath(),u.moveTo(r.x*wi,r.y*wi),c.push({x:r.x,y:r.y,type:1})})),l.on("panmove",(function(t){e.isMovingPencil=!0;var n=bi(f,t);c.push({x:n.x,y:n.y,type:2}),u.lineTo(n.x*wi,n.y*wi),u.strokeStyle=e.lineColor,u.stroke(),u.closePath(),u.beginPath(),u.moveTo(n.x*wi,n.y*wi);e.pageRender.page})),l.on("panend",(function(t){e.isMovingPencil=!1;var n=bi(f,t);u.lineTo(n.x*wi,n.y*wi),u.stroke(),e.startAddAnnot()})),fi.isTouchDevice){var p=function(t){t.preventDefault()};o.on("touchstart",p),this.__off_touch_event=function(){o.on("touchstart",p)}}else this.__off_touch_event=function(){}},o.startAddAnnot=function(){var t,e=this.pencilLists;if(!e||e.length<1)return Promise.resolve();var n=this.pageRender,r=n.page,o={left:1e4,right:0,top:0,bottom:1e4},i=e.reduce((function(t,e){return function(t,e,n,r,o,i){return o.forEach((function(o){var a=t.reverseDevicePoint([o.x,o.y],e,n),s=a[0],c=a[1];s>i.right?i.right=s:s<i.left&&(i.left=s),c>i.top?i.top=c:c<i.bottom&&(i.bottom=c),r.push({x:s,y:c,type:o.type})})),r}(r,n.scale,n.rotate,t,e,o)}),[]);if((t=this.pdfPointList).push.apply(t,ai(X,i)),this.pencilLists=[],!n.pdfViewer.continuousAddPencil){var a=n.pdfViewer.getStateHandlerManager().getStateHandlerConfig(this.constructor.getStateHandlerName()),s=a?a.pencilTimeout:null;return s=null!=s?s:3e3,this.initTimeout(s)}this.addAnnot()},o.addAnnot=function(){var t=this;if(!this.pdfPointList||this.pdfPointList.length<1)return Promise.resolve();var e=this.pageRender;return e.getPDFPage().then((function(n){return n.addAnnot({type:"ink",flags:4,rect:{left:1e4,right:0,top:0,bottom:1e4},inkList:t.pdfPointList,subject:t.pdfViewer.i18n.t("viewer_:annotSubjects.Pencil")}).then((function(n){return e.pdfViewer.eventEmitter.emit(ci.addAnnotSuccess,n[0]),t.pencilLists=[],t.pdfPointList=[],n})).then((function(e){if(t.pdfViewer.config.showCommentList){var n=e[e.length-2];t.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}}))}))},o.destroyPageHandler=function(){var t=this;this.__off_touch_event(),this.initTimeout(0,!1),this.pageRender.docRender.formRender.addTask((function(e){return t.addAnnot().then((function(e){t.$canvas.remove(),t.hammer&&t.hammer.destroy(),t.pageRender.$handler.removeClass(t.cursorStyle),t.pencilLists=null}))}),!0),this.destroyHooks.forEach((function(t){return t()}))},o.out=function(){this.destroyPageHandler()},r}(hi);function bi(t,e){var n=t.getBoundingClientRect(),r=e.srcEvent,o=gi(r),i=mi(r);return{x:o-n.left,y:i-n.top}}var Si,Ei;o(2526),o(1817),o(2165),o(2443),o(3680),o(3706),o(2703),o(489),o(8304);function xi(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ri(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){xi(i,r,o,a,s,"next",t)}function s(t){xi(i,r,o,a,s,"throw",t)}a(void 0)}))}}!function(t){t.CREATE_ANNOT="create-annots",t.REMOVE_ANNOT="remove-annots",t.UPDATE_ANNOT="update-annots",t.ADD_REPLY="add-reply",t.REMOVE_REPLY="remove-reply",t.ADD_REVIEW_STATE="add-review-state",t.ADD_MARKED_STATE="add-marked-state",t.UPDATE_ANNOT_CONTENT="update-comment-content",t.PPO_REMOVE_PAGE="ppo-remove-page",t.PPO_REMOVE_PAGES="ppo-remove-pages",t.PPO_INSERT_PAGE="ppo-insert-page",t.PPO_ROTATE_PAGE="ppo-rotate-page",t.PPO_MOVE_PAGE="ppo-move-page",t.MOVE_ANNOTS_BETWEEN_PAGES="move-annotations-between-pages",t.IMPORT_ANNOTATIONS_FILE="import-annotations-file"}(Si||(Si={})),function(t){t.fully="fully",t.playable="playable",t.adjustable="adjustable",t.deletable="deletable",t.modifiable="modifiable",t.attachmentDownloadable="attachmentDownloadable",t.replyable="replyable",t.editable="editable"}(Ei||(Ei={}));var Ti=o(2047),Pi=o.n(Ti),Ci=(o(1263),function(){function t(t,e){this.pageRender=t,this.circle=document.createElement("div"),this.circle.classList.add("eraserCircle"),this.circle.style="position:absolute; border:1px solid #000000;display:block;border-radius:50%;",this.wrapCircle=e,this.$eraserCircle=null,this.clientY,this.clientX,this.$pdfViewerElement=Pi()(this.pageRender.pdfViewer.element)}var e=t.prototype;return e.init=function(){var t=this;this.$pdfViewerElement.on("scroll",(function(e){t.$eraserCircle&&t.eraserMove(e)})),this.wrapCircle.on("mouseenter",(function(){t.wrapCircle.append(t.circle),t.$eraserCircle=Pi()(t.circle),t.$eraserCircle.css("display","block")})),this.wrapCircle.on("mousemove",(function(e){t.eraserMove(e)})),this.wrapCircle.on("mouseleave",(function(e){t.$eraserCircle.remove()}))},e.eraserMove=function(t){var e=t||window.event,n=this.pageRender.pdfViewer.getStateHandlerManager().getStateHandlerConfig("eraserStateHandler"),r=n?n.width:8,o=this.$eraserCircle?this.$eraserCircle:Pi()(this.circle);e.clientY&&(this.clientY=e.clientY),e.clientX&&(this.clientX=e.clientX);var i=o[0].getBoundingClientRect();o.width(r),o.height(r);var a=Pi()(this.wrapCircle).offset().top,s=Pi()(this.wrapCircle).offset().left,c=Pi()("html").scrollLeft(),u=this.clientY-i.height/2-a,f=this.clientX-i.width/2-s+c;o.css({top:u,left:f})},e.destroy=function(){this.$eraserCircle&&this.$eraserCircle.remove(),this.wrapCircle.off(),this.$pdfViewerElement.off("scroll")},t}());function Ii(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ii=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),s=new R(o||[]);return r(a,"_invoke",{value:b(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function h(){}function d(){}function p(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==e&&n.call(m,i)&&(v=m);var y=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(r,i,a,s){var c=f(t[r],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),l;var o=f(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,p),c(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},w(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var _i,Di=r.stateHandler,Li=r.Log,ki=r.ViewerEvents,Mi=r.shared,Oi=r.DeviceInfo.isDesktop,Ni=Mi.eraser,Hi=Ni.Eraser,Vi=Ni.Point,ji=Di.IStateHandler,Ui=r.Consts.POINT_TYPE,Fi=Di.StateHandlerUtils.getDevicePagePoint,Bi=Li.LoggerFactory.getLogger("EraserStateHandler"),Yi=Oi?8:20,Xi=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).cursorStyle="fv__cursor-eraser fv__cursor-none",e.eraserCircle=null,e}e(n,t),n.getStateName=function(){return"eraser"},n.getStateHandlerName=function(){return"eraserStateHandler"};var r=n.prototype;return r.pageHandler=function(){var t=Ri(Ii().mark((function t(e){var n,r,o,i,a,s,c=this;return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.pageRender=e,n=e.$handler,(r=new Ci(e,n)).init(),this.eraserCircle=r,this.allInkList={},this.eraseInkList={},n.addClass(this.cursorStyle),o=n[0],i=this.hammer=new Hammer.Manager(o,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]}),a=e.docRender.formRender.addTask((function(t){return e.page.getAnnots().then((function(t){return t.filter((function(t){return"ink"===t.getType()}))}))}),!0),e.getPDFPage().then((function(t){i.on("panstart",(function(t){c.startPoint=Fi(o,t),s=a.then((function(t){t.forEach((function(t){c.allInkList[t.getId()]={annot:t,inkList:t.getInkList()}}))}))})),i.on("panmove",(function(n){c.lastPoint=c.currentPoint||c.startPoint,c.currentPoint={x:c.startPoint.x+n.deltaX,y:c.startPoint.y+n.deltaY},s=s.then((function(n){return a.then((function(n){if(0!==n.length||c.currentPoint){var r=e.pdfViewer.getStateHandlerManager().getStateHandlerConfig(c.constructor.getStateHandlerName()),o=r?r.width:Yi;return c.erase(t,n,c.currentPoint,o)}}))}))})),i.on("panend",(function(t){var n=document.getElementById("eraser");n&&n.remove(),s.then((function(t){var n=[],r=[];for(var o in c.eraseInkList){var i=c.allInkList[o],a=c.eraseInkList[o];i.isRemove=a.isRemove,n.push(i),r.push(a)}e.pdfViewer.eventEmitter.emit(ki.eraserSuccess,n,r);var s=Object.keys(c.eraseInkList).map((function(t){return c.eraseInkList[t]})).filter((function(t){return!t.isRemove})).map((function(t){return t.annot.exportToJSON()}));c.pdfViewer.collaborate(Si.UPDATE_ANNOT,{annots:s})}))}))}));case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.erase=function(){var t=Ri(Ii().mark((function t(e,n,r,o){var i,a,s,c,u,f,l,h,d,p,v,g,m=this;return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=function(t,e){var n=e.x>=t.left&&e.x<=t.right,r=e.y>=t.bottom&&e.y<=t.top;return n&&r},void 0===o&&(o=Yi),i=this.pdfViewer,a=this.pageRender,s=a.getScale(),c=a.getRotation(),u=e.reverseDevicePoint([r.x,r.y],s,c),f=u[0],l=u[1],h={x:f,y:l},d=function(){var t=Ri(Ii().mark((function t(e,n){var r;return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map(n));case 2:return r=t.sent,t.abrupt("return",e.filter((function(t,e){return r[e]})));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),t.next=11,d(n,function(){var t=Ri(Ii().mark((function t(e){var n,r;return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getRect(),t.next=3,m.pdfViewer.getAnnotAuthorityManager();case 3:return r=t.sent,t.next=6,r.getPermission(e);case 6:if(t.sent.isModifiable()){t.next=9;break}return t.abrupt("return",null);case 9:return t.abrupt("return",g(n,h));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 11:return p=t.sent,v=p.map((function(t){return t.$$lastErasePromise=(t.$$lastErasePromise||Promise.resolve()).then(e,e).then((function(e){var n=a.getAnnotRender(t.getId());return m.eraseInkList[t.getId()]={annot:t,inkList:t.getInkList(),isRemove:!n},e}));function e(){var e,n=t.getInkList(),r=new Hi(o/2).erase(n.map((function(t){return new Vi(t.x,t.y,t.type)})),new Vi(f,l)).reduceRight((function(t,e){var n=t[0];return n&&n.type===Ui.MOVE_TO&&n.type===e.type||t.unshift(e),t}),[]),s=(e=r,e.reduce((function(t,e){return e.type===Ui.MOVE_TO&&t.push([]),t[t.length-1].push(e),t}),[])).filter((function(t){if(t.length<1)return!1;var e=t[0],n=0;return t.forEach((function(t){n+=t.distanceTo(e),e=t})),n>.01}));if(0!==s.length){var c=s.reduce((function(t,e){return t.concat(e)}),[]);return t.setInkList(c)}var u=a.getAnnotRender(t.getId());if(u){var h=u.component.annot;return h.getPDFPage().removeAnnot(h).then((function(){i.collaborate(Si.REMOVE_ANNOT,[{annotId:h.getUniqueID(),pageIndex:a.index}])}))}Bi.debug("annotRender === undefined",u,s,r)}})),t.abrupt("return",Promise.all(v));case 14:case"end":return t.stop()}}),t,this)})));return function(e,n,r,o){return t.apply(this,arguments)}}(),r.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.eraserCircle.destroy()},r.out=function(){this.destroyPageHandler()},n}(ji),Gi=(o(285),o(1637),r.PDFViewer),$i=r.shared.Store;!function(t){t.CUSTOM_STAMP_LIST_ADDED="custom-stamps-added",t.CUSTOM_STAMP_LIST_REMOVED="custom-stamps-removed",t.CUSTOM_STAMP_LIST_UPDATED="custom-stamps-updated",t.DEFAULT_STAMP_LIST_UPDATED="default-stamps-updated",t.DEFAULT_STAMP_LIST_REMOVED="default-stamps-removed",t.SWITCH_STAMP_ICON="switch-stamp-icon"}(_i||(_i={}));var zi,Wi,qi=function(){function t(){this.customStamps={},this.defaultStamps={},this.store=new $i,this.defaultStampRewrited=!1;var t=document.createElement("img");t.draggable=!1,t.style.cssText="position: absolute;opacity:0.5",this.currentPreviewerImg=t}t.inject=function(){return{pdfViewer:Gi}};var e=t.prototype;return e.setCurrentStamp=function(t,e,n,r,o){var i=this;void 0===r&&(r=150),void 0===o&&(o=45);var a=this.currentStamp,s=this.currentStamp=this.getStampIcon(t,e,n,r,o);if(!s)throw new Error("Stamp not found: category: "+t+", name: "+e);this.currentPreviewerImg.src=s.showUrl||"",Promise.resolve().then((function(){i.store.dispatch(_i.SWITCH_STAMP_ICON,{current:i.currentStamp,last:a})}))},e.onSwitchStamp=function(t){return this.store.subscribe(_i.SWITCH_STAMP_ICON,(function(e){t(e.current,e.last)}))},e.getCurrentStampConfig=function(){return this.currentStamp},e.getPreviewerImage=function(){return this.currentPreviewerImg},e.setDefaultStamps=function(t){void 0===t&&(t={}),this.defaultStamps=t,this.defaultStampRewrited=!0,this.store.dispatch(_i.DEFAULT_STAMP_LIST_UPDATED,t)},e.setCustomStamps=function(t){void 0===t&&(t={}),this.customStamps=t,this.store.dispatch(_i.CUSTOM_STAMP_LIST_UPDATED,t)},e.updateDefaultStamps=function(t,e){if(!this.defaultStampRewrited){var n=this.pdfViewer.libPath,o=this.pdfViewer.getCurrentLanguage(),i=n+o;if(this.lastKey!==i){this.lastKey=i;var a=r.shared.getDefaultStamps(n,o);if(t){var s=t.category,c=t.name;a[s]=a[s]||{},a[s][c]=t}if(e){var u=e.category,f=e.name;a[u]&&(delete a[u][f],0===Object.keys(a[u]).length&&delete a[u])}this.defaultStamps=a,this.store.dispatch(_i.DEFAULT_STAMP_LIST_UPDATED,a)}}},e.getDefaultStamps=function(){return this.defaultStamps},e.getCustomStamps=function(){return this.customStamps},e.getFavoriteStamps=function(){var t,e,r,o;this.updateDefaultStamps();var i=this.pdfViewer.getStorage().getItem("FAVORITE-STAMPS-LIST"),a=this.getDefaultStamps(),s=this.getCustomStamps(),c=n({},a);if(!i)return c;if(0===i.length)return c;for(var u={},f=0;f<i.length;f++){var l=i[f].split("."),h=l[0],d=l[1],p={},v=void 0;(null===(e=null===(t=null==a?void 0:a[h])||void 0===t?void 0:t[d])||void 0===e?void 0:e.url)?v=a[h][d].url:(null===(o=null===(r=null==s?void 0:s[h])||void 0===r?void 0:r[d])||void 0===o?void 0:o.url)&&(v=s[h][d].url,p.width=s[h][d].width,p.height=s[h][d].height,p.fileType=s[h][d].fileType),v&&(u[h+"-"+d]=n({fileType:"pdf",url:v},p))}return c.Favorite=u,c},e.getStampIcon=function(t,e,o,i,a){void 0===i&&(i=150),void 0===a&&(a=45);var s=this.defaultStamps[t]&&this.defaultStamps[t][e];if(s||(s=this.customStamps[t]&&this.customStamps[t][e]),!s){var c=this.getFavoriteStamps();s=c[t]&&c[t][e]}if(s=s||o){var u=s.width||i,f=s.height||a,l=s.url;if(!r.DeviceInfo.isTouchDevice){l=l.replace(/\.pdf$/,".svg");var h=new XMLHttpRequest;h.open("get",l),h.send()}return n({},s,{width:u,height:f,showUrl:l,category:t,name:e})}},e.addAnnotationIcon=function(t){var e=t.category,n=t.name;e in this.customStamps||(this.customStamps[e]={}),this.customStamps[e][n]=t,this.store.dispatch(_i.CUSTOM_STAMP_LIST_ADDED,this.customStamps,t)},e.removeAnnotationIcon=function(t){this.removeIcon(this.defaultStamps,t)?this.store.dispatch(_i.DEFAULT_STAMP_LIST_REMOVED,this.defaultStamps,t):this.removeIcon(this.customStamps,t)&&this.store.dispatch(_i.CUSTOM_STAMP_LIST_REMOVED,this.customStamps,t)},e.onCustomStampRemoved=function(t){return this.store.subscribe(_i.CUSTOM_STAMP_LIST_REMOVED,t)},e.onCustomStampAdded=function(t){return this.store.subscribe(_i.CUSTOM_STAMP_LIST_ADDED,t)},e.onDefaultStampRemoved=function(t){return this.store.subscribe(_i.DEFAULT_STAMP_LIST_REMOVED,t)},e.onDefaultStampUpdated=function(t){return this.store.subscribe(_i.DEFAULT_STAMP_LIST_UPDATED,t)},e.removeIcon=function(t,e){var n,r=e.category,o=e.name;for(var i in t){var a=t[i];for(var s in a)o?r==i&&s==o&&(delete a[s],n=!0):r?i==r&&(delete a[s],n=!0):delete a[s];0==Object.keys(a).length&&delete t[i]}return n},t}(),Ji=r.stateHandler,Ki=r.ViewerEvents,Qi=r.vendors,Zi=(Qi.jQuery,Qi.Hammer),ta=Ji.IStateHandler,ea=Ji.StateHandlerConsts.STATE_HANDLER_CREATE_STAMP,na=r.shared,ra=na.getClientX,oa=na.getClientY,ia=r.DeviceInfo.isTouchDevice,aa=function(t){function r(e){return t.call(this,e)||this}e(r,t),r.getStateName=function(){return ea},r.setParams=function(t,e){var n=t.category,r=t.name,o=e.getIoC().getInstanceByClass(qi);try{t.url&&t.fileType?o.setCurrentStamp(n,r,t):o.setCurrentStamp(n,r,void 0)}catch(t){return console.error(t),void Promise.resolve().then((function(){e.getStateHandlerManager().switchTo()}))}var i=o.getPreviewerImage(),a=o.getCurrentStampConfig(),s=a.width,c=a.height,u=a.showUrl;ia||(i.style.cssText+="\n                width: "+4*s/3+"px;\n                height: "+4*c/3+"px;\n            ",i.src=u,setTimeout((function(){e.previewIconDoc(a).then((function(t){i.parentElement&&(i.src=URL.createObjectURL(t))}))}),100))};var o=r.prototype;return o.pageHandler=function(t){this.pageRender=t;var e=t.$handler,r=t.pdfViewer;e.addClass("fv__create-stamp-state-handler");var o=!1,i=e[0],a=this.hammer=new Zi.Manager(i,{recognizers:[[Zi.Tap]]}),s=r.getIoC().getInstanceByClass(qi),c=s.getPreviewerImage();function u(n){var r=s.getCurrentStampConfig(),o=i.getBoundingClientRect(),a=n.clientX-o.left,u=n.clientY-o.top;ia||(c.style.cssText+="\n                    transform: scale("+t.getScale()+");\n                    top: "+(u-2*r.height/3)+"px;\n                    left: "+(a-2*r.width/3)+"px;\n                ",c.style.display="",e.append(c))}this.previewStampImg=c,r.getStore().subscribe("switchStampEvent",(function(t){u(t)})),this.addEvent(e,"mousemove",(function(t){o||u(t)})),a.on("tap",(function(e){if(!o){var a=i.getBoundingClientRect(),u=e.srcEvent,f="",l=ra(u),h=oa(u),d=[l-a.left,h-a.top],p=d[0],v=d[1];o=!0;var g=s.getCurrentStampConfig(),m=g.width,y=g.height,w=g.category,A=g.name,b=g.fileType,S=g.url,E=g.field;return t.getPDFPage().then((function(e){var r=2*m/3*t.scale,o=2*y/3*t.scale,i={left:p-r,right:p+r,top:v-o,bottom:v+o};i=e.reverseDeviceRect(i,t.scale,t.getRotation());var a={rotation:((360-90*e.getRotation()-t.getRotation())%360+360)%360,type:"stamp",flags:4,rect:i,subject:t.pdfViewer.i18n.t("viewer_:annotSubjects.Stamp"),iconInfo:{category:w,name:A,fileType:b,url:S,field:E}};return n(a,t.pdfViewer.getDefaultAnnotConfig()("stamp")||{}),e.addAnnot(a)})).then((function(e){var n=t.annotsRender.getAnnotRender(e[0].objectNumber).component;return f=n,t.pdfViewer.eventEmitter.emit(Ki.addAnnotSuccess,n.annot),n.getRenderPromise().finally((function(){setTimeout((function(){o=!1,c.style.cssText+="\n                                display: none;\n                                opacity: 0.5;\n                            "}),500)})),n})).then((function(t){r.getStateHandlerManager().switchTo(),c.style.opacity=1,r.activeElement(t),r.config.showCommentList&&f.showReplyDialog()})).catch((function(){o=!1,c.style.cssText+="\n                        display: none;\n                        opacity: 0.5;\n                    "}))}}))},o.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler");var t=this.previewStampImg;t.parentElement&&t.parentElement.removeChild(t),this.destroyList.map((function(t){var e=t[0],n=t[1],r=t[2];e.off(n,r)}))},o.out=function(){this.destroyPageHandler()},o.addEvent=function(t,e,n){this.destroyList=this.destroyList||[],t.on(e,n),this.destroyList.push([t,e,n])},r}(ta),sa=(o(9575),o(2472),o(2990),o(8927),o(3105),o(5035),o(4345),o(7174),o(2846),o(4731),o(7209),o(6319),o(8867),o(7789),o(3739),o(9368),o(4483),o(2056),o(3462),o(678),o(7462),o(3824),o(5021),o(2974),o(5016),r.stateHandler),ca=r.ViewerEvents,ua=sa.IStateHandler,fa=sa.HandStateHandler,la=r.vendors,ha=la.Hammer,da=la.jQuery,pa=r.shared,va=(pa.DebouncePromiseQueue,pa.getClientX),ga=pa.getClientY,ma=sa.StateHandlerUtils,ya=(ma.getDevicePagePoint,ma.deltaDeviceRect,ma.appendSelectMark,ma.removeSelectMark,sa.StateHandlerConsts.STATE_HANDLER_CREATE_FILE_ATTACHMENT),wa=function(t){function n(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-file",n}e(n,t),n.getStateName=function(){return ya};var r=n.prototype;return r.pageHandler=function(t){this.pageRender=t;var e=t.$handler;e.addClass(this.cursorStyle);var n=da('<input id="fileAttachment" type="file" style="display: none;"/>');this.$fileAttachment=n,e.append(n);var r=e[0];(this.hammer=new ha.Manager(r,{recognizers:[[ha.Tap]]})).on("tap",(function(e){var o=r.getBoundingClientRect(),i=e.srcEvent,a=va(i),s=ga(i),c=[a-o.left,s-o.top],u=c[0],f=c[1];n.off("change").on("change",(function(e){var n=e.target.files[0];if(n&&!(t.pdfViewer.customs&&t.pdfViewer.customs.isAttachFileOverSize&&t.pdfViewer.customs.isAttachFileOverSize(n)))if(n.size>268435456)t.pdfViewer.viewerUI.confirm({message:"sidebar.attachment.addAttachmentSizeLimit",level:"warning"});else{if(!(["exe"].indexOf(n.name.split(".")[1])>=0))return t.getPDFPage().then((function(e){var r=new FileReader,o=e.reverseDevicePoint([u,f],t.scale,t.getRotation()),i=o[0],a=o[1];r.readAsArrayBuffer(n),r.onload=function(){var o=new Uint8Array(r.result);e.addAnnot({flags:28,type:"fileattachment",rect:{left:i,right:i+20,top:a,bottom:a-24},buffer:o,fileName:n.name,file:n,subject:t.pdfViewer.i18n.t("viewer_:annotSubjects.File")}).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;t.pdfViewer.eventEmitter.emit(ca.addAnnotSuccess,r.annot),t.pdfViewer.getStateHandlerManager().switchTo(fa.getStateName()),t.annotsRender.activeAnnot(n.getId())}))}}));t.pdfViewer.viewerUI.confirm({message:"sidebar.attachment.addAttachmentFileFormat",level:"warning"})}})),n.click()}))},r.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.$fileAttachment.remove()},r.out=function(){this.destroyPageHandler()},n}(ua);!function(t){t.STATE_HANDLER_HAND="hand",t.STATE_HANDLER_CHECK_THE_SEARCH="checkTheSearch",t.STATE_HANDLER_CREATE_CARET="createCaret",t.STATE_HANDLER_CREATE_ARROW="createArrow",t.STATE_HANDLER_CREATE_AREA_HIGHLIGHT="createAreaHighlight",t.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT="createAreaHighlight",t.STATE_HANDLER_CREATE_CIRCLE="createCircle",t.STATE_HANDLER_CREATE_FILE_ATTACHMENT="createFileAttachment",t.STATE_HANDLER_CREATE_HIGHLIGHT="createHighlight",t.STATE_HANDLER_CREATE_IMAGE="createImage",t.STATE_HANDLER_CREATE_LINK="createLink",t.STATE_HANDLER_CREATE_LINE="createLine",t.STATE_HANDLER_CREATE_DISTANCE="createDistance",t.STATE_HANDLER_CREATE_PERIMETER="createPerimeter",t.STATE_HANDLER_CREATE_AREA="createArea",t.STATE_HANDLER_CREATE_CIRCLE_AREA="createCircleArea",t.STATE_HANDLER_CREATE_PENCIL="createPencil",t.STATE_HANDLER_CREATE_POLYGON_CLOUD="createPolygonCloud",t.STATE_HANDLER_CREATE_POLYGON="createPolygon",t.STATE_HANDLER_CREATE_POLYLINE="createPolyline",t.STATE_HANDLER_CREATE_REPLACE="createReplace",t.STATE_HANDLER_CREATE_SQUARE="createSquare",t.STATE_HANDLER_CREATE_SQUIGGLY="createSquiggly",t.STATE_HANDLER_CREATE_STAMP="createStamp",t.STATE_HANDLER_CREATE_STRIKE_OUT="createStrikeOut",t.STATE_HANDLER_CREATE_TEXT="createText",t.STATE_HANDLER_CREATE_UNDERLINE="createUnderline",t.STATE_HANDLER_MARQUEE="marquee",t.STATE_HANDLER_ERASER="eraser",t.STATE_HANDLER_LOUPE="loupe",t.STATE_HANDLER_SELECT_TEXT_ANNOTATION="select-text-annotation",t.STATE_HANDLER_SELECT_TEXT_IMAGE="select-text-image",t.STATE_HANDLER_SELECT_ANNOTATION="select-annotation",t.STATE_HANDLER_CREATE_FREETEXT_BOX="createFreeTextBox",t.STATE_HANDLER_CREATE_FREETEXT_CALLOUT="createFreeTextCallout",t.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER="createFreeTextTypewriter",t.STATE_HANDLER_CREATE_FIELD_TEXT="CreateTextStateHandler",t.STATE_HANDLER_CREATE_FIELD_SIGNATURE="CreateSignStateHandler",t.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON="CreatePushButtonStateHandler",t.STATE_HANDLER_CREATE_RADIO_BUTTON="CreateRadioButtonStateHandler",t.STATE_HANDLER_SNAPSHOT_TOOL="snapshot-tool"}(zi||(zi={}));var Aa="userSpaceUnit",ba="userSpaceScaleValue",Sa="realUnit",Ea="realScaleValue",xa=((Wi={})[zi.STATE_HANDLER_CREATE_PERIMETER]="perimeter",Wi[zi.STATE_HANDLER_CREATE_DISTANCE]="distance",Wi[zi.STATE_HANDLER_CREATE_AREA]="area",Wi[zi.STATE_HANDLER_CREATE_CIRCLE_AREA]="area",function(t){function n(e,n){var r;return(r=t.call(this,e)||this).target=n,r}return e(n,t),n.prototype.init=function(){var t,e,n,r,o=this,i=function(n){if(0===n.button)if(o.isStarted){if(o.isStarted){r=null,o.isStarted=!1;var i=n.clientX-t,a=n.clientY-e;o.emit("end",{deltaX:i,deltaY:a,srcEvent:n})}}else r=o.target.getBoundingClientRect(),o.isStarted=!0,t=n.clientX,e=n.clientY,o.emit("start",{deltaX:0,deltaY:0,srcEvent:n})},a=function(r){if(!o.isLocked)if(o.isStarted){var i=r.clientX-t,a=r.clientY-e;o.emit("move",n={deltaX:i,deltaY:a,srcEvent:r})}else{var s=o.target.getBoundingClientRect(),c=r.clientX-s.left,u=r.clientY-s.top;o.emit("mousemove",{x:c,y:u})}},s=function(n){if(o.isStarted&&!o.isDestroyed&&!o.isLocked&&r){var i=o.target.getBoundingClientRect(),a=t-r.left,s=e-r.top,c=i.width/r.width;t=i.left+a*c,e=i.top+s*c,r=i}};window.addEventListener("scroll",s,!0),this.target.addEventListener("mousedown",i),document.addEventListener("mousemove",a,!0);var c=this.pdfViewer.getStore().subscribe("create-measurement-status",(function(t){switch(t){case"complete":o.isStarted&&(r=null,o.isStarted=!1,o.unlock(),o.emit("end",n));break;case"cancel":o.isStarted&&(r=null,o.isStarted=!1,o.unlock(),o.emit("cancel"))}}));this.addDestroyHook((function(){o.target.removeEventListener("mousedown",i),document.removeEventListener("mousemove",a),c(),window.removeEventListener("scroll",s,!0)}))},n}(Sn)),Ra=r.ViewerEvents,Ta=r.DeviceInfo.isTouchDevice,Pa=r.Consts,Ca=Pa.LineEndingStyle,Ia=Pa.Intents,_a=Pa.CREATING_MEASUREMENT_CONTEXTMENU,Da=r.shared.ThrottleAsyncTaskExecutor,La=function(t){function r(e){var n;return(n=t.call(this,e,Ca.OpenArrow,Ca.OpenArrow)||this).isEnd=!0,n.executor=new Da(20,!0),n.markupArray=[],n}e(r,t),r.getStateName=function(){return"createDistance"};var o=r.prototype;return o.createInteractionTool=function(e,n){return Ta?t.prototype.createInteractionTool.call(this,e,n):new xa(this.pdfViewer,e)},o.createAnnotJson=function(t){var e=this.pdfViewer.store.getCurrentValue("measurementInfo");return t.intent=Ia.LINE_DIMENSION,t.enableCaption=!0,t.measure={unit:e[Sa].name,ratio:{userSpaceValue:e[ba],userSpaceUnit:e[Aa].name,realValue:e[Ea],realUnit:e[Sa].name}},n(t,this.pdfViewer.getDefaultAnnotConfig()("line","LineDimension")),t},o.pageHandler=function(e){var n,r=this;t.prototype.pageHandler.call(this,e),this.destroyPageHooks=[];var o=this.pdfViewer.viewerUI.createContextMenu(_a,e.$handler.get(0),{selector:".fv__pdf-page-handler-container",items:{complete:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.complete"),callback:function(){r.interaction.unlock(),r.interaction.emit("end",n)}},cancel:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.cancel"),callback:function(){r.interaction.unlock(),r.interaction.emit("cancel")}}}}),i=o.getItem("complete");o.disable(),this.creatingContextmenu=o,this.interaction.on("start",(function(){r.isEnd=!1,o.enable()})),this.interaction.on("end",(function(){r.isEnd=!0,o.disable()})),this.interaction.on("cancel",(function(){o.disable()})),this.interaction.on("move",(function(t){n=t})),o.onHidden((function(){r.interaction.unlock()})),o.onShown((function(){r.interaction.lock(),i.enable()})),this.destroyPageHooks.push(this.pdfViewer.addEventListener(Ra.zoomToSuccess,(function(t){tn(r.markupArray)})),this.pdfViewer.addEventListener(Ra.changeViewModeSuccess,(function(t,e){tn(r.markupArray)})),this.pdfViewer.addEventListener(Ra.fitWidthResizeViewport,(function(){tn(r.markupArray)})))},o.start=function(e,n){tn(this.markupArray);var r=t.prototype.start.call(this,e,n,"Distance");return this.pdfViewer.eventEmitter.emit(Ra.distanceAnnotCreationStart,r),r},o.adjust=function(t,e){var n=this;this.executor.exec((function(){return n.getSnappedPoint(e).then((function(r){Nn(e,r)?n.snappedPointAssistant.hide():(n.snappedPointAssistant.setPosition(r.x,r.y),n.snappedPointAssistant.show(r.type)),n.pdfViewer.eventEmitter.emit(Ra.updateDistanceAnnot,t);var o=n.pdfViewer.getStore().getCurrentValue("measurementData"),i=Qe(),a=pe(o.displayUnit.name)?n.pdfViewer.i18n.t("measurement.units."+o.displayUnit.name):o.displayUnit.name;t.setContent(i+Math.round(100*o.distance)/100+" "+a),t.setEndPoint(r),t.draw()}))}))},o.end=function(){var e=this;this.fakeAnnotation&&this.fakeAnnotation.annotationInfo.contents&&this.executor.waitForLastTask().then((function(){Ze().makup?(e.pdfViewer.eventEmitter.emit(Ra.distanceAnnotCreationEnd,e.fakeAnnotation),t.prototype.end.call(e)):(e.fakeAnnotation.renderer.setMarkUp(e.pageRender.scale,e.pageRender.rotate),e.markupArray.push(e.fakeAnnotation));return Promise.resolve()}))},o.cancel=function(){this.fakeAnnotation&&(this.executor.cancel(),this.pdfViewer.eventEmitter.emit(Ra.distanceAnnotCreationCancel,this.fakeAnnotation),t.prototype.cancel.call(this),this.creatingContextmenu&&this.creatingContextmenu.disable())},o.destroyPageHandler=function(){this.isEnd||this.cancel(),this.creatingContextmenu&&this.creatingContextmenu.destroy(),this.destroyPageHooks&&this.destroyPageHooks.forEach((function(t){return t()})),tn(this.markupArray),t.prototype.destroyPageHandler.call(this)},r}(Wn),ka=(o(3299),function(t){function n(e,n){var r;return(r=t.call(this,e,n,"create-measurement-status")||this).target=n,r}return e(n,t),n}(oo)),Ma=r.ViewerEvents,Oa=(r.DeviceInfo.isTouchDevice,r.Consts),Na=Oa.LineEndingStyle,Ha=Oa.Intents,Va=Oa.CREATING_MEASUREMENT_CONTEXTMENU,ja=(r.shared.ThrottleAsyncTaskExecutor,function(t){function r(e){var n;return(n=t.call(this,e)||this).isEnd=!0,n.markupArray=[],n}e(r,t),r.getStateName=function(){return"createPerimeter"};var o=r.prototype;return o.createInteractionTool=function(t){return new ka(this.pdfViewer,t)},o.createAnnotJson=function(t){var e=this.pdfViewer.store.getCurrentValue("measurementInfo"),r=this.pdfViewer.getDefaultAnnotConfig()("polyline",Ha.POLYLINE_DIMENSION);return t.intent=Ha.POLYLINE_DIMENSION,t.startStyle=Na.OpenArrow,t.endStyle=Na.OpenArrow,t.enableCaption=!0,t.measure={unit:e[Sa].name,ratio:{userSpaceValue:e[ba],userSpaceUnit:e[Aa].name,realValue:e[Ea],realUnit:e[Sa].name}},t.subject=this.pdfViewer.i18n.t("viewer_:annotSubjects.Perimeter"),n(t,r)},o.pageHandler=function(e){var n,r=this;t.prototype.pageHandler.call(this,e),this.contextmenu=this.pdfViewer.viewerUI.createContextMenu(Va,e.$handler.get(0),{selector:".fv__pdf-page-handler-container",items:{complete:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.complete"),callback:function(){r.interaction.unlock(),r.interaction.emit("end",n)}},cancel:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.cancel"),callback:function(){r.interaction.unlock(),r.interaction.emit("cancel")}}}}),this.contextmenu.disable(),this.completeMenuItem=this.contextmenu.getItem("complete"),this.completeMenuItem.disable(),this.creatingContextmenu=this.contextmenu,this.interaction.on("start",(function(){r.isEnd=!1,r.contextmenu.enable(),r.completeMenuItem.disable(),tn(r.markupArray),r.pdfViewer.eventEmitter.emit(Ma.perimeterAnnotCreationStart,r.fakeAnnotation)})),this.interaction.on("end",(function(){})),this.interaction.on("cancel",(function(){r.contextmenu.disable()})),this.interaction.on("move",(function(t){n=t})),this.contextmenu.onHidden((function(){r.interaction.unlock()})),this.contextmenu.onShown((function(){r.interaction.lock(),r.fakeAnnotation.getVertexes().length>=3?r.completeMenuItem.enable():r.completeMenuItem.disable()})),this.destroyPageHooks.push(this.pdfViewer.addEventListener(Ma.zoomToSuccess,(function(t){tn(r.markupArray)})),this.pdfViewer.addEventListener(Ma.changeViewModeSuccess,(function(t,e){tn(r.markupArray)})),this.pdfViewer.addEventListener(Ma.fitWidthResizeViewport,(function(){tn(r.markupArray)})))},o.start=function(e,n){var r=t.prototype.start.call(this,e,n);return this.pdfViewer.eventEmitter.emit(Ma.distanceAnnotCreationStart,r),r},o.adjust=function(t,e){t.setLastPoint(e.deviceX,e.deviceY),this.pdfViewer.eventEmitter.emit(Ma.updateDistanceAnnot,t);var n=this.pdfViewer.getStore().getCurrentValue("measurementData"),r=Qe(),o=pe(n.displayUnit.name)?this.pdfViewer.i18n.t("measurement.units."+n.displayUnit.name):n.displayUnit.name;t.setContent(r+Math.round(100*n.perimeter)/100+" "+o),t.draw()},o.canBeCompleted=function(t){if(!t)return!1;var e=t.getVertexes();if(0==e.length)return!1;var n=t.getLastPoint();return!(1==e.length&&n&&Math.abs(e[0].x-n.x)<Number.EPSILON&&Math.abs(e[0].y-n.y)<Number.EPSILON)},o.end=function(e,n){if(this.fakeAnnotation){if(this.fakeAnnotation.getVertexes().length<2)return-1;if(this.isEnd=!0,this.contextmenu.disable(),Ze().makup)this.pdfViewer.eventEmitter.emit(Ma.distanceAnnotCreationEnd,this.fakeAnnotation),t.prototype.end.call(this,e,n);else this.fakeAnnotation.renderer.setMarkUp(this.pageRender.scale,this.pageRender.rotate),this.markupArray.push(this.fakeAnnotation)}},o.cancel=function(){this.fakeAnnotation&&(this.pdfViewer.eventEmitter.emit(Ma.distanceAnnotCreationCancel,this.fakeAnnotation),t.prototype.cancel.call(this),this.creatingContextmenu&&this.creatingContextmenu.disable())},o.destroyPageHandler=function(){this.isEnd||this.cancel(),tn(this.markupArray),t.prototype.destroyPageHandler.call(this)},r}(Fo)),Ua=(o(5192),function(t){function n(e,n){var r;return(r=t.call(this,e,n,"create-measurement-status")||this).target=n,r}return e(n,t),n}(oo)),Fa=r.ViewerEvents,Ba=r.Consts,Ya=Ba.Intents,Xa=Ba.CREATING_MEASUREMENT_CONTEXTMENU,Ga=Ba.DISTANCE_TOLERANCE,$a=Ba.POINT_TOLERANCE,za=function(t){function r(e){var n;return(n=t.call(this,e)||this).isEnd=!0,n.markupArray=[],n}e(r,t),r.getStateName=function(){return"createArea"};var o=r.prototype;return o.createInteractionTool=function(t){return new Ua(this.pdfViewer,t)},o.createAnnotJson=function(t){var e=this.pdfViewer.store.getCurrentValue("measurementInfo"),r=this.pdfViewer.getDefaultAnnotConfig()("polygon",Ya.POLYGON_DIMENSION);return t.enableCaption=!0,t.intent=Ya.POLYGON_DIMENSION,t.measure={unit:e[Sa].name,ratio:{userSpaceValue:e[ba],userSpaceUnit:e[Aa].name,realValue:e[Ea],realUnit:e[Sa].name}},t.subject=this.pdfViewer.i18n.t("viewer_:annotSubjects.Area"),n(t,r)},o.pageHandler=function(e){var n,r=this;t.prototype.pageHandler.call(this,e),this.destroyPageHooks=[],this.contextmenu=this.pdfViewer.viewerUI.createContextMenu(Xa,e.$handler.get(0),{selector:".fv__pdf-page-handler-container",items:{complete:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.complete"),callback:function(){r.interaction.unlock(),r.interaction.emit("end",n)}},cancel:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.cancel"),callback:function(){r.interaction.unlock(),r.interaction.emit("cancel")}}}}),this.contextmenu.disable(),this.completeMenuItem=this.contextmenu.getItem("complete"),this.completeMenuItem.disable(),this.creatingContextmenu=this.contextmenu,this.interaction.on("start",(function(){r.isEnd=!1,r.contextmenu.enable(),r.completeMenuItem.disable(),tn(r.markupArray)})),this.interaction.on("end",(function(){})),this.interaction.on("cancel",(function(){r.contextmenu.disable()})),this.interaction.on("move",(function(t){n=t})),this.contextmenu.onHidden((function(){r.interaction.unlock()})),this.contextmenu.onShown((function(){r.interaction.lock(),r.fakeAnnotation.getVertexes().length>=2?r.completeMenuItem.enable():r.completeMenuItem.disable()})),this.destroyPageHooks.push(this.pdfViewer.addEventListener(Fa.zoomToSuccess,(function(t){tn(r.markupArray)})),this.pdfViewer.addEventListener(Fa.changeViewModeSuccess,(function(t,e){tn(r.markupArray)})),this.pdfViewer.addEventListener(Fa.fitWidthResizeViewport,(function(){tn(r.markupArray)})))},o.start=function(e,n){var r=t.prototype.start.call(this,e,n);return this.pdfViewer.eventEmitter.emit(Fa.distanceAnnotCreationStart,r),r},o.isPointClosely=function(t,e,n){return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n},o.pointDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,o=Math.abs(n),i=Math.abs(r);return Math.sqrt(o*o+i*i)},o.isPointOnLine=function(t,e,n){if(this.isPointClosely(t,e,Number.EPSILON)||this.isPointClosely(t,n,Number.EPSILON))return!0;var r=this.pointDistance(t,e),o=this.pointDistance(t,n),i=this.pointDistance(e,n);return Math.abs(r+o-i)<$a},o.checkLineCrossed=function(t,e,n,r){var o,i;if(o=Math.abs(e.x-t.x)<1e-4?Number.POSITIVE_INFINITY:(e.y-t.y)/(e.x-t.x),i=Math.abs(r.x-n.x)<1e-4?Number.POSITIVE_INFINITY:(r.y-n.y)/(r.x-n.x),Number.isFinite(o)&&Number.isFinite(i)&&Math.abs(o-i)<.01||!Number.isFinite(o)&&!Number.isFinite(i))return!(!this.isPointOnLine(t,n,r)&&!this.isPointOnLine(e,n,r));var a,s,c=t.x>e.x?e.x:t.x,u=t.x>e.x?t.x:e.x,f=n.x>r.x?r.x:n.x,l=n.x>r.x?n.x:r.x;if(Number.isFinite(o)){if(Number.isFinite(i))return!((a=(o*t.x-t.y-i*n.x+n.y)/(o-i))<c-$a||a>u+$a)&&(!(a<f-$a||a>l+$a)&&(s=o*(a-t.x)+t.y,!0));s=o*((a=f)-t.x)+t.y;var h=n.y<r.y?n.y:r.y,d=n.y<r.y?r.y:n.y;return h-$a<=s&&s<=d+$a&&c-$a<=a&&a<=u+$a}s=i*((a=c)-n.x)+n.y;var p=t.y<e.y?t.y:e.y,v=t.y<e.y?e.y:t.y;return p-$a<=s&&s<=v+$a&&f-$a<=a&&a<=l+$a},o.checkIfPointAllowAdded=function(t,e){if(t.length>=2&&this.isPointOnLine(e,t[t.length-1],t[t.length-2]))return!1;if(t.length>=3)for(var n=t[t.length-1],r=e,o=t[t.length-2],i=t.length-3;i>=0;i--){var a=t[i];if(this.checkLineCrossed(o,a,n,r))return!(0!=i||!this.isPointClosely(e,t[0],Ga));o=a}return!0},o.addPoint=function(t,e){var n=e.deviceX,r=e.deviceY,o=t.page.reverseDevicePoint([n,r],t.scale,t.rotate),i=o[0],a=o[1];if(this.checkIfPointAllowAdded(t.getVertexes(),{x:i,y:a})){var s=t.getVertexes();if(s.length>2&&this.isPointClosely(s[0],{x:i,y:a},Ga)){var c=s[s.length-1],u=t.page.getDevicePoint([c.x,c.y],t.scale,t.rotate),f=u[0],l=u[1],h=t.pageRender.$handler[0].getBoundingClientRect();return this.interaction.lastMoveData={clientX:f+h.left,clientY:l+h.top},void this.pdfViewer.getStore().dispatch("create-measurement-status","complete")}t.addPoint(n,r),t.draw()}},o.adjust=function(t,e){var n=t.page.reverseDevicePoint([e.deviceX,e.deviceY],t.scale,t.rotate),r=n[0],o=n[1];if(this.checkIfPointAllowAdded(t.getVertexes(),{x:r,y:o})){this.pdfViewer.eventEmitter.emit(Fa.updateDistanceAnnot,t);var i=this.pdfViewer.getStore().getCurrentValue("measurementData"),a=Qe(),s=this.pdfViewer.i18n.t("measurement.units."+i.displayUnit.name);t.setContent((a?a+" ":"")+Math.round(100*i.area)/100+" sq "+s),t.setLastPoint(e.deviceX,e.deviceY),t.draw()}},o.end=function(e,n){if(this.fakeAnnotation){var r=e.getVertexes().slice(0);if(0!=r.length){if(null!=n){var o=e.page.reverseDevicePoint([n.deviceX,n.deviceY],e.scale,e.rotate),i=o[0],a=o[1];this.isPointClosely(r[r.length-1],{x:i,y:a},Ga)?n=null:r.push({x:i,y:a})}if(!this.checkIfPointAllowAdded(r,r[0]))return-1;if(this.isEnd=!0,this.contextmenu.disable(),Ze().makup){this.pdfViewer.eventEmitter.emit(Fa.distanceAnnotCreationEnd,this.fakeAnnotation);var s=this.pdfViewer.getStore().getCurrentValue("measurementData");if(s){var c=Qe(),u=this.pdfViewer.i18n.t("measurement.units."+s.displayUnit.name);e.setContent((c?c+" ":"")+Math.round(100*s.area)/100+" sq "+u)}t.prototype.end.call(this,e,n)}else{this.fakeAnnotation.renderer.setMarkUp(this.pageRender.scale,this.pageRender.rotate),this.markupArray.push(this.fakeAnnotation)}}}},o.cancel=function(){this.fakeAnnotation&&(this.pdfViewer.eventEmitter.emit(Fa.distanceAnnotCreationCancel,this.fakeAnnotation),t.prototype.cancel.call(this),this.creatingContextmenu&&this.creatingContextmenu.disable())},o.destroyPageHandler=function(){this.isEnd||this.cancel(),tn(this.markupArray),t.prototype.destroyPageHandler.call(this)},r}(Oo),Wa=r.ViewerEvents,qa=r.Consts.Intents,Ja=function(t){function r(e){var n;return(n=t.call(this,e)||this).isEnd=!0,n.markupArray=[],n}e(r,t),r.getStateName=function(){return"createCircleArea"};var o=r.prototype;return o.start=function(t){var e={flags:4,subject:this.getSubject()};this.currentFakeAnnot=new rn({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson(e)});var n=t.left,r=t.top;this.currentFakeAnnot.setRect({left:n,top:r,right:n+10,bottom:r-10}),this.pdfViewer.eventEmitter.emit(Wa.distanceAnnotCreationStart,this.currentFakeAnnot),tn(this.markupArray)},o.adjust=function(e,n,r){t.prototype.adjust.call(this,e,n,r),this.pdfViewer.eventEmitter.emit(Wa.updateDistanceAnnot,e);var o=this.pdfViewer.getStore().getCurrentValue("measurementData"),i=Qe(),a=pe(o.displayUnit.name)?this.pdfViewer.i18n.t("measurement.units."+o.displayUnit.name):o.displayUnit.name;o.area&&this.currentFakeAnnot.setContent(i+o.area.toFixed(2)+" sq "+a)},o.end=function(e,n,r){Ze().makup?(this.pdfViewer.eventEmitter.emit(Wa.distanceAnnotCreationEnd,e),t.prototype.end.call(this,e,n,r)):this.markupArray.push(e)},o.createAnnotJson=function(t){var e=this.pdfViewer.store.getCurrentValue("measurementInfo"),r=this.pdfViewer.getDefaultAnnotConfig()("circle",qa.CIRCLE_DIMENSION);return t.intent=qa.CIRCLE_DIMENSION,t.measure={unit:e[Sa].name,ratio:{userSpaceValue:e[ba],userSpaceUnit:e[Aa].name,realValue:e[Ea],realUnit:e[Sa].name}},n(t,r)},o.pageHandler=function(e){var n=this;t.prototype.pageHandler.call(this,e),this.destroyPageHooks=[],this.destroyPageHooks.push(this.pdfViewer.addEventListener(Wa.zoomToSuccess,(function(t){tn(n.markupArray)})),this.pdfViewer.addEventListener(Wa.changeViewModeSuccess,(function(t,e){tn(n.markupArray)})),this.pdfViewer.addEventListener(Wa.fitWidthResizeViewport,(function(){tn(n.markupArray)})))},o.destroyPageHandler=function(){t.prototype.destroyPageHandler.call(this),tn(this.markupArray)},r}(mn),Ka=function(){function t(){}t.inject=function(){return{pdfViewer:r.PDFViewer}};var e=t.prototype;return e.getInternalStampService=function(){var t;return null===(t=this.pdfViewer)||void 0===t?void 0:t.getIoC().getInstanceByClass(qi)},e.getCurrentStampInfo=function(){if(this.pdfViewer.getStateHandlerManager().getCurrentStates()===aa){var t=this.getInternalStampService().getCurrentStampConfig();return t?{category:t.category,iconName:t.name,width:t.width,height:t.height,url:t.url,fileType:t.fileType}:void 0}},e.onSelectStampInfo=function(t){var e=this;return this.getInternalStampService().onSwitchStamp((function(){t(e.getCurrentStampInfo())}))},t}(),Qa=function(){function t(t){this.pdfViewer=t}var n=t.prototype;return n.getStampService=function(){return this.pdfViewer.getIoC().getInstanceByClass(Ka)},n.init=function(t){var e=void 0===t?{}:t,n=e.showReplyDialog,r=e.hideReplyDialog,o=e.showPopup,i=e.hidePopup,a=e.showPropertiesDialog,s=e.hidePropertiesDialog,c=e.contextMenuIsEnable,u=this.pdfViewer.getStateHandlerManager();u.register(m),u.register(L),u.register(M),u.register(N),u.register(V),u.register(B),u.register(st),u.register(St),u.register(kt),u.register(Ft),u.register(vn),u.register(mn),u.register(Wn),u.register(Qn),u.register(Oo),u.register(Fo),u.register(Jo),u.register(ii),u.register(Ai),u.register(Xi),u.register(aa),u.register(wa),u.register(La),u.register(ja),u.register(za),u.register(Ja),(n||r||o||i||a||s||c)&&this._overwriteAnnot(n,r,o,i,a,s,c)},n._overwriteAnnot=function(t,n,r,o,i,a,s){this.pdfViewer.getAnnotManager().registerMatchRule((function(c,u){return c.isMarkup()?function(c){function u(){return c.apply(this,arguments)||this}e(u,c);var f=u.prototype;return f.showReplyDialog=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o;return t?t.bind(this).apply(void 0,n):(o=c.prototype.showReplyDialog).call.apply(o,[this].concat(n))},f.hideReplyDialog=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!n){var i;if(t)return;return(i=c.prototype.hideReplyDialog).call.apply(i,[this].concat(r))}return n.bind(this).apply(void 0,r)},f.showPopup=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o;return r?r.bind(this).apply(void 0,e):(o=c.prototype.showPopup).call.apply(o,[this].concat(e))},f.hidePopup=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!o){var i;if(r)return;return(i=c.prototype.hidePopup).call.apply(i,[this].concat(e))}return o.bind(this).apply(void 0,e)},f.showPropertiesDialog=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return i?i.bind(this).apply(void 0,e):(r=c.prototype.showPropertiesDialog).call.apply(r,[this].concat(e))},f.hidePropertiesDialog=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!a){var r;if(i)return;return(r=c.prototype.hidePropertiesDialog).call.apply(r,[this].concat(e))}return a.bind(this).apply(void 0,e)},f.contextMenuIsEnable=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return s?s.bind(this).apply(void 0,e):(r=c.prototype.contextMenuIsEnable).call.apply(r,[this].concat(e))},u}(u):u}))},t}()}(),i}()}));